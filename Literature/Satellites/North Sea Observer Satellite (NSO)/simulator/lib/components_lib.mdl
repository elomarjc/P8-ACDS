Library {
  Name			  "components_lib"
  Version		  6.2
  MdlSubVersion		  0
  SavedCharacterEncoding  "ibm-5348_P100-1997"
  SaveDefaultBlockParams  on
  SampleTimeColors	  off
  LibraryLinkDisplay	  "all"
  WideLines		  off
  ShowLineDimensions	  off
  ShowPortDataTypes	  off
  ShowLoopsOnError	  on
  IgnoreBidirectionalLines off
  ShowStorageClass	  off
  ShowTestPointIcons	  on
  ShowViewerIcons	  on
  SortedOrder		  off
  ExecutionContextIcon	  off
  ShowLinearizationAnnotations on
  CovSaveName		  "covdata"
  CovMetricSettings	  "dw"
  CovNameIncrementing	  off
  CovHtmlReporting	  on
  covSaveCumulativeToWorkspaceVar on
  CovSaveSingleToWorkspaceVar on
  CovCumulativeReport	  off
  CovReportOnPause	  on
  ScopeRefreshTime	  0.035000
  OverrideScopeRefreshTime on
  DisableAllScopes	  off
  BlockNameDataTip	  off
  BlockParametersDataTip  off
  BlockDescriptionStringDataTip	off
  ToolBar		  on
  StatusBar		  on
  BrowserShowLibraryLinks off
  BrowserLookUnderMasks	  on
  Created		  "Thu May  6 13:38:41 2004"
  Creator		  "jdgr01"
  UpdateHistory		  "UpdateHistoryNever"
  ModifiedByFormat	  "%<Auto>"
  LastModifiedBy	  "Martin"
  ModifiedDateFormat	  "%<Auto>"
  LastModifiedDate	  "Tue May 30 17:24:53 2006"
  ModelVersionFormat	  "1.%<AutoIncrement:327>"
  ConfigurationManager	  "None"
  LinearizationMsg	  "none"
  Profile		  off
  ParamWorkspaceSource	  "MATLABWorkspace"
  ExtModeBatchMode	  off
  ExtModeEnableFloating	  on
  ExtModeTrigType	  "manual"
  ExtModeTrigMode	  "normal"
  ExtModeTrigPort	  "1"
  ExtModeTrigElement	  "any"
  ExtModeTrigDuration	  1000
  ExtModeTrigDurationFloating "auto"
  ExtModeTrigHoldOff	  0
  ExtModeTrigDelay	  0
  ExtModeTrigDirection	  "rising"
  ExtModeTrigLevel	  0
  ExtModeArchiveMode	  "off"
  ExtModeAutoIncOneShot	  off
  ExtModeIncDirWhenArm	  off
  ExtModeAddSuffixToVar	  off
  ExtModeWriteAllDataToWs off
  ExtModeArmWhenConnect	  on
  ExtModeSkipDownloadWhenConnect off
  ExtModeLogAll		  on
  ExtModeAutoUpdateStatusClock off
  StrictBusMsg		  "None"
  ProdHWDeviceType	  "32-bit Generic"
  ShowModelReferenceBlockVersion off
  ShowModelReferenceBlockIO off
  BlockDefaults {
    Orientation		    "right"
    ForegroundColor	    "black"
    BackgroundColor	    "white"
    DropShadow		    off
    NamePlacement	    "normal"
    FontName		    "Helvetica"
    FontSize		    10
    FontWeight		    "normal"
    FontAngle		    "normal"
    ShowName		    on
  }
  BlockParameterDefaults {
    Block {
      BlockType		      Abs
      SaturateOnIntegerOverflow	on
      ZeroCross		      on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      ActionPort
      InitializeStates	      "held"
      ActionType	      "unset"
    }
    Block {
      BlockType		      SwitchCase
      CaseConditions	      "{1}"
      CaseShowDefault	      on
      ZeroCross		      on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Clock
      DisplayTime	      off
    }
    Block {
      BlockType		      Constant
      Value		      "1"
      VectorParams1D	      on
      OutDataTypeMode	      "Inherit from 'Constant value'"
      OutDataType	      "sfix(16)"
      ConRadixGroup	      "Use specified scaling"
      OutScaling	      "2^0"
      SampleTime	      "inf"
    }
    Block {
      BlockType		      Demux
      Outputs		      "4"
      DisplayOption	      "none"
      BusSelectionMode	      off
    }
    Block {
      BlockType		      Derivative
      LinearizePole	      "inf"
    }
    Block {
      BlockType		      DiscreteIntegrator
      IntegratorMethod	      "Integration: Forward Euler"
      gainval		      "1.0"
      ExternalReset	      "none"
      InitialConditionSource  "internal"
      InitialCondition	      "0"
      InitialConditionMode    "State and output"
      SampleTime	      "1"
      OutDataTypeMode	      "Inherit via internal rule"
      OutDataType	      "sfix(16)"
      OutScaling	      "2^0"
      LockScale		      off
      RndMeth		      "Floor"
      SaturateOnIntegerOverflow	off
      LimitOutput	      off
      UpperSaturationLimit    "inf"
      LowerSaturationLimit    "-inf"
      ShowSaturationPort      off
      ShowStatePort	      off
      IgnoreLimit	      off
      StateMustResolveToSignalObject off
      RTWStateStorageClass    "Auto"
    }
    Block {
      BlockType		      EnablePort
      StatesWhenEnabling      "held"
      ShowOutputPort	      off
      ZeroCross		      on
    }
    Block {
      BlockType		      From
      IconDisplay	      "Tag"
    }
    Block {
      BlockType		      FromWorkspace
      VariableName	      "simulink_input"
      SampleTime	      "-1"
      Interpolate	      on
      ZeroCross		      off
      OutputAfterFinalValue   "Extrapolation"
    }
    Block {
      BlockType		      Fcn
      Expr		      "sin(u[1])"
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Gain
      Gain		      "1"
      Multiplication	      "Element-wise(K.*u)"
      ParameterDataTypeMode   "Same as input"
      ParameterDataType	      "sfix(16)"
      ParameterScalingMode    "Best Precision: Matrix-wise"
      ParameterScaling	      "2^0"
      OutDataTypeMode	      "Same as input"
      OutDataType	      "sfix(16)"
      OutScaling	      "2^0"
      LockScale		      off
      RndMeth		      "Floor"
      SaturateOnIntegerOverflow	on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Goto
      IconDisplay	      "Tag"
    }
    Block {
      BlockType		      Ground
    }
    Block {
      BlockType		      If
      NumInputs		      "1"
      IfExpression	      "u1 > 0"
      ShowElse		      on
      ZeroCross		      on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Inport
      UseBusObject	      off
      BusObject		      "BusObject"
      BusOutputAsStruct	      off
      PortDimensions	      "-1"
      SampleTime	      "-1"
      DataType		      "auto"
      OutDataType	      "sfix(16)"
      OutScaling	      "2^0"
      SignalType	      "auto"
      SamplingMode	      "auto"
      Interpolate	      on
    }
    Block {
      BlockType		      Integrator
      ExternalReset	      "none"
      InitialConditionSource  "internal"
      InitialCondition	      "0"
      LimitOutput	      off
      UpperSaturationLimit    "inf"
      LowerSaturationLimit    "-inf"
      ShowSaturationPort      off
      ShowStatePort	      off
      AbsoluteTolerance	      "auto"
      IgnoreLimit	      off
      ZeroCross		      on
    }
    Block {
      BlockType		      Logic
      Operator		      "AND"
      Inputs		      "2"
      AllPortsSameDT	      on
      OutDataTypeMode	      "Logical (see Configuration Parameters: Optimiza"
"tion)"
      LogicDataType	      "uint(8)"
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Math
      Operator		      "exp"
      OutputSignalType	      "auto"
      SampleTime	      "-1"
      OutDataTypeMode	      "Same as first input"
      OutDataType	      "sfix(16)"
      OutScaling	      "2^0"
      LockScale		      off
      RndMeth		      "Floor"
      SaturateOnIntegerOverflow	on
    }
    Block {
      BlockType		      MATLABFcn
      MATLABFcn		      "sin"
      OutputDimensions	      "-1"
      OutputSignalType	      "auto"
      Output1D		      on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Memory
      X0		      "0"
      InheritSampleTime	      off
      LinearizeMemory	      off
      StateMustResolveToSignalObject off
      RTWStateStorageClass    "Auto"
    }
    Block {
      BlockType		      Merge
      Inputs		      "2"
      InitialOutput	      "[]"
      AllowUnequalInputPortWidths off
      InputPortOffsets	      "[]"
    }
    Block {
      BlockType		      Mux
      Inputs		      "4"
      DisplayOption	      "none"
      UseBusObject	      off
      BusObject		      "BusObject"
      NonVirtualBus	      off
    }
    Block {
      BlockType		      Outport
      Port		      "1"
      UseBusObject	      off
      BusObject		      "BusObject"
      BusOutputAsStruct	      off
      PortDimensions	      "-1"
      SampleTime	      "-1"
      DataType		      "auto"
      OutDataType	      "sfix(16)"
      OutScaling	      "2^0"
      SignalType	      "auto"
      SamplingMode	      "auto"
      OutputWhenDisabled      "held"
      InitialOutput	      "[]"
    }
    Block {
      BlockType		      Product
      Inputs		      "2"
      Multiplication	      "Element-wise(.*)"
      InputSameDT	      on
      OutDataTypeMode	      "Same as first input"
      OutDataType	      "sfix(16)"
      OutScaling	      "2^0"
      LockScale		      off
      RndMeth		      "Zero"
      SaturateOnIntegerOverflow	on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Quantizer
      QuantizationInterval    "0.5"
      LinearizeAsGain	      on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      RandomNumber
      Mean		      "0"
      Variance		      "1"
      Seed		      "0"
      SampleTime	      "-1"
      VectorParams1D	      on
    }
    Block {
      BlockType		      Reference
    }
    Block {
      BlockType		      RelationalOperator
      Operator		      ">="
      InputSameDT	      on
      LogicOutDataTypeMode    "Logical (see Configuration Parameters: Optimiza"
"tion)"
      LogicDataType	      "uint(8)"
      ZeroCross		      on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Saturate
      UpperLimit	      "0.5"
      LowerLimit	      "-0.5"
      LinearizeAsGain	      on
      ZeroCross		      on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Scope
      Floating		      off
      ModelBased	      off
      TickLabels	      "OneTimeTick"
      ZoomMode		      "on"
      Grid		      "on"
      TimeRange		      "auto"
      YMin		      "-5"
      YMax		      "5"
      SaveToWorkspace	      off
      SaveName		      "ScopeData"
      LimitDataPoints	      on
      MaxDataPoints	      "5000"
      Decimation	      "1"
      SampleInput	      off
      SampleTime	      "0"
    }
    Block {
      BlockType		      Selector
      InputType		      "Vector"
      IndexMode		      "One-based"
      ElementSrc	      "Internal"
      Elements		      "1"
      RowSrc		      "Internal"
      Rows		      "1"
      ColumnSrc		      "Internal"
      Columns		      "1"
      InputPortWidth	      "-1"
      IndexIsStartValue	      off
      OutputPortSize	      "1"
    }
    Block {
      BlockType		      "S-Function"
      FunctionName	      "system"
      SFunctionModules	      "''"
      PortCounts	      "[]"
    }
    Block {
      BlockType		      Signum
      ZeroCross		      on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      StateSpace
      A			      "1"
      B			      "1"
      C			      "1"
      D			      "1"
      X0		      "0"
      AbsoluteTolerance	      "auto"
      Realization	      "auto"
    }
    Block {
      BlockType		      SubSystem
      ShowPortLabels	      on
      Permissions	      "ReadWrite"
      PermitHierarchicalResolution "All"
      SystemSampleTime	      "-1"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      SimViewingDevice	      off
      DataTypeOverride	      "UseLocalSettings"
      MinMaxOverflowLogging   "UseLocalSettings"
    }
    Block {
      BlockType		      Sum
      IconShape		      "rectangular"
      Inputs		      "++"
      InputSameDT	      on
      OutDataTypeMode	      "Same as first input"
      OutDataType	      "sfix(16)"
      OutScaling	      "2^0"
      LockScale		      off
      RndMeth		      "Floor"
      SaturateOnIntegerOverflow	on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Switch
      Criteria		      "u2 >= Threshold"
      Threshold		      "0"
      InputSameDT	      on
      OutDataTypeMode	      "Inherit via internal rule"
      RndMeth		      "Floor"
      SaturateOnIntegerOverflow	on
      ZeroCross		      on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Terminator
    }
    Block {
      BlockType		      TransferFcn
      Numerator		      "[1]"
      Denominator	      "[1 2 1]"
      AbsoluteTolerance	      "auto"
      Realization	      "auto"
    }
    Block {
      BlockType		      Trigonometry
      Operator		      "sin"
      OutputSignalType	      "auto"
      SampleTime	      "-1"
    }
    Block {
      BlockType		      UnitDelay
      X0		      "0"
      SampleTime	      "1"
      StateMustResolveToSignalObject off
      RTWStateStorageClass    "Auto"
    }
    Block {
      BlockType		      ZeroOrderHold
      SampleTime	      "1"
    }
  }
  AnnotationDefaults {
    HorizontalAlignment	    "center"
    VerticalAlignment	    "middle"
    ForegroundColor	    "black"
    BackgroundColor	    "white"
    DropShadow		    off
    FontName		    "Helvetica"
    FontSize		    10
    FontWeight		    "normal"
    FontAngle		    "normal"
  }
  LineDefaults {
    FontName		    "Helvetica"
    FontSize		    9
    FontWeight		    "normal"
    FontAngle		    "normal"
  }
  System {
    Name		    "components_lib"
    Location		    [271, 93, 1071, 763]
    Open		    off
    ModelBrowserVisibility  on
    ModelBrowserWidth	    212
    ScreenColor		    "white"
    PaperOrientation	    "landscape"
    PaperPositionMode	    "auto"
    PaperType		    "usletter"
    PaperUnits		    "inches"
    ZoomFactor		    "100"
    ReportName		    "simulink-default.rpt"
    Block {
      BlockType		      SubSystem
      Name		      "ACS"
      Ports		      []
      Position		      [582, 229, 722, 299]
      TreatAsAtomicUnit	      off
      MinAlgLoopOccurrences   off
      RTWSystemCode	      "Auto"
      System {
	Name			"ACS"
	Location		[98, 138, 1226, 921]
	Open			off
	ModelBrowserVisibility	on
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  SubSystem
	  Name			  "Controllers"
	  Ports			  []
	  Position		  [175, 19, 275, 61]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "Controllers"
	    Location		    [271, 93, 1071, 763]
	    Open		    on
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      SubSystem
	      Name		      "Angular velocity \ncontroller"
	      Ports		      [2, 1]
	      Position		      [75, 454, 160, 516]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      MaskType		      "Angular Velocity Controller"
	      MaskDescription	      "The controller in this block is to be c"
"onstructed using a state space system. The\nreference is subtracted from the "
"measurement (positive feedback and SS-reference) and passed through the SS-sy"
"stem. Thus if the controller is merely a gain matrix only the D-matrix has to"
" contain the controller and the remaining be zero-matrices. The controller de"
"sign files are kept in the \"design\" directory and the definition of the con"
"troller system matrices is the final task in each controller design file.\nTh"
"e different matrices for the state space system are named:\nA_ang_c\nB_ang_c"
"\nC_ang_c\nD_ang_c"
	      MaskPromptString	      "Angular rate controller design file nam"
"e (remember gnyfs :-))"
	      MaskStyleString	      "edit"
	      MaskTunableValueString  "on"
	      MaskEnableString	      "on"
	      MaskVisibilityString    "on"
	      MaskToolTipString	      "on"
	      MaskVariables	      "ang_file_name=@1;"
	      MaskInitialization      "run(strcat('design/',ang_file_name))"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "'ang_robust_control.m'"
	      System {
		Name			"Angular velocity \ncontroller"
		Location		[240, 145, 759, 481]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "omega"
		  Position		  [25, 28, 55, 42]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "omega_ref"
		  Position		  [30, 88, 60, 102]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  StateSpace
		  Name			  "State-Space"
		  Position		  [190, 18, 250, 52]
		  A			  "A_ang_c"
		  B			  "B_ang_c"
		  C			  "C_ang_c"
		  D			  "D_ang_c"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [80, 25, 100, 45]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Outport
		  Name			  "N_mw"
		  Position		  [385, 28, 415, 42]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "omega_ref"
		  SrcPort		  1
		  Points		  [25, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "omega"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "State-Space"
		  SrcPort		  1
		  DstBlock		  "N_mw"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "State-Space"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Attitude controller"
	      Ports		      [3, 1]
	      Position		      [70, 550, 170, 610]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      MaskType		      "Attitude Controller"
	      MaskDescription	      "The controller in this block is to be c"
"onstructed using a state space system. The error quarternion is calculated fr"
"om the input and the result is used in the SS-system. Thus if the controller "
"is merely a gain matrix only the D-matrix has to contain the controller and t"
"he remaining be zero-matrices. The controller design files are kept in the \""
"design\" directory and the definition of the controller system matrices is th"
"e final task in each controller design file.\nThe different matrices for the "
"state space system are named:\nA_att_c\nB_att_c\nC_att_c\nD_att_c"
	      MaskPromptString	      "Attitude controller design file name (r"
"emember gnyfs :-))"
	      MaskStyleString	      "edit"
	      MaskTunableValueString  "on"
	      MaskEnableString	      "on"
	      MaskVisibilityString    "on"
	      MaskToolTipString	      "on"
	      MaskVariables	      "att_file_name=@1;"
	      MaskInitialization      "run(strcat('design/',att_file_name))"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "'attitude_control_lqr.m'"
	      System {
		Name			"Attitude controller"
		Location		[214, 74, 1022, 722]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "q_att"
		  Position		  [35, 38, 65, 52]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "q_ref"
		  Position		  [35, 88, 65, 102]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "omega"
		  Position		  [35, 143, 65, 157]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [2, 1]
		  Position		  [330, 56, 335, 94]
		  ShowName		  off
		  Inputs		  "2"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Quarternion error"
		  Ports			  [2, 1]
		  Position		  [105, 48, 205, 92]
		  SourceBlock		  "components_lib/Math utilities/Quate"
"rnion operations/Quarternion error"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Selector
		  Name			  "Selector"
		  Ports			  [1, 1]
		  Position		  [240, 51, 280, 89]
		  Elements		  "[1 2 3]"
		  InputPortWidth	  "4"
		}
		Block {
		  BlockType		  StateSpace
		  Name			  "State-Space"
		  Position		  [360, 58, 420, 92]
		  A			  "A_att_c"
		  B			  "B_att_c"
		  C			  "C_att_c"
		  D			  "D_att_c"
		}
		Block {
		  BlockType		  Outport
		  Name			  "omega_ref"
		  Position		  [465, 68, 495, 82]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "State-Space"
		  SrcPort		  1
		  DstBlock		  "omega_ref"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Quarternion error"
		  SrcPort		  1
		  DstBlock		  "Selector"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "q_att"
		  SrcPort		  1
		  Points		  [15, 0; 0, 15]
		  DstBlock		  "Quarternion error"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "q_ref"
		  SrcPort		  1
		  Points		  [15, 0; 0, -15]
		  DstBlock		  "Quarternion error"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Selector"
		  SrcPort		  1
		  Points		  [15, 0; 0, -5]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "omega"
		  SrcPort		  1
		  Points		  [245, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "State-Space"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Attitude controller\nwith integrator"
	      Ports		      [3, 1]
	      Position		      [210, 550, 310, 610]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      MaskType		      "Attitude Controller"
	      MaskDescription	      "The controller in this block is to be c"
"onstructed using a state space system. The error quarternion is calculated fr"
"om the input and the result is used in the SS-system. Thus if the controller "
"is merely a gain matrix only the D-matrix has to contain the controller and t"
"he remaining be zero-matrices. The controller design files are kept in the \""
"design\" directory and the definition of the controller system matrices is th"
"e final task in each controller design file.\nThe different matrices for the "
"state space system are named:\nA_att_c\nB_att_c\nC_att_c\nD_att_c"
	      MaskPromptString	      "Attitude controller design file name (r"
"emember gnyfs :-))"
	      MaskStyleString	      "edit"
	      MaskTunableValueString  "on"
	      MaskEnableString	      "on"
	      MaskVisibilityString    "on"
	      MaskToolTipString	      "on"
	      MaskVariables	      "att_file_name=@1;"
	      MaskInitialization      "run(strcat('design/',att_file_name))"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "'att_control_with_integrator.m'"
	      System {
		Name			"Attitude controller\nwith integrator"
		Location		[225, 70, 1022, 718]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "q_att"
		  Position		  [35, 38, 65, 52]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "q_ref"
		  Position		  [35, 88, 65, 102]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "omega"
		  Position		  [35, 123, 65, 137]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Integrator
		  Name			  "Integrator"
		  Ports			  [1, 1]
		  Position		  [265, 155, 295, 185]
		  LimitOutput		  on
		  UpperSaturationLimit	  "0.01"
		  LowerSaturationLimit	  "-0.01"
		  IgnoreLimit		  off
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [3, 1]
		  Position		  [330, 56, 335, 94]
		  ShowName		  off
		  Inputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Quarternion error"
		  Ports			  [2, 1]
		  Position		  [105, 48, 205, 92]
		  SourceBlock		  "components_lib/Math utilities/Quate"
"rnion operations/Quarternion error"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Selector
		  Name			  "Selector"
		  Ports			  [1, 1]
		  Position		  [240, 51, 280, 89]
		  Elements		  "[1 2 3]"
		  InputPortWidth	  "4"
		}
		Block {
		  BlockType		  StateSpace
		  Name			  "State-Space"
		  Position		  [360, 58, 420, 92]
		  A			  "A_att_c"
		  B			  "B_att_c"
		  C			  "C_att_c"
		  D			  "D_att_c"
		}
		Block {
		  BlockType		  Outport
		  Name			  "omega_ref"
		  Position		  [465, 68, 495, 82]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "State-Space"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "omega"
		  SrcPort		  1
		  Points		  [225, 0; 0, -55]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Selector"
		  SrcPort		  1
		  Points		  [15, 0; 0, -5]
		  Branch {
		    DstBlock		    "Mux"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -40; -75, 0; 0, 145]
		    DstBlock		    "Integrator"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "q_ref"
		  SrcPort		  1
		  Points		  [15, 0; 0, -15]
		  DstBlock		  "Quarternion error"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "q_att"
		  SrcPort		  1
		  Points		  [15, 0; 0, 15]
		  DstBlock		  "Quarternion error"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Quarternion error"
		  SrcPort		  1
		  DstBlock		  "Selector"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "State-Space"
		  SrcPort		  1
		  DstBlock		  "omega_ref"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Integrator"
		  SrcPort		  1
		  Points		  [15, 0]
		  DstBlock		  "Mux"
		  DstPort		  3
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Desaturation controller"
	      Ports		      [2, 2]
	      Position		      [200, 454, 315, 516]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      MaskPromptString	      "Angular momentum bias"
	      MaskStyleString	      "edit"
	      MaskTunableValueString  "on"
	      MaskEnableString	      "on"
	      MaskVisibilityString    "on"
	      MaskToolTipString	      "on"
	      MaskVariables	      "h_bias=@1;"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "2.23*1e-3"
	      System {
		Name			"Desaturation controller"
		Location		[277, 113, 999, 642]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "H_mw"
		  Position		  [25, 168, 55, 182]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "T_meas"
		  Position		  [475, 193, 505, 207]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux"
		  Ports			  [1, 3]
		  Position		  [705, 211, 710, 249]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product1"
		  Ports			  [2, 1]
		  Position		  [270, 72, 300, 103]
		  ShowName		  off
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  From
		  Name			  "From4"
		  Position		  [15, 54, 105, 66]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "Mag_I"
		}
		Block {
		  BlockType		  From
		  Name			  "From5"
		  Position		  [15, 19, 105, 31]
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "q_I_S"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  Position		  [460, 140, 490, 170]
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Ground
		  Name			  "Ground"
		  Position		  [625, 280, 645, 300]
		  Orientation		  "left"
		  NamePlacement		  "alternate"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction2"
		  Ports			  [1, 1]
		  Position		  [325, 75, 355, 105]
		  ShowName		  off
		  Operator		  "sqrt"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux1"
		  Ports			  [3, 1]
		  Position		  [830, 216, 835, 254]
		  ShowName		  off
		  Inputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [140, 165, 160, 185]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  Position		  [655, 215, 685, 245]
		  Criteria		  "u2 ~= 0"
		  Threshold		  "0.5"
		  InputSameDT		  off
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  TransferFcn
		  Name			  "Transfer Fcn"
		  Position		  [740, 167, 800, 203]
		  Denominator		  "[1 1]"
		}
		Block {
		  BlockType		  TransferFcn
		  Name			  "Transfer Fcn1"
		  Position		  [740, 217, 800, 253]
		  Denominator		  "[1 1]"
		}
		Block {
		  BlockType		  TransferFcn
		  Name			  "Transfer Fcn2"
		  Position		  [740, 267, 800, 303]
		  Denominator		  "[1 1]"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Trigger"
		  Ports			  [2, 1]
		  Position		  [355, 198, 435, 262]
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  System {
		    Name		    "Trigger"
		    Location		    [277, 113, 999, 642]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "A4"
		    PaperUnits		    "centimeters"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "B_unit(s)"
		    Position		    [15, 53, 45, 67]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    PortDimensions	    "3"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "h_err"
		    Position		    [15, 123, 45, 137]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Dot Product2"
		    Ports		    [2, 1]
		    Position		    [245, 42, 275, 73]
		    ShowName		    off
		    SourceBlock		    "simulink/Math\nOperations/Dot Pro"
"duct"
		    SourceType		    "Dot Product"
		    InputSameDT		    "on"
		    OutputDataTypeScalingMode "Inherit via internal rule"
		    OutDataType		    "sfix(16)"
		    OutScaling		    "2^-10"
		    LockScale		    "off"
		    RndMeth		    "Floor"
		    DoSatur		    "off"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Dot Product3"
		    Ports		    [2, 1]
		    Position		    [135, 122, 165, 153]
		    ShowName		    off
		    SourceBlock		    "simulink/Math\nOperations/Dot Pro"
"duct"
		    SourceType		    "Dot Product"
		    InputSameDT		    "on"
		    OutputDataTypeScalingMode "Inherit via internal rule"
		    OutDataType		    "sfix(16)"
		    OutScaling		    "2^-10"
		    LockScale		    "off"
		    RndMeth		    "Floor"
		    DoSatur		    "off"
		    }
		    Block {
		    BlockType		    Math
		    Name		    "Math\nFunction1"
		    Ports		    [1, 1]
		    Position		    [180, 125, 210, 155]
		    ShowName		    off
		    Operator		    "sqrt"
		    }
		    Block {
		    BlockType		    Math
		    Name		    "Math\nFunction3"
		    Ports		    [1, 1]
		    Position		    [290, 45, 320, 75]
		    ShowName		    off
		    Operator		    "sqrt"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Relay"
		    Ports		    [3, 1]
		    Position		    [560, 174, 675, 246]
		    TreatAsAtomicUnit	    off
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    System {
		    Name		    "Relay"
		    Location		    [230, 83, 1019, 698]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "A4"
		    PaperUnits		    "centimeters"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "||Herr x B_unit||"
		    Position		    [80, 25, 110, 40]
		    Orientation		    "down"
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "upper limet"
		    Position		    [40, 68, 70, 82]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "lower limet"
		    Position		    [35, 158, 65, 172]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "Logical\nOperator1"
		    Ports		    [2, 1]
		    Position		    [260, 130, 290, 165]
		    AllPortsSameDT	    off
		    OutDataTypeMode	    "Boolean"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "Logical\nOperator2"
		    Ports		    [2, 1]
		    Position		    [325, 85, 355, 120]
		    Operator		    "OR"
		    AllPortsSameDT	    off
		    OutDataTypeMode	    "Boolean"
		    }
		    Block {
		    BlockType		    Logic
		    Name		    "Logical\nOperator3"
		    Ports		    [2, 1]
		    Position		    [225, 60, 255, 95]
		    AllPortsSameDT	    off
		    OutDataTypeMode	    "Boolean"
		    }
		    Block {
		    BlockType		    Memory
		    Name		    "Memory"
		    Position		    [305, 190, 335, 220]
		    Orientation		    "left"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator"
		    Position		    [125, 52, 155, 83]
		    Operator		    ">"
		    InputSameDT		    off
		    LogicOutDataTypeMode    "Boolean"
		    LogicDataType	    "1"
		    }
		    Block {
		    BlockType		    RelationalOperator
		    Name		    "Relational\nOperator1"
		    Position		    [135, 122, 165, 153]
		    Operator		    ">"
		    InputSameDT		    off
		    LogicOutDataTypeMode    "Boolean"
		    LogicDataType	    "1"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Switch"
		    Position		    [410, 98, 440, 112]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "||Herr x B_unit||"
		    SrcPort		    1
		    Points		    [0, 15]
		    Branch {
		    DstBlock		    "Relational\nOperator"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 70]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator1"
		    SrcPort		    1
		    Points		    [30, 0]
		    Branch {
		    DstBlock		    "Logical\nOperator1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -55]
		    DstBlock		    "Logical\nOperator3"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Logical\nOperator1"
		    SrcPort		    1
		    Points		    [5, 0; 0, -40]
		    DstBlock		    "Logical\nOperator2"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Logical\nOperator2"
		    SrcPort		    1
		    Points		    [0, 0; 30, 0]
		    Branch {
		    Points		    [0, 100]
		    DstBlock		    "Memory"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Switch"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Memory"
		    SrcPort		    1
		    Points		    [-55, 0]
		    DstBlock		    "Logical\nOperator1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "upper limet"
		    SrcPort		    1
		    DstBlock		    "Relational\nOperator"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "lower limet"
		    SrcPort		    1
		    Points		    [50, 0]
		    DstBlock		    "Relational\nOperator1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Relational\nOperator"
		    SrcPort		    1
		    DstBlock		    "Logical\nOperator3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Logical\nOperator3"
		    SrcPort		    1
		    Points		    [25, 0; 0, 15]
		    DstBlock		    "Logical\nOperator2"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Saturate
		    Name		    "Saturation"
		    Position		    [490, 195, 520, 225]
		    UpperLimit		    "inf"
		    LowerLimit		    "2*sin(deg2rad(2))*h_bias"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    Ports		    [2, 1]
		    Position		    [425, 200, 445, 220]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "|+-"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "angular momentum bias1"
		    Position		    [300, 262, 375, 288]
		    ShowName		    off
		    Value		    "sin(deg2rad(2))*h_bias"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "angular momentum bias3"
		    Position		    [190, 228, 250, 252]
		    ShowName		    off
		    Value		    "2*5.48e-5"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "angular momentum bias4"
		    Position		    [150, 179, 220, 211]
		    ShowName		    off
		    Value		    "h_bias"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "cross_product"
		    Ports		    [2, 1]
		    Position		    [160, 30, 215, 70]
		    SourceBlock		    "components_lib/Math utilities/Vec"
"tor operations/cross_product_no_fnc"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "mag B div1"
		    Ports		    [2, 1]
		    Position		    [270, 117, 300, 148]
		    ShowName		    off
		    Inputs		    "*/"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    OutScaling		    "2^-10"
		    RndMeth		    "Floor"
		    SaturateOnIntegerOverflow off
		    Port {
		    PortNumber		    1
		    Name		    "sin(a)"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		    }
		    }
		    Block {
		    BlockType		    Product
		    Name		    "mg B div4"
		    Ports		    [2, 1]
		    Position		    [365, 162, 395, 193]
		    ShowName		    off
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    OutScaling		    "2^-10"
		    RndMeth		    "Floor"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "switch"
		    Position		    [695, 203, 725, 217]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "angular momentum bias3"
		    SrcPort		    1
		    Points		    [180, 0]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Relay"
		    SrcPort		    1
		    DstBlock		    "switch"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "angular momentum bias4"
		    SrcPort		    1
		    Points		    [125, 0]
		    DstBlock		    "mg B div4"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "mg B div4"
		    SrcPort		    1
		    Points		    [10, 0]
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Dot Product2"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "Math\nFunction3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Dot Product3"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "Math\nFunction1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Math\nFunction1"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "mag B div1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "Saturation"
		    DstPort		    1
		    }
		    Line {
		    Name		    "sin(a)"
		    Labels		    [0, 0]
		    SrcBlock		    "mag B div1"
		    SrcPort		    1
		    Points		    [45, 0]
		    DstBlock		    "mg B div4"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "h_err"
		    SrcPort		    1
		    Points		    [45, 0]
		    Branch {
		    Points		    [0, 0]
		    Branch {
		    DstBlock		    "Dot Product3"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 15]
		    DstBlock		    "Dot Product3"
		    DstPort		    2
		    }
		    }
		    Branch {
		    Points		    [0, -90]
		    DstBlock		    "cross_product"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "B_unit(s)"
		    SrcPort		    1
		    DstBlock		    "cross_product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "cross_product"
		    SrcPort		    1
		    Points		    [0, 0; 5, 0]
		    Branch {
		    DstBlock		    "Dot Product2"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 15]
		    DstBlock		    "Dot Product2"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Math\nFunction3"
		    SrcPort		    1
		    Points		    [0, 0; 0, 5]
		    Branch {
		    Points		    [0, 40; -70, 0]
		    DstBlock		    "mag B div1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [190, 0; 0, 120]
		    DstBlock		    "Relay"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "angular momentum bias1"
		    SrcPort		    1
		    Points		    [150, 0; 0, -40]
		    DstBlock		    "Relay"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Saturation"
		    SrcPort		    1
		    DstBlock		    "Relay"
		    DstPort		    2
		    }
		  }
		}
		Block {
		  BlockType		  Reference
		  Name			  "Vector rotation by q"
		  Ports			  [2, 1]
		  Position		  [140, 13, 220, 57]
		  SourceBlock		  "components_lib/Math utilities/Quate"
"rnion operations/Vector rotation by q"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Constant
		  Name			  "angular momentum bias"
		  Position		  [35, 209, 105, 241]
		  Value			  "h_bias*ones(1,3)"
		}
		Block {
		  BlockType		  Reference
		  Name			  "cross_product"
		  Ports			  [2, 1]
		  Position		  [270, 125, 325, 165]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/cross_product_no_fnc"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "m_mt to v_mt conversion"
		  Ports			  [2, 1]
		  Position		  [545, 140, 615, 200]
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  MaskPromptString	  "Coil winding number [n_x n_y n_z]|C"
"oil area [A_mt_x A_mt_y A_mt_z] |Coil inductance [L_mt_x L_mt_y L_mt_z]|Maxim"
"um voltage"
		  MaskStyleString	  "edit,edit,edit,edit"
		  MaskTunableValueString  "on,on,on,on"
		  MaskCallbackString	  "|||"
		  MaskEnableString	  "on,on,on,on"
		  MaskVisibilityString	  "on,on,on,on"
		  MaskToolTipString	  "on,on,on,on"
		  MaskVarAliasString	  ",,,"
		  MaskVariables		  "n_mt=@1;A_mt=@2;L_mt=@3;v_max_mt=@4"
";"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "[435 435 865]|[0.21*0.07 0.21*0.07 "
"0.07*0.07]|[26.956e-3 26.956e-3 59.256e-3]|5"
		  MaskTabNameString	  ",,,"
		  System {
		    Name		    "m_mt to v_mt conversion"
		    Location		    [219, 75, 1017, 690]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "A4"
		    PaperUnits		    "centimeters"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "m_mt"
		    Position		    [20, 178, 50, 192]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "T_meas"
		    Position		    [45, 228, 75, 242]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Demux
		    Name		    "Demux"
		    Ports		    [1, 3]
		    Position		    [80, 166, 85, 204]
		    BackgroundColor	    "black"
		    ShowName		    off
		    Outputs		    "3"
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain"
		    Position		    [205, 65, 235, 95]
		    Gain		    "1/(n_mt(1)*A_mt(1))"
		    ParameterDataTypeMode   "Inherit via internal rule"
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain1"
		    Position		    [205, 170, 235, 200]
		    Gain		    "1/(n_mt(2)*A_mt(2))"
		    ParameterDataTypeMode   "Inherit via internal rule"
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain2"
		    Position		    [205, 285, 235, 315]
		    Gain		    "1/(n_mt(3)*A_mt(3))"
		    ParameterDataTypeMode   "Inherit via internal rule"
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [3, 1]
		    Position		    [465, 176, 470, 214]
		    ShowName		    off
		    Inputs		    "3"
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Resistance for mt on x-axis"
		    Ports		    [1, 1]
		    Position		    [185, 115, 245, 145]
		    TreatAsAtomicUnit	    off
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    MaskPromptString	    "Wire cross sectional area|Wire re"
"sistivity|Wire resistivity temp. coef.|Wire resistivity base temp."
		    MaskStyleString	    "edit,edit,edit,edit"
		    MaskTunableValueString  "on,on,on,on"
		    MaskCallbackString	    "|||"
		    MaskEnableString	    "on,on,on,on"
		    MaskVisibilityString    "on,on,on,on"
		    MaskToolTipString	    "on,on,on,on"
		    MaskVarAliasString	    ",,,"
		    MaskVariables	    "A_wire_mt=@1;sigma_0_mt=@2;alpha_"
"0_mt=@3;T_0_mt=@4;"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "(pi/4)*0.0002^2|1.7e-8|3.9e-3|293"
		    MaskTabNameString	    ",,,"
		    System {
		    Name		    "Resistance for mt on x-axis"
		    Location		    [285, 76, 995, 273]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "A4"
		    PaperUnits		    "centimeters"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "T"
		    Position		    [30, 28, 60, 42]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Prodct5"
		    Ports		    [2, 1]
		    Position		    [600, 57, 630, 88]
		    ShowName		    off
		    Inputs		    "*/"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product1"
		    Ports		    [3, 1]
		    Position		    [270, 29, 300, 71]
		    ShowName		    off
		    Inputs		    "3"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product3"
		    Ports		    [3, 1]
		    Position		    [475, 42, 505, 88]
		    ShowName		    off
		    Inputs		    "3"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Resistivity"
		    Position		    [135, 119, 205, 151]
		    Value		    "sigma_0_mt"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Resistivity\nbase temperature"
		    Position		    [25, 69, 80, 101]
		    Value		    "T_0_mt"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Resistivity temperature\ncoeffici"
"ent"
		    Position		    [135, 48, 205, 82]
		    Value		    "alpha_0_mt"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    Ports		    [2, 1]
		    Position		    [85, 25, 105, 45]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "|+-"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum2"
		    Ports		    [2, 1]
		    Position		    [345, 40, 365, 60]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "|++"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Windings1"
		    Position		    [380, 139, 420, 171]
		    Value		    "n_mt(1)"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Wire cross\nsectional area"
		    Position		    [515, 110, 570, 140]
		    Value		    "A_wire_mt"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "wire \ncircumference"
		    Position		    [370, 65, 445, 105]
		    Value		    "4*sqrt(A_mt(1))"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "R(T)"
		    Position		    [655, 68, 685, 82]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Resistivity\nbase temperature"
		    SrcPort		    1
		    Points		    [10, 0]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Resistivity temperature\ncoeffici"
"ent"
		    SrcPort		    1
		    Points		    [20, 0; 0, -15]
		    DstBlock		    "Product1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "Product1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Resistivity"
		    SrcPort		    1
		    Points		    [0, 0; 35, 0]
		    Branch {
		    Points		    [0, -70]
		    DstBlock		    "Product1"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [110, 0]
		    DstBlock		    "Sum2"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Product1"
		    SrcPort		    1
		    DstBlock		    "Sum2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum2"
		    SrcPort		    1
		    DstBlock		    "Product3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "wire \ncircumference"
		    SrcPort		    1
		    Points		    [0, -20]
		    DstBlock		    "Product3"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Windings1"
		    SrcPort		    1
		    Points		    [35, 0]
		    DstBlock		    "Product3"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Product3"
		    SrcPort		    1
		    DstBlock		    "Prodct5"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Wire cross\nsectional area"
		    SrcPort		    1
		    Points		    [5, 0; 0, -45]
		    DstBlock		    "Prodct5"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "T"
		    SrcPort		    1
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Prodct5"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "R(T)"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Resistance for mt on y-axis"
		    Ports		    [1, 1]
		    Position		    [185, 222, 245, 248]
		    TreatAsAtomicUnit	    off
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    MaskPromptString	    "Wire cross sectional area|Wire re"
"sistivity|Wire resistivity temp. coef.|Wire resistivity base temp."
		    MaskStyleString	    "edit,edit,edit,edit"
		    MaskTunableValueString  "on,on,on,on"
		    MaskCallbackString	    "|||"
		    MaskEnableString	    "on,on,on,on"
		    MaskVisibilityString    "on,on,on,on"
		    MaskToolTipString	    "on,on,on,on"
		    MaskVarAliasString	    ",,,"
		    MaskVariables	    "A_wire_mt=@1;sigma_0_mt=@2;alpha_"
"0_mt=@3;T_0_mt=@4;"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "(pi/4)*0.0002^2|1.7e-8|3.9e-3|293"
		    MaskTabNameString	    ",,,"
		    System {
		    Name		    "Resistance for mt on y-axis"
		    Location		    [285, 76, 995, 273]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "A4"
		    PaperUnits		    "centimeters"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "T"
		    Position		    [30, 28, 60, 42]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Prodct5"
		    Ports		    [2, 1]
		    Position		    [600, 57, 630, 88]
		    ShowName		    off
		    Inputs		    "*/"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product1"
		    Ports		    [3, 1]
		    Position		    [270, 29, 300, 71]
		    ShowName		    off
		    Inputs		    "3"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product3"
		    Ports		    [3, 1]
		    Position		    [475, 42, 505, 88]
		    ShowName		    off
		    Inputs		    "3"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Resistivity"
		    Position		    [135, 119, 205, 151]
		    Value		    "sigma_0_mt"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Resistivity\nbase temperature"
		    Position		    [25, 69, 80, 101]
		    Value		    "T_0_mt"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Resistivity temperature\ncoeffici"
"ent"
		    Position		    [135, 48, 205, 82]
		    Value		    "alpha_0_mt"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    Ports		    [2, 1]
		    Position		    [85, 25, 105, 45]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "|+-"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum2"
		    Ports		    [2, 1]
		    Position		    [345, 40, 365, 60]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "|++"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Windings1"
		    Position		    [380, 139, 420, 171]
		    Value		    "n_mt(2)"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Wire cross\nsectional area"
		    Position		    [515, 110, 570, 140]
		    Value		    "A_wire_mt"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "wire \ncircumference"
		    Position		    [370, 66, 445, 104]
		    Value		    "4*sqrt(A_mt(2))"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "R(T)"
		    Position		    [655, 68, 685, 82]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Prodct5"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "R(T)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "T"
		    SrcPort		    1
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Wire cross\nsectional area"
		    SrcPort		    1
		    Points		    [5, 0; 0, -45]
		    DstBlock		    "Prodct5"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Product3"
		    SrcPort		    1
		    DstBlock		    "Prodct5"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Windings1"
		    SrcPort		    1
		    Points		    [35, 0]
		    DstBlock		    "Product3"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "wire \ncircumference"
		    SrcPort		    1
		    Points		    [0, -20]
		    DstBlock		    "Product3"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum2"
		    SrcPort		    1
		    DstBlock		    "Product3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product1"
		    SrcPort		    1
		    DstBlock		    "Sum2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Resistivity"
		    SrcPort		    1
		    Points		    [0, 0; 35, 0]
		    Branch {
		    Points		    [110, 0]
		    DstBlock		    "Sum2"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, -70]
		    DstBlock		    "Product1"
		    DstPort		    3
		    }
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "Product1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Resistivity temperature\ncoeffici"
"ent"
		    SrcPort		    1
		    Points		    [20, 0; 0, -15]
		    DstBlock		    "Product1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Resistivity\nbase temperature"
		    SrcPort		    1
		    Points		    [10, 0]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Resistance for mt on z-axis"
		    Ports		    [1, 1]
		    Position		    [185, 343, 245, 367]
		    TreatAsAtomicUnit	    off
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    MaskPromptString	    "Wire cross sectional area|Wire re"
"sistivity|Wire resistivity temp. coef.|Wire resistivity base temp."
		    MaskStyleString	    "edit,edit,edit,edit"
		    MaskTunableValueString  "on,on,on,on"
		    MaskCallbackString	    "|||"
		    MaskEnableString	    "on,on,on,on"
		    MaskVisibilityString    "on,on,on,on"
		    MaskToolTipString	    "on,on,on,on"
		    MaskVarAliasString	    ",,,"
		    MaskVariables	    "A_wire_mt=@1;sigma_0_mt=@2;alpha_"
"0_mt=@3;T_0_mt=@4;"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "(pi/4)*0.0002^2|1.7e-8|3.9e-3|293"
		    MaskTabNameString	    ",,,"
		    System {
		    Name		    "Resistance for mt on z-axis"
		    Location		    [285, 76, 995, 273]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "A4"
		    PaperUnits		    "centimeters"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "T"
		    Position		    [30, 28, 60, 42]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Prodct5"
		    Ports		    [2, 1]
		    Position		    [600, 57, 630, 88]
		    ShowName		    off
		    Inputs		    "*/"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product1"
		    Ports		    [3, 1]
		    Position		    [270, 29, 300, 71]
		    ShowName		    off
		    Inputs		    "3"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product3"
		    Ports		    [3, 1]
		    Position		    [475, 42, 505, 88]
		    ShowName		    off
		    Inputs		    "3"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Resistivity"
		    Position		    [135, 119, 205, 151]
		    Value		    "sigma_0_mt"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Resistivity\nbase temperature"
		    Position		    [25, 69, 80, 101]
		    Value		    "T_0_mt"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Resistivity temperature\ncoeffici"
"ent"
		    Position		    [135, 48, 205, 82]
		    Value		    "alpha_0_mt"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum1"
		    Ports		    [2, 1]
		    Position		    [85, 25, 105, 45]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "|+-"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum2"
		    Ports		    [2, 1]
		    Position		    [345, 40, 365, 60]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "|++"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Windings1"
		    Position		    [380, 139, 420, 171]
		    Value		    "n_mt(3)"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Wire cross\nsectional area"
		    Position		    [515, 110, 570, 140]
		    Value		    "A_wire_mt"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "wire \ncircumference"
		    Position		    [370, 66, 445, 104]
		    Value		    "4*sqrt(A_mt(3))"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "R(T)"
		    Position		    [655, 68, 685, 82]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Resistivity\nbase temperature"
		    SrcPort		    1
		    Points		    [10, 0]
		    DstBlock		    "Sum1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Resistivity temperature\ncoeffici"
"ent"
		    SrcPort		    1
		    Points		    [20, 0; 0, -15]
		    DstBlock		    "Product1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum1"
		    SrcPort		    1
		    DstBlock		    "Product1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Resistivity"
		    SrcPort		    1
		    Points		    [0, 0; 35, 0]
		    Branch {
		    Points		    [0, -70]
		    DstBlock		    "Product1"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [110, 0]
		    DstBlock		    "Sum2"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Product1"
		    SrcPort		    1
		    DstBlock		    "Sum2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum2"
		    SrcPort		    1
		    DstBlock		    "Product3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "wire \ncircumference"
		    SrcPort		    1
		    Points		    [0, -20]
		    DstBlock		    "Product3"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Windings1"
		    SrcPort		    1
		    Points		    [35, 0]
		    DstBlock		    "Product3"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Product3"
		    SrcPort		    1
		    DstBlock		    "Prodct5"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Wire cross\nsectional area"
		    SrcPort		    1
		    Points		    [5, 0; 0, -45]
		    DstBlock		    "Prodct5"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "T"
		    SrcPort		    1
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Prodct5"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "R(T)"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "electromechanis\ntransfer funtion"
" for mt_x"
		    Ports		    [2, 1]
		    Position		    [290, 69, 355, 111]
		    TreatAsAtomicUnit	    off
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    System {
		    Name		    "electromechanis\ntransfer funtion"
" for mt_x"
		    Location		    [230, 75, 1017, 690]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "A4"
		    PaperUnits		    "centimeters"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "i_mt"
		    Position		    [25, 118, 55, 132]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "R(T)"
		    Position		    [25, 183, 55, 197]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Derivative
		    Name		    "Derivative"
		    Position		    [95, 110, 125, 140]
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain"
		    Position		    [160, 110, 190, 140]
		    Gain		    "L_mt(1)"
		    ParameterDataTypeMode   "Inherit via internal rule"
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product1"
		    Ports		    [2, 1]
		    Position		    [100, 167, 130, 198]
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Scope
		    Name		    "Scope"
		    Ports		    [3]
		    Position		    [330, 53, 360, 87]
		    Location		    [582, 194, 906, 613]
		    Open		    off
		    NumInputPorts	    "3"
		    List {
		    ListType		    AxesTitles
		    axes1		    "%<SignalLabel>"
		    axes2		    "%<SignalLabel>"
		    axes3		    "%<SignalLabel>"
		    }
		    YMin		    "-5~-5~-5"
		    YMax		    "5~5~5"
		    SaveName		    "ScopeData9"
		    DataFormat		    "StructureWithTime"
		    LimitDataPoints	    off
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    Ports		    [2, 1]
		    Position		    [260, 175, 280, 195]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "++|"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "v_mt"
		    Position		    [315, 178, 345, 192]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Derivative"
		    SrcPort		    1
		    Points		    [0, 0; 10, 0]
		    Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -65]
		    DstBlock		    "Scope"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [0, 0; 10, 0]
		    Branch {
		    DstBlock		    "v_mt"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -105]
		    DstBlock		    "Scope"
		    DstPort		    3
		    }
		    }
		    Line {
		    SrcBlock		    "i_mt"
		    SrcPort		    1
		    Points		    [0, 0; 10, 0]
		    Branch {
		    DstBlock		    "Derivative"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 50]
		    DstBlock		    "Product1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "R(T)"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Product1"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, -120]
		    DstBlock		    "Scope"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Product1"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Gain"
		    SrcPort		    1
		    Points		    [75, 0]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "electromechanis\ntransfer funtion"
" for mt_y\n"
		    Ports		    [2, 1]
		    Position		    [295, 174, 360, 216]
		    TreatAsAtomicUnit	    off
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    System {
		    Name		    "electromechanis\ntransfer funtion"
" for mt_y\n"
		    Location		    [225, 74, 1022, 722]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "A4"
		    PaperUnits		    "centimeters"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "i_mt"
		    Position		    [25, 118, 55, 132]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "R(T)"
		    Position		    [25, 183, 55, 197]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Derivative
		    Name		    "Derivative"
		    Position		    [95, 110, 125, 140]
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain"
		    Position		    [160, 110, 190, 140]
		    Gain		    "L_mt(2)"
		    ParameterDataTypeMode   "Inherit via internal rule"
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product1"
		    Ports		    [2, 1]
		    Position		    [100, 167, 130, 198]
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    Ports		    [2, 1]
		    Position		    [260, 175, 280, 195]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "++|"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "v_mt"
		    Position		    [315, 178, 345, 192]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Gain"
		    SrcPort		    1
		    Points		    [75, 0]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product1"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "R(T)"
		    SrcPort		    1
		    DstBlock		    "Product1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "i_mt"
		    SrcPort		    1
		    Points		    [0, 0; 10, 0]
		    Branch {
		    Points		    [0, 50]
		    DstBlock		    "Product1"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Derivative"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "v_mt"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Derivative"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "Gain"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "electromechanis\ntransfer funtion"
" for mt_z\n"
		    Ports		    [2, 1]
		    Position		    [295, 289, 360, 331]
		    TreatAsAtomicUnit	    off
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    System {
		    Name		    "electromechanis\ntransfer funtion"
" for mt_z\n"
		    Location		    [225, 74, 1022, 722]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "A4"
		    PaperUnits		    "centimeters"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "i_mt"
		    Position		    [25, 118, 55, 132]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "R(T)"
		    Position		    [25, 183, 55, 197]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Derivative
		    Name		    "Derivative"
		    Position		    [95, 110, 125, 140]
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain"
		    Position		    [160, 110, 190, 140]
		    Gain		    "L_mt(3)"
		    ParameterDataTypeMode   "Inherit via internal rule"
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product1"
		    Ports		    [2, 1]
		    Position		    [100, 167, 130, 198]
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    Ports		    [2, 1]
		    Position		    [260, 175, 280, 195]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "++|"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "v_mt"
		    Position		    [315, 178, 345, 192]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Derivative"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "Gain"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "v_mt"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "i_mt"
		    SrcPort		    1
		    Points		    [0, 0; 10, 0]
		    Branch {
		    DstBlock		    "Derivative"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 50]
		    DstBlock		    "Product1"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "R(T)"
		    SrcPort		    1
		    DstBlock		    "Product1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Product1"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Gain"
		    SrcPort		    1
		    Points		    [75, 0]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Scope
		    Name		    "i_mt"
		    Ports		    [3]
		    Position		    [295, 19, 325, 51]
		    Location		    [69, 164, 469, 630]
		    Open		    off
		    NumInputPorts	    "3"
		    List {
		    ListType		    AxesTitles
		    axes1		    "%<SignalLabel>"
		    axes2		    "%<SignalLabel>"
		    axes3		    "%<SignalLabel>"
		    }
		    YMin		    "-5~-5~-5"
		    YMax		    "5~5~5"
		    SaveName		    "ScopeData8"
		    DataFormat		    "StructureWithTime"
		    LimitDataPoints	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "v_mt"
		    Position		    [535, 188, 565, 202]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    3
		    Points		    [25, 0; 0, 105]
		    DstBlock		    "Gain2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    2
		    Points		    [0, 0]
		    DstBlock		    "Gain1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    1
		    Points		    [25, 0; 0, -95]
		    DstBlock		    "Gain"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Gain"
		    SrcPort		    1
		    Points		    [0, 0]
		    Branch {
		    DstBlock		    "electromechanis\ntransfer funtion"
" for mt_x"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -55]
		    DstBlock		    "i_mt"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Gain1"
		    SrcPort		    1
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "electromechanis\ntransfer funtion"
" for mt_y\n"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -150]
		    DstBlock		    "i_mt"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Gain2"
		    SrcPort		    1
		    Points		    [30, 0]
		    Branch {
		    DstBlock		    "electromechanis\ntransfer funtion"
" for mt_z\n"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -255]
		    DstBlock		    "i_mt"
		    DstPort		    3
		    }
		    }
		    Line {
		    SrcBlock		    "m_mt"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "Demux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "electromechanis\ntransfer funtion"
" for mt_y\n"
		    SrcPort		    1
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "electromechanis\ntransfer funtion"
" for mt_z\n"
		    SrcPort		    1
		    Points		    [85, 0]
		    DstBlock		    "Mux"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Resistance for mt on x-axis"
		    SrcPort		    1
		    Points		    [10, 0; 0, -30]
		    DstBlock		    "electromechanis\ntransfer funtion"
" for mt_x"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Resistance for mt on y-axis"
		    SrcPort		    1
		    Points		    [15, 0; 0, -30]
		    DstBlock		    "electromechanis\ntransfer funtion"
" for mt_y\n"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Resistance for mt on z-axis"
		    SrcPort		    1
		    Points		    [10, 0; 0, -35]
		    DstBlock		    "electromechanis\ntransfer funtion"
" for mt_z\n"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "T_meas"
		    SrcPort		    1
		    Points		    [60, 0]
		    Branch {
		    DstBlock		    "Resistance for mt on y-axis"
		    DstPort		    1
		    }
		    Branch {
		    Labels		    [1, 0]
		    Points		    [0, -105]
		    DstBlock		    "Resistance for mt on x-axis"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 120]
		    DstBlock		    "Resistance for mt on z-axis"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "electromechanis\ntransfer funtion"
" for mt_x"
		    SrcPort		    1
		    Points		    [90, 0]
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "v_mt"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Product
		  Name			  "mag B div"
		  Ports			  [2, 1]
		  Position		  [400, 137, 430, 168]
		  Inputs		  "*/"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  OutScaling		  "2^-10"
		  RndMeth		  "Floor"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Reference
		  Name			  "to unit vector"
		  Ports			  [1, 1]
		  Position		  [155, 94, 195, 136]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Outport
		  Name			  "v_mt"
		  Position		  [865, 228, 895, 242]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "desat_on_off"
		  Position		  [515, 258, 545, 272]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "H_mw"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "angular momentum bias"
		  SrcPort		  1
		  Points		  [40, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From4"
		  SrcPort		  1
		  Points		  [0, -15]
		  DstBlock		  "Vector rotation by q"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From5"
		  SrcPort		  1
		  DstBlock		  "Vector rotation by q"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [85, 0]
		    DstBlock		    "cross_product"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 70]
		    DstBlock		    "Trigger"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "cross_product"
		  SrcPort		  1
		  DstBlock		  "mag B div"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Ground"
		  SrcPort		  1
		  Points		  [-10, 0; 0, -50]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "T_meas"
		  SrcPort		  1
		  Points		  [0, -15]
		  DstBlock		  "m_mt to v_mt conversion"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "mag B div"
		  SrcPort		  1
		  DstBlock		  "Gain"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "m_mt to v_mt conversion"
		  SrcPort		  1
		  Points		  [20, 0]
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Dot Product1"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Math\nFunction2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Math\nFunction2"
		  SrcPort		  1
		  Points		  [25, 0]
		  DstBlock		  "mag B div"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "m_mt to v_mt conversion"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "Demux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  1
		  Points		  [5, 0; 0, -35]
		  DstBlock		  "Transfer Fcn"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  2
		  Points		  [5, 0; 0, 5]
		  DstBlock		  "Transfer Fcn1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  3
		  Points		  [0, 45]
		  DstBlock		  "Transfer Fcn2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Transfer Fcn"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Mux1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Transfer Fcn1"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Transfer Fcn2"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Mux1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Mux1"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "v_mt"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Vector rotation by q"
		  SrcPort		  1
		  Points		  [15, 0; 0, 45]
		  Branch {
		    Points		    [0, 15]
		    DstBlock		    "Dot Product1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 0]
		    Branch {
		    DstBlock		    "Dot Product1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [-100, 0]
		    DstBlock		    "to unit vector"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "to unit vector"
		  SrcPort		  1
		  Points		  [15, 0; 0, 40]
		  Branch {
		    DstBlock		    "cross_product"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 60]
		    DstBlock		    "Trigger"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Trigger"
		  SrcPort		  1
		  Points		  [55, 0]
		  Branch {
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 35]
		    DstBlock		    "desat_on_off"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Detumble controller"
	      Ports		      [2, 1]
	      Position		      [55, 19, 155, 61]
	      Orientation	      "left"
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      MaskPromptString	      "B-dot continous gain|B-dot filter cut-o"
"ff frequency|B-dot discrete gain|Controller"
	      MaskStyleString	      "edit,edit,edit,popup(none|Continous|Dis"
"crete)"
	      MaskTunableValueString  "on,on,on,on"
	      MaskCallbackString      "|||"
	      MaskEnableString	      "on,on,on,on"
	      MaskVisibilityString    "on,on,on,on"
	      MaskToolTipString	      "on,on,on,on"
	      MaskVarAliasString      ",,,"
	      MaskVariables	      "C_cont=@1;w_c=@2;C_disc=@3;ctrl=@4;"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "11000|0.7|1500|none"
	      MaskTabNameString	      ",,,"
	      System {
		Name			"Detumble controller"
		Location		[397, 100, 1288, 751]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "q(I->S)"
		  Position		  [60, 278, 90, 292]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "B(I)"
		  Position		  [60, 318, 90, 332]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [50, 65, 80, 95]
		  Value			  "ctrl"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Continous B-dot controller"
		  Ports			  [1, 1]
		  Position		  [320, 194, 420, 236]
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  System {
		    Name		    "Continous B-dot controller"
		    Location		    [352, 162, 850, 462]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "B(S)"
		    Position		    [60, 98, 90, 112]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain"
		    Position		    [210, 90, 240, 120]
		    Gain		    "w_c"
		    ParameterDataTypeMode   "Inherit via internal rule"
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain1"
		    Position		    [320, 90, 350, 120]
		    Gain		    "-C_cont"
		    ParameterDataTypeMode   "Inherit via internal rule"
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Integrator
		    Name		    "Integrator"
		    Ports		    [1, 1]
		    Position		    [210, 175, 240, 205]
		    Orientation		    "left"
		    NamePlacement	    "alternate"
		    IgnoreLimit		    off
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    Ports		    [2, 1]
		    Position		    [140, 95, 160, 115]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "|+-"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "m_mt(S)"
		    Position		    [405, 98, 435, 112]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "B(S)"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    DstBlock		    "Gain"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Gain"
		    SrcPort		    1
		    Points		    [0, 0; 40, 0]
		    Branch {
		    DstBlock		    "Gain1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 85]
		    DstBlock		    "Integrator"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Integrator"
		    SrcPort		    1
		    Points		    [-55, 0]
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Gain1"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "m_mt(S)"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Discrete B-dot controller"
		  Ports			  [1, 1]
		  Position		  [320, 284, 420, 326]
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  System {
		    Name		    "Discrete B-dot controller"
		    Location		    [169, 135, 923, 581]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "B(S)"
		    Position		    [15, 238, 45, 252]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Clock
		    Name		    "Clock"
		    Position		    [25, 25, 45, 45]
		    Decimation		    "1"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Discrete B-dot filter"
		    Ports		    [1, 1]
		    Position		    [215, 224, 315, 266]
		    SourceBlock		    "discrete_bdot_filter/Discrete B-d"
"ot filter"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain1"
		    Position		    [385, 230, 415, 260]
		    Gain		    "-C_disc"
		    ParameterDataTypeMode   "Inherit via internal rule"
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    If
		    Name		    "If"
		    Ports		    [1, 2]
		    Position		    [185, 15, 260, 55]
		    IfExpression	    "u1 > 2"
		    }
		    Block {
		    BlockType		    If
		    Name		    "If1"
		    Ports		    [1, 2]
		    Position		    [185, 75, 260, 115]
		    IfExpression	    "u1 < 4"
		    }
		    Block {
		    BlockType		    If
		    Name		    "If2"
		    Ports		    [1, 2]
		    Position		    [185, 130, 260, 170]
		    IfExpression	    "u1 < 2"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Subsystem1"
		    Ports		    [1, 1, 0, 0, 0, 0, 0, 1]
		    Position		    [90, 222, 140, 268]
		    AncestorBlock	    "attitude_control_lib/Attitude Con"
"trol/B-dot controller disc/Subsystem2"
		    TreatAsAtomicUnit	    off
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    System {
		    Name		    "Subsystem1"
		    Location		    [750, 670, 1248, 970]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [110, 103, 140, 117]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    ActionPort
		    Name		    "Action Port"
		    Position		    [165, 30, 224, 58]
		    InitializeStates	    "reset"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    Position		    [360, 103, 390, 117]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "[0 0 0]"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Subsystem2"
		    Ports		    [1, 1, 0, 0, 0, 0, 0, 1]
		    Position		    [560, 222, 610, 268]
		    AncestorBlock	    "attitude_control_lib/Attitude Con"
"trol/B-dot controller disc/Subsystem2"
		    TreatAsAtomicUnit	    off
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    System {
		    Name		    "Subsystem2"
		    Location		    [750, 670, 1248, 970]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [110, 103, 140, 117]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    ActionPort
		    Name		    "Action Port"
		    Position		    [165, 30, 224, 58]
		    InitializeStates	    "reset"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    Position		    [360, 103, 390, 117]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "[0 0 0]"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Subsystem3"
		    Ports		    [1, 1, 0, 0, 0, 0, 0, 1]
		    Position		    [465, 222, 515, 268]
		    AncestorBlock	    "attitude_control_lib/Attitude Con"
"trol/B-dot controller disc/Subsystem2"
		    TreatAsAtomicUnit	    off
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    System {
		    Name		    "Subsystem3"
		    Location		    [750, 670, 1248, 970]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [110, 103, 140, 117]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    ActionPort
		    Name		    "Action Port"
		    Position		    [165, 30, 224, 58]
		    InitializeStates	    "reset"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    Position		    [360, 103, 390, 117]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "[0 0 0]"
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    MATLABFcn
		    Name		    "mod 10"
		    Position		    [75, 20, 135, 50]
		    MATLABFcn		    "mod(u(1),4)"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "m_mt(s)"
		    Position		    [670, 238, 700, 252]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Discrete B-dot filter"
		    SrcPort		    1
		    DstBlock		    "Gain1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "If1"
		    SrcPort		    1
		    Points		    [225, 0]
		    DstBlock		    "Subsystem3"
		    DstPort		    ifaction
		    }
		    Line {
		    SrcBlock		    "Subsystem2"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "m_mt(s)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "B(S)"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "Subsystem1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Subsystem3"
		    SrcPort		    1
		    DstBlock		    "Subsystem2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Gain1"
		    SrcPort		    1
		    DstBlock		    "Subsystem3"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Subsystem1"
		    SrcPort		    1
		    DstBlock		    "Discrete B-dot filter"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Clock"
		    SrcPort		    1
		    DstBlock		    "mod 10"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "mod 10"
		    SrcPort		    1
		    Points		    [0, 0; 20, 0]
		    Branch {
		    Points		    [0, 60]
		    Branch {
		    Points		    [0, 55]
		    DstBlock		    "If2"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "If1"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "If"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "If2"
		    SrcPort		    1
		    Points		    [30, 0; 0, 55; -180, 0]
		    DstBlock		    "Subsystem1"
		    DstPort		    ifaction
		    }
		    Line {
		    SrcBlock		    "If"
		    SrcPort		    1
		    Points		    [320, 0]
		    DstBlock		    "Subsystem2"
		    DstPort		    ifaction
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Magnetic field I to S"
		  Ports			  [2, 1]
		  Position		  [140, 284, 240, 326]
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  System {
		    Name		    "Magnetic field I to S"
		    Location		    [59, 141, 665, 441]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "q(I->S)"
		    Position		    [105, 103, 135, 117]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "B(I)"
		    Position		    [105, 133, 135, 147]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gauss to Tesla"
		    Position		    [370, 105, 400, 135]
		    Gain		    "1e-4"
		    ParameterDataTypeMode   "Inherit via internal rule"
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Vector rotation by q1"
		    Ports		    [2, 1]
		    Position		    [240, 99, 340, 141]
		    SourceBlock		    "components_lib/Math utilities/Qua"
"ternion operations/Vector rotation by q"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "B(S)"
		    Position		    [440, 113, 470, 127]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "B(I)"
		    SrcPort		    1
		    Points		    [40, 0; 0, -10]
		    DstBlock		    "Vector rotation by q1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Gauss to Tesla"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "B(S)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Vector rotation by q1"
		    SrcPort		    1
		    DstBlock		    "Gauss to Tesla"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "q(I->S)"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "Vector rotation by q1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Merge
		  Name			  "Merge"
		  Ports			  [2, 1]
		  Position		  [610, 170, 650, 350]
		}
		Block {
		  BlockType		  SwitchCase
		  Name			  "Switch Case"
		  Ports			  [1, 2]
		  Position		  [135, 70, 235, 130]
		  CaseConditions	  "{2,3}"
		  CaseShowDefault	  off
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enable/disable continous controller"
		  Ports			  [1, 1, 0, 0, 0, 0, 0, 1]
		  Position		  [490, 197, 560, 233]
		  TreatAsAtomicUnit	  on
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  System {
		    Name		    "enable/disable continous controll"
"er"
		    Location		    [342, 471, 840, 771]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [75, 78, 105, 92]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    ActionPort
		    Name		    "Action Port"
		    Position		    [170, 15, 229, 43]
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    Position		    [325, 78, 355, 92]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "enable/disable discrete controller"
		  Ports			  [1, 1, 0, 0, 0, 0, 0, 1]
		  Position		  [490, 287, 560, 323]
		  TreatAsAtomicUnit	  on
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  System {
		    Name		    "enable/disable discrete controlle"
"r"
		    Location		    [342, 471, 840, 771]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "In1"
		    Position		    [75, 78, 105, 92]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    ActionPort
		    Name		    "Action Port"
		    Position		    [170, 15, 229, 43]
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Out1"
		    Position		    [325, 78, 355, 92]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "In1"
		    SrcPort		    1
		    DstBlock		    "Out1"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "m_mt(S)"
		  Position		  [695, 253, 725, 267]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Switch Case"
		  SrcPort		  1
		  Points		  [285, 0]
		  DstBlock		  "enable/disable continous controller"
		  DstPort		  ifaction
		}
		Line {
		  SrcBlock		  "enable/disable continous controller"
		  SrcPort		  1
		  DstBlock		  "Merge"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Continous B-dot controller"
		  SrcPort		  1
		  DstBlock		  "enable/disable continous controller"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "enable/disable discrete controller"
		  SrcPort		  1
		  DstBlock		  "Merge"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Discrete B-dot controller"
		  SrcPort		  1
		  DstBlock		  "enable/disable discrete controller"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Merge"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "m_mt(S)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch Case"
		  SrcPort		  2
		  Points		  [60, 0; 0, 154; 225, 0]
		  DstBlock		  "enable/disable discrete controller"
		  DstPort		  ifaction
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Switch Case"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Magnetic field I to S"
		  SrcPort		  1
		  Points		  [0, 0; 25, 0]
		  Branch {
		    Points		    [0, -90]
		    DstBlock		    "Continous B-dot controller"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Discrete B-dot controller"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "q(I->S)"
		  SrcPort		  1
		  Points		  [15, 0; 0, 10]
		  DstBlock		  "Magnetic field I to S"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "B(I)"
		  SrcPort		  1
		  Points		  [15, 0; 0, -10]
		  DstBlock		  "Magnetic field I to S"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Estimation of dist\nKalman filter"
	      Ports		      [2, 1]
	      Position		      [35, 348, 190, 412]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      MaskType		      "Estimator Block"
	      MaskDescription	      "The estimator in this block is to be co"
"nstructed using a state space system.\nThe estimator block has three input (t"
"he control torque, measured quaternion and measured angular velocity).\nThe d"
"esign of the estimator is developed in an m-file located in the design folder"
"\nThe different matrices for the state space system are named:\nA_kalman\nB_k"
"alman\nC_kalman\nD_kalman"
	      MaskPromptString	      "Estimator design file name (remember gn"
"yfs :-))"
	      MaskStyleString	      "edit"
	      MaskTunableValueString  "on"
	      MaskEnableString	      "on"
	      MaskVisibilityString    "on"
	      MaskToolTipString	      "on"
	      MaskVariables	      "ang_file_name=@1;"
	      MaskInitialization      "run(strcat('design/',ang_file_name))\n"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "'kalman_estimator.m'"
	      System {
		Name			"Estimation of dist\nKalman filter"
		Location		[10, 81, 794, 788]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "control_torque"
		  Position		  [25, 18, 55, 32]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "omega"
		  Position		  [25, 63, 55, 77]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [2, 1]
		  Position		  [220, 16, 225, 54]
		  ShowName		  off
		  Inputs		  "2"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  StateSpace
		  Name			  "State-Space"
		  Position		  [250, 18, 310, 52]
		  A			  "A_kalman"
		  B			  "B_kalman"
		  C			  "C_kalman"
		  D			  "D_kalman"
		}
		Block {
		  BlockType		  Outport
		  Name			  "estimated disturbance"
		  Position		  [470, 28, 500, 42]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "omega"
		  SrcPort		  1
		  Points		  [120, 0; 0, -25]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "State-Space"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "control_torque"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "State-Space"
		  SrcPort		  1
		  DstBlock		  "estimated disturbance"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Estimation of dist\nlinear filter"
	      Ports		      [2, 1]
	      Position		      [35, 248, 190, 312]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      MaskType		      "Estimator Block"
	      MaskDescription	      "The estimator in this block is to be co"
"nstructed using a state space system.\nThe estimator block has three input (t"
"he control torque, measured quaternion and measured angular velocity).\nThe d"
"esign of the estimator is developed in an m-file located in the design folder"
"\nThe different matrices for the state space system are named:\nA_est\nB_est"
"\nC_est\nD_est"
	      MaskPromptString	      "Estimator design file name (remember gn"
"yfs :-))"
	      MaskStyleString	      "edit"
	      MaskTunableValueString  "on"
	      MaskEnableString	      "on"
	      MaskVisibilityString    "on"
	      MaskToolTipString	      "on"
	      MaskVariables	      "ang_file_name=@1;"
	      MaskInitialization      "run(strcat('design/',ang_file_name))\n"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "'linear_estimator.m'"
	      System {
		Name			"Estimation of dist\nlinear filter"
		Location		[4, 56, 788, 763]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "control_torque"
		  Position		  [25, 18, 55, 32]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "omega"
		  Position		  [25, 63, 55, 77]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [2, 1]
		  Position		  [220, 16, 225, 54]
		  ShowName		  off
		  Inputs		  "2"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  StateSpace
		  Name			  "State-Space"
		  Position		  [250, 18, 310, 52]
		  A			  "A_est"
		  B			  "B_est"
		  C			  "C_est"
		  D			  "D_est"
		}
		Block {
		  BlockType		  Outport
		  Name			  "estimated disturbance"
		  Position		  [470, 28, 500, 42]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "State-Space"
		  SrcPort		  1
		  DstBlock		  "estimated disturbance"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "control_torque"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "State-Space"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "omega"
		  SrcPort		  1
		  Points		  [120, 0; 0, -25]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "LQ-Regulator"
	      Ports		      [2, 7]
	      Position		      [50, 97, 160, 213]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"LQ-Regulator"
		Location		[178, 198, 1546, 847]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "q_ref"
		  Position		  [235, 198, 265, 212]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "H_mw"
		  Position		  [660, 198, 690, 212]
		  Orientation		  "left"
		  NamePlacement		  "alternate"
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [605, 332, 715, 378]
		  Orientation		  "left"
		  NamePlacement		  "alternate"
		  Value			  "79.9597e-6"
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux"
		  Ports			  [1, 4]
		  Position		  [910, 83, 915, 167]
		  Orientation		  "left"
		  BackgroundColor	  "black"
		  NamePlacement		  "alternate"
		  ShowName		  off
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux1"
		  Ports			  [1, 3]
		  Position		  [340, 35, 345, 135]
		  Orientation		  "left"
		  BackgroundColor	  "black"
		  NamePlacement		  "alternate"
		  ShowName		  off
		  Outputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  DiscreteIntegrator
		  Name			  "Discrete-Time\nIntegrator"
		  Ports			  [1, 1]
		  Position		  [379, 325, 411, 360]
		  Orientation		  "up"
		  IntegratorMethod	  "Integration: Forward Euler"
		  ExternalReset		  "none"
		  InitialConditionSource  "internal"
		  SampleTime		  "Ts"
		  IgnoreLimit		  off
		  ICPrevOutput		  "DiscIntNeverNeededParam"
		  ICPrevScaledInput	  "DiscIntNeverNeededParam"
		}
		Block {
		  BlockType		  From
		  Name			  "From1"
		  Position		  [945, 119, 1035, 131]
		  Orientation		  "left"
		  NamePlacement		  "alternate"
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "q_I_S"
		}
		Block {
		  BlockType		  From
		  Name			  "From2"
		  Position		  [945, 169, 1035, 181]
		  Orientation		  "left"
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "Omega_S"
		}
		Block {
		  BlockType		  Gain
		  Name			  "G1"
		  Position		  [270, 73, 305, 97]
		  Orientation		  "left"
		  NamePlacement		  "alternate"
		  Gain			  "1/inerti"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "G2"
		  Position		  [270, 108, 305, 132]
		  Orientation		  "left"
		  NamePlacement		  "alternate"
		  Gain			  "1/inerti"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "G3"
		  Position		  [270, 38, 305, 62]
		  Orientation		  "left"
		  NamePlacement		  "alternate"
		  Gain			  "1/inerti"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain1"
		  Position		  [445, 153, 505, 197]
		  Orientation		  "left"
		  NamePlacement		  "alternate"
		  Gain			  "-Ks"
		  Multiplication	  "Matrix(K*u)"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain2"
		  Position		  [470, 374, 515, 416]
		  Orientation		  "left"
		  NamePlacement		  "alternate"
		  Gain			  "Hs"
		  Multiplication	  "Matrix(K*u)"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain3"
		  Position		  [315, 400, 380, 440]
		  Gain			  "Hr"
		  Multiplication	  "Matrix(K*u)"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain6"
		  Position		  [295, 184, 345, 226]
		  Gain			  "-Kr"
		  Multiplication	  "Matrix(K*u)"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain7"
		  Position		  [362, 250, 428, 305]
		  Orientation		  "up"
		  Gain			  "-Ki"
		  Multiplication	  "Matrix(K*u)"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Integrator
		  Name			  "Integrator1"
		  Ports			  [1, 1]
		  Position		  [135, 70, 165, 100]
		  Orientation		  "left"
		  NamePlacement		  "alternate"
		  LimitOutput		  on
		  UpperSaturationLimit	  "576"
		  LowerSaturationLimit	  "-576"
		  IgnoreLimit		  off
		}
		Block {
		  BlockType		  Integrator
		  Name			  "Integrator2"
		  Ports			  [1, 1]
		  Position		  [180, 35, 210, 65]
		  Orientation		  "left"
		  NamePlacement		  "alternate"
		  LimitOutput		  on
		  UpperSaturationLimit	  "576"
		  LowerSaturationLimit	  "-576"
		  IgnoreLimit		  off
		}
		Block {
		  BlockType		  Integrator
		  Name			  "Integrator3"
		  Ports			  [1, 1]
		  Position		  [90, 105, 120, 135]
		  Orientation		  "left"
		  NamePlacement		  "alternate"
		  LimitOutput		  on
		  UpperSaturationLimit	  "576"
		  LowerSaturationLimit	  "-576"
		  IgnoreLimit		  off
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux1"
		  Ports			  [3, 1]
		  Position		  [550, 131, 555, 219]
		  Orientation		  "left"
		  NamePlacement		  "alternate"
		  ShowName		  off
		  Inputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux4"
		  Ports			  [3, 1]
		  Position		  [840, 87, 845, 143]
		  Orientation		  "left"
		  NamePlacement		  "alternate"
		  ShowName		  off
		  Inputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Scope
		  Name			  "States"
		  Ports			  [4]
		  Position		  [775, 213, 805, 247]
		  Location		  [413, 193, 1131, 681]
		  Open			  off
		  NumInputPorts		  "4"
		  List {
		    ListType		    AxesTitles
		    axes1		    "Quant 1:3"
		    axes2		    "Quant 4"
		    axes3		    "Omega S"
		    axes4		    "H_mw"
		  }
		  TimeRange		  "600"
		  YMin			  "-0.2~0.9225~-0.0125~0"
		  YMax			  "0.4~0.9475~0.0125~0.00014"
		  DataFormat		  "StructureWithTime"
		  LimitDataPoints	  off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [385, 385, 405, 405]
		  Orientation		  "up"
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [3, 1]
		  Position		  [360, 155, 400, 195]
		  Orientation		  "up"
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+++"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum2"
		  Ports			  [2, 1]
		  Position		  [590, 195, 610, 215]
		  Orientation		  "left"
		  NamePlacement		  "alternate"
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Terminator
		  Name			  "Terminator"
		  Position		  [870, 150, 890, 170]
		  Orientation		  "left"
		  NamePlacement		  "alternate"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Quant 1:3"
		  Position		  [588, 80, 602, 110]
		  Orientation		  "up"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Quant 4"
		  Position		  [883, 220, 897, 250]
		  Orientation		  "down"
		  NamePlacement		  "alternate"
		  Port			  "2"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Omega S"
		  Position		  [710, 148, 740, 162]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "H_mw1"
		  Position		  [678, 260, 692, 290]
		  Orientation		  "down"
		  NamePlacement		  "alternate"
		  Port			  "4"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Omega_mw1"
		  Position		  [85, 43, 115, 57]
		  Orientation		  "left"
		  NamePlacement		  "alternate"
		  Port			  "5"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Omega_mw2"
		  Position		  [40, 78, 70, 92]
		  Orientation		  "left"
		  NamePlacement		  "alternate"
		  Port			  "6"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Omega_mw3"
		  Position		  [25, 113, 55, 127]
		  Orientation		  "left"
		  NamePlacement		  "alternate"
		  Port			  "7"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Mux1"
		  SrcPort		  1
		  Points		  [0, 0; -15, 0]
		  Branch {
		    DstBlock		    "Gain1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Gain2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Gain2"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Gain3"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Discrete-Time\nIntegrator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Discrete-Time\nIntegrator"
		  SrcPort		  1
		  DstBlock		  "Gain7"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Gain1"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Gain7"
		  SrcPort		  1
		  Points		  [0, -15; 2, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Gain6"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "q_ref"
		  SrcPort		  1
		  Points		  [0, 0; 10, 0]
		  Branch {
		    DstBlock		    "Gain6"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 215]
		    DstBlock		    "Gain3"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  DstBlock		  "Sum2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum2"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  4
		  Points		  [0, 0; 0, 5]
		  Branch {
		    DstBlock		    "Terminator"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 35; -15, 0]
		    Branch {
		    Points		    [-150, 0; 0, 30]
		    DstBlock		    "States"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Quant 4"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "From1"
		  SrcPort		  1
		  DstBlock		  "Demux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Mux4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  2
		  Points		  [0, 0]
		  DstBlock		  "Mux4"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  3
		  Points		  [0, 0]
		  DstBlock		  "Mux4"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "From2"
		  SrcPort		  1
		  Points		  [0, 0; -215, 0]
		  Branch {
		    Points		    [0, 60]
		    DstBlock		    "States"
		    DstPort		    3
		  }
		  Branch {
		    Points		    [-100, 0]
		    Branch {
		    DstBlock		    "Mux1"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, -20]
		    DstBlock		    "Omega S"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Mux4"
		  SrcPort		  1
		  Points		  [0, 0; -75, 0]
		  Branch {
		    DstBlock		    "States"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [-80, 0; 0, 30; -80, 0]
		    Branch {
		    DstBlock		    "Mux1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [-5, 0]
		    DstBlock		    "Quant 1:3"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  Points		  [0, -65]
		  DstBlock		  "Demux1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "H_mw"
		  SrcPort		  1
		  Points		  [0, 0; -20, 0]
		  Branch {
		    DstBlock		    "Sum2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 35; 50, 0]
		    Branch {
		    Points		    [75, 0]
		    DstBlock		    "States"
		    DstPort		    4
		    }
		    Branch {
		    DstBlock		    "H_mw1"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "G3"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Integrator2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "G1"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Integrator1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "G2"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Integrator3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "G3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  2
		  Points		  [0, 0]
		  DstBlock		  "G1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  3
		  Points		  [0, 0]
		  DstBlock		  "G2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Integrator2"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Omega_mw1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Integrator1"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Omega_mw2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Integrator3"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Omega_mw3"
		  DstPort		  1
		}
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Magnetorquer power driver"
	  Ports			  [1, 1]
	  Position		  [40, 79, 140, 121]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "Magnetorquer power driver"
	    Location		    [308, 142, 806, 442]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "m_mt(S)"
	      Position		      [85, 143, 115, 157]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      Ports		      [1, 3]
	      Position		      [160, 88, 165, 212]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "3"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [195, 95, 255, 125]
	      Gain		      "0.408163"
	      ParameterDataTypeMode   "Inherit via internal rule"
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      Position		      [195, 135, 255, 165]
	      Gain		      "0.408163"
	      ParameterDataTypeMode   "Inherit via internal rule"
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain2"
	      Position		      [195, 175, 255, 205]
	      Gain		      "0.408163"
	      ParameterDataTypeMode   "Inherit via internal rule"
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      Ports		      [3, 1]
	      Position		      [300, 92, 305, 208]
	      ShowName		      off
	      Inputs		      "3"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "I out"
	      Position		      [355, 142, 385, 158]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      3
	      DstBlock		      "Gain2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      DstBlock		      "Gain1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "m_mt(S)"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      DstBlock		      "I out"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain2"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      3
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "magnetorquer driver"
	  Ports			  [2, 1]
	  Position		  [40, 14, 140, 56]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  MaskDisplay		  "port_label('output',1,'I_out')\nport_label("
"'input',1,'Nmt(sat)')\nport_label('input',2,'B(sat)')"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  System {
	    Name		    "magnetorquer driver"
	    Location		    [271, 123, 1399, 906]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Nmt"
	      Position		      [20, 273, 50, 287]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "B"
	      Position		      [20, 393, 50, 407]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Add"
	      Ports		      [3, 1]
	      Position		      [870, 284, 900, 316]
	      Inputs		      "+++"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      OutScaling	      "2^-10"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [135, 45, 165, 75]
	      Value		      "[1;0;0]"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [330, 190, 360, 220]
	      Value		      "-1"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [130, 295, 160, 325]
	      Value		      "[0;1;0]"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      Position		      [325, 440, 355, 470]
	      Value		      "-1"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      Position		      [140, 555, 170, 585]
	      Value		      "[0;0;1]"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      Position		      [330, 700, 360, 730]
	      Value		      "-1"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Dot Product"
	      Ports		      [2, 1]
	      Position		      [290, 22, 320, 53]
	      SourceBlock	      "simulink/Math\nOperations/Dot Product"
	      SourceType	      "Dot Product"
	      InputSameDT	      "on"
	      OutputDataTypeScalingMode	"Inherit via internal rule"
	      OutDataType	      "sfix(16)"
	      OutScaling	      "2^-10"
	      LockScale		      "off"
	      RndMeth		      "Floor"
	      DoSatur		      "off"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Dot Product1"
	      Ports		      [2, 1]
	      Position		      [285, 272, 315, 303]
	      SourceBlock	      "simulink/Math\nOperations/Dot Product"
	      SourceType	      "Dot Product"
	      InputSameDT	      "on"
	      OutputDataTypeScalingMode	"Inherit via internal rule"
	      OutDataType	      "sfix(16)"
	      OutScaling	      "2^-10"
	      LockScale		      "off"
	      RndMeth		      "Floor"
	      DoSatur		      "off"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Dot Product2"
	      Ports		      [2, 1]
	      Position		      [290, 532, 320, 563]
	      SourceBlock	      "simulink/Math\nOperations/Dot Product"
	      SourceType	      "Dot Product"
	      InputSameDT	      "on"
	      OutputDataTypeScalingMode	"Inherit via internal rule"
	      OutDataType	      "sfix(16)"
	      OutScaling	      "2^-10"
	      LockScale		      "off"
	      RndMeth		      "Floor"
	      DoSatur		      "off"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Embedded\nMATLAB Function"
	      Ports		      [1, 1]
	      Position		      [535, 127, 605, 173]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      MaskType		      "Stateflow"
	      MaskDescription	      "Embedded MATLAB block"
	      MaskDisplay	      "disp('fcn');"
	      MaskSelfModifiable      on
	      MaskIconFrame	      on
	      MaskIconOpaque	      off
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Embedded\nMATLAB Function"
		Location		[257, 457, 812, 717]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "u"
		  Position		  [20, 101, 40, 119]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Demux
		  Name			  " Demux "
		  Ports			  [1, 1]
		  Position		  [270, 160, 320, 200]
		  Outputs		  "1"
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  " SFunction "
		  Tag			  "Stateflow S-Function components_lib"
" 2"
		  Ports			  [1, 2]
		  Position		  [180, 100, 230, 160]
		  FunctionName		  "sf_sfun"
		  PortCounts		  "[1 2]"
		  Port {
		    PortNumber		    2
		    Name		    "y"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		  }
		}
		Block {
		  BlockType		  Terminator
		  Name			  " Terminator "
		  Position		  [460, 171, 480, 189]
		}
		Block {
		  BlockType		  Outport
		  Name			  "y"
		  Position		  [460, 101, 480, 119]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  " SFunction "
		  SrcPort		  1
		  Points		  [0, 65]
		  DstBlock		  " Demux "
		  DstPort		  1
		}
		Line {
		  SrcBlock		  " Demux "
		  SrcPort		  1
		  DstBlock		  " Terminator "
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "u"
		  SrcPort		  1
		  DstBlock		  " SFunction "
		  DstPort		  1
		}
		Line {
		  Name			  "y"
		  Labels		  [0, 0]
		  SrcBlock		  " SFunction "
		  SrcPort		  2
		  DstBlock		  "y"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Embedded\nMATLAB Function1"
	      Ports		      [1, 1]
	      Position		      [540, 377, 610, 423]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      MaskType		      "Stateflow"
	      MaskDescription	      "Embedded MATLAB block"
	      MaskDisplay	      "disp('fcn');"
	      MaskSelfModifiable      on
	      MaskIconFrame	      on
	      MaskIconOpaque	      off
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Embedded\nMATLAB Function1"
		Location		[257, 457, 812, 717]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "u"
		  Position		  [20, 101, 40, 119]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Demux
		  Name			  " Demux "
		  Ports			  [1, 1]
		  Position		  [270, 160, 320, 200]
		  Outputs		  "1"
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  " SFunction "
		  Tag			  "Stateflow S-Function components_lib"
" 3"
		  Ports			  [1, 2]
		  Position		  [180, 100, 230, 160]
		  FunctionName		  "sf_sfun"
		  PortCounts		  "[1 2]"
		  Port {
		    PortNumber		    2
		    Name		    "y"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		  }
		}
		Block {
		  BlockType		  Terminator
		  Name			  " Terminator "
		  Position		  [460, 171, 480, 189]
		}
		Block {
		  BlockType		  Outport
		  Name			  "y"
		  Position		  [460, 101, 480, 119]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  " SFunction "
		  SrcPort		  1
		  Points		  [0, 65]
		  DstBlock		  " Demux "
		  DstPort		  1
		}
		Line {
		  SrcBlock		  " Demux "
		  SrcPort		  1
		  DstBlock		  " Terminator "
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "u"
		  SrcPort		  1
		  DstBlock		  " SFunction "
		  DstPort		  1
		}
		Line {
		  Name			  "y"
		  Labels		  [0, 0]
		  SrcBlock		  " SFunction "
		  SrcPort		  2
		  DstBlock		  "y"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Embedded\nMATLAB Function2"
	      Ports		      [1, 1]
	      Position		      [535, 637, 605, 683]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      MaskType		      "Stateflow"
	      MaskDescription	      "Embedded MATLAB block"
	      MaskDisplay	      "disp('fcn');"
	      MaskSelfModifiable      on
	      MaskIconFrame	      on
	      MaskIconOpaque	      off
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Embedded\nMATLAB Function2"
		Location		[257, 457, 812, 717]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "u"
		  Position		  [20, 101, 40, 119]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Demux
		  Name			  " Demux "
		  Ports			  [1, 1]
		  Position		  [270, 160, 320, 200]
		  Outputs		  "1"
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  " SFunction "
		  Tag			  "Stateflow S-Function components_lib"
" 4"
		  Ports			  [1, 2]
		  Position		  [180, 100, 230, 160]
		  FunctionName		  "sf_sfun"
		  PortCounts		  "[1 2]"
		  Port {
		    PortNumber		    2
		    Name		    "y"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		  }
		}
		Block {
		  BlockType		  Terminator
		  Name			  " Terminator "
		  Position		  [460, 171, 480, 189]
		}
		Block {
		  BlockType		  Outport
		  Name			  "y"
		  Position		  [460, 101, 480, 119]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  " SFunction "
		  SrcPort		  1
		  Points		  [0, 65]
		  DstBlock		  " Demux "
		  DstPort		  1
		}
		Line {
		  SrcBlock		  " Demux "
		  SrcPort		  1
		  DstBlock		  " Terminator "
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "u"
		  SrcPort		  1
		  DstBlock		  " SFunction "
		  DstPort		  1
		}
		Line {
		  Name			  "y"
		  Labels		  [0, 0]
		  SrcBlock		  " SFunction "
		  SrcPort		  2
		  DstBlock		  "y"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1 1/nA"
	      Position		      [775, 35, 805, 65]
	      Gain		      "[0.40816326530612;0;0]"
	      ParameterDataTypeMode   "Inherit via internal rule"
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain2 1/nA"
	      Position		      [800, 545, 830, 575]
	      Gain		      "[0;0;0.40816326530612]"
	      ParameterDataTypeMode   "Inherit via internal rule"
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain3 1/nA"
	      Position		      [795, 285, 825, 315]
	      Gain		      "[0;0.40816326530612;0]"
	      ParameterDataTypeMode   "Inherit via internal rule"
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [710, 32, 740, 63]
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      Ports		      [2, 1]
	      Position		      [730, 282, 760, 313]
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      Ports		      [2, 1]
	      Position		      [740, 542, 770, 573]
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "cross_product"
	      Ports		      [2, 1]
	      Position		      [250, 121, 345, 159]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/cross_product"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "cross_product1"
	      Ports		      [2, 1]
	      Position		      [245, 371, 340, 409]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/cross_product"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "cross_product2"
	      Ports		      [2, 1]
	      Position		      [250, 631, 345, 669]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/cross_product"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "norm"
	      Ports		      [1, 1]
	      Position		      [370, 125, 420, 155]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/norm"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "norm1"
	      Ports		      [1, 1]
	      Position		      [370, 375, 425, 405]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/norm"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "norm2"
	      Ports		      [1, 1]
	      Position		      [370, 635, 425, 665]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/norm"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "pow"
	      Description	      "u^v"
	      Ports		      [2, 1]
	      Position		      [455, 132, 510, 168]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/pow"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "pow1"
	      Description	      "u^v"
	      Ports		      [2, 1]
	      Position		      [460, 382, 515, 418]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/pow"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "pow2"
	      Description	      "u^v"
	      Ports		      [2, 1]
	      Position		      [460, 642, 515, 678]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/pow"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "I"
	      Position		      [950, 293, 980, 307]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "B"
	      SrcPort		      1
	      Points		      [45, 0]
	      Branch {
		Points			[0, 260]
		DstBlock		"cross_product2"
		DstPort			2
	      }
	      Branch {
		Points			[0, -250]
		DstBlock		"cross_product"
		DstPort			2
	      }
	      Branch {
		DstBlock		"cross_product1"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Nmt"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 260]
		DstBlock		"Dot Product2"
		DstPort			1
	      }
	      Branch {
		Points			[0, -250]
		DstBlock		"Dot Product"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Dot Product1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Embedded\nMATLAB Function2"
	      SrcPort		      1
	      Points		      [55, 0; 0, -95]
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "pow2"
	      SrcPort		      1
	      DstBlock		      "Embedded\nMATLAB Function2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Embedded\nMATLAB Function1"
	      SrcPort		      1
	      Points		      [50, 0; 0, -95]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "pow1"
	      SrcPort		      1
	      DstBlock		      "Embedded\nMATLAB Function1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Embedded\nMATLAB Function"
	      SrcPort		      1
	      Points		      [40, 0; 0, -95]
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "pow"
	      SrcPort		      1
	      DstBlock		      "Embedded\nMATLAB Function"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain2 1/nA"
	      SrcPort		      1
	      Points		      [15, 0; 0, -250]
	      DstBlock		      "Add"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [0, 0; 40, 0]
	      Branch {
		Points			[0, 70]
		DstBlock		"cross_product"
		DstPort			1
	      }
	      Branch {
		Points			[0, -15]
		DstBlock		"Dot Product"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Dot Product"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Gain1 1/nA"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      Points		      [75, 0]
	      DstBlock		      "pow"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "cross_product"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "norm"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "norm"
	      SrcPort		      1
	      DstBlock		      "pow"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      Points		      [0, 0; 40, 0]
	      Branch {
		Points			[0, 70]
		DstBlock		"cross_product1"
		DstPort			1
	      }
	      Branch {
		Points			[0, -15]
		DstBlock		"Dot Product1"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Dot Product1"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      DstBlock		      "Gain3 1/nA"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      Points		      [85, 0]
	      DstBlock		      "pow1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "cross_product1"
	      SrcPort		      1
	      DstBlock		      "norm1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "norm1"
	      SrcPort		      1
	      DstBlock		      "pow1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      Points		      [0, 0; 35, 0]
	      Branch {
		Points			[0, 70]
		DstBlock		"cross_product2"
		DstPort			1
	      }
	      Branch {
		Points			[0, -15]
		DstBlock		"Dot Product2"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Dot Product2"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "Gain2 1/nA"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      Points		      [80, 0]
	      DstBlock		      "pow2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "cross_product2"
	      SrcPort		      1
	      DstBlock		      "norm2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "norm2"
	      SrcPort		      1
	      DstBlock		      "pow2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain3 1/nA"
	      SrcPort		      1
	      DstBlock		      "Add"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Gain1 1/nA"
	      SrcPort		      1
	      Points		      [40, 0; 0, 240]
	      DstBlock		      "Add"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Add"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "I"
	      DstPort		      1
	    }
	    Annotation {
	      Name		      "u^v"
	      Position		      [486, 631]
	      TeXMode		      "on"
	    }
	    Annotation {
	      Name		      "u^v"
	      Position		      [481, 121]
	      TeXMode		      "on"
	    }
	    Annotation {
	      Name		      "u^v"
	      Position		      [486, 371]
	      TeXMode		      "on"
	    }
	  }
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "ADS"
      Ports		      []
      Position		      [418, 229, 562, 299]
      TreatAsAtomicUnit	      off
      MinAlgLoopOccurrences   off
      RTWSystemCode	      "Auto"
      System {
	Name			"ADS"
	Location		[154, 125, 1317, 998]
	Open			off
	ModelBrowserVisibility	on
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"A4"
	PaperUnits		"centimeters"
	ZoomFactor		"100"
	Block {
	  BlockType		  SubSystem
	  Name			  "Attitude Determination"
	  Ports			  []
	  Position		  [22, 119, 162, 189]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "Attitude Determination"
	    Location		    [301, 164, 1168, 975]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      SubSystem
	      Name		      "EKF using quaternions"
	      Ports		      [6, 4]
	      Position		      [320, 322, 405, 438]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"EKF using quaternions"
		Location		[233, 146, 1105, 733]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"portrait"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "q"
		  Position		  [15, 28, 45, 42]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "w"
		  Position		  [15, 58, 45, 72]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "h_mw"
		  Position		  [15, 88, 45, 102]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "N_mt"
		  Position		  [15, 118, 45, 132]
		  Port			  "4"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "q0_in"
		  Position		  [15, 178, 45, 192]
		  Port			  "5"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "eclipse"
		  Position		  [15, 238, 45, 252]
		  Port			  "6"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  Position		  [20, 145, 40, 165]
		  Decimation		  "10"
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux1"
		  Ports			  [1, 16]
		  Position		  [265, 96, 270, 189]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "16"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  MATLABFcn
		  Name			  "EKF"
		  Position		  [160, 125, 220, 155]
		  MATLABFcn		  "AAUSAT_II_Kalman"
		  OutputDimensions	  "16"
		  SampleTime		  "0.1"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux1"
		  Ports			  [3, 1]
		  Position		  [410, 147, 415, 193]
		  ShowName		  off
		  Inputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux2"
		  Ports			  [8, 1]
		  Position		  [115, 26, 120, 254]
		  ShowName		  off
		  Inputs		  "8"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux3"
		  Ports			  [4, 1]
		  Position		  [375, 61, 380, 99]
		  ShowName		  off
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux4"
		  Ports			  [3, 1]
		  Position		  [455, 102, 460, 148]
		  ShowName		  off
		  Inputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux5"
		  Ports			  [3, 1]
		  Position		  [435, 197, 440, 243]
		  ShowName		  off
		  Inputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Step size"
		  Position		  [60, 200, 90, 230]
		  Value			  "0.1"
		}
		Block {
		  BlockType		  Outport
		  Name			  "q_out"
		  Position		  [405, 73, 435, 87]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "w_out"
		  Position		  [485, 118, 515, 132]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "q_residual"
		  Position		  [455, 163, 485, 177]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "w_residual"
		  Position		  [480, 213, 510, 227]
		  Port			  "4"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "eclipse"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "q0_in"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "q"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux4"
		  SrcPort		  1
		  DstBlock		  "w_out"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux3"
		  SrcPort		  1
		  DstBlock		  "q_out"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "N_mt"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "h_mw"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "w"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  4
		  Points		  [60, 0; 0, -25]
		  DstBlock		  "Mux3"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  3
		  Points		  [50, 0; 0, -30]
		  DstBlock		  "Mux3"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  2
		  Points		  [40, 0; 0, -35]
		  DstBlock		  "Mux3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  1
		  Points		  [30, 0; 0, -40]
		  DstBlock		  "Mux3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Step size"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "EKF"
		  SrcPort		  1
		  Points		  [25, 0]
		  DstBlock		  "Demux1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux2"
		  SrcPort		  1
		  DstBlock		  "EKF"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux1"
		  SrcPort		  1
		  DstBlock		  "q_residual"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux5"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "w_residual"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  8
		  Points		  [115, 0; 0, 15]
		  DstBlock		  "Mux1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  9
		  Points		  [110, 0; 0, 25]
		  DstBlock		  "Mux1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  10
		  Points		  [105, 0; 0, 35]
		  DstBlock		  "Mux1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  5
		  Points		  [80, 0; 0, -15]
		  DstBlock		  "Mux4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  6
		  Points		  [95, 0; 0, -5]
		  DstBlock		  "Mux4"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  7
		  Points		  [165, 0]
		  DstBlock		  "Mux4"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  11
		  Points		  [90, 0; 0, 50]
		  DstBlock		  "Mux5"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  12
		  Points		  [75, 0; 0, 60]
		  DstBlock		  "Mux5"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  13
		  Points		  [60, 0; 0, 70]
		  DstBlock		  "Mux5"
		  DstPort		  3
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "EKF using sun and mag vectors"
	      Ports		      [9, 2]
	      Position		      [555, 333, 660, 507]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"EKF using sun and mag vectors"
		Location		[702, 208, 1224, 690]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "R_sun(S)"
		  Position		  [80, 48, 110, 62]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "b(S)"
		  Position		  [80, 78, 110, 92]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "w(S)"
		  Position		  [80, 108, 110, 122]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "R_sun(I)"
		  Position		  [80, 138, 110, 152]
		  Port			  "4"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "b(I)"
		  Position		  [80, 168, 110, 182]
		  Port			  "5"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "h_mw"
		  Position		  [80, 198, 110, 212]
		  Port			  "6"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "N_mt"
		  Position		  [80, 228, 110, 242]
		  Port			  "7"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "q0"
		  Position		  [80, 288, 110, 302]
		  Port			  "8"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Eclipse"
		  Position		  [80, 348, 110, 362]
		  Port			  "9"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  Position		  [45, 255, 65, 275]
		  Decimation		  "10"
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux1"
		  Ports			  [1, 7]
		  Position		  [270, 127, 275, 253]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "7"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  MATLABFcn
		  Name			  "EKF"
		  Position		  [185, 190, 245, 220]
		  MATLABFcn		  "AAUSAT_II_Kalman_BS_vectors"
		  OutputDimensions	  "7"
		  SampleTime		  "0.1"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux2"
		  Ports			  [11, 1]
		  Position		  [150, 28, 155, 382]
		  ShowName		  off
		  Inputs		  "11"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux3"
		  Ports			  [4, 1]
		  Position		  [380, 141, 385, 179]
		  ShowName		  off
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux4"
		  Ports			  [3, 1]
		  Position		  [380, 207, 385, 253]
		  ShowName		  off
		  Inputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Step size"
		  Position		  [40, 310, 70, 340]
		  Value			  "0.1"
		}
		Block {
		  BlockType		  Outport
		  Name			  "q_out"
		  Position		  [410, 153, 440, 167]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "w_out"
		  Position		  [410, 223, 440, 237]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "w(S)"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Eclipse"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Mux2"
		  DstPort		  11
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  1
		  Points		  [85, 0]
		  DstBlock		  "Mux3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  2
		  Points		  [85, 0]
		  DstBlock		  "Mux3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  3
		  Points		  [85, 0]
		  DstBlock		  "Mux3"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  4
		  Points		  [85, 0]
		  DstBlock		  "Mux3"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Mux3"
		  SrcPort		  1
		  DstBlock		  "q_out"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Step size"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  10
		}
		Line {
		  SrcBlock		  "q0"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Mux2"
		  DstPort		  9
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Mux2"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "N_mt"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Mux2"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "h_mw"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Mux2"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "b(I)"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "R_sun(I)"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Mux2"
		  SrcPort		  1
		  DstBlock		  "EKF"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "EKF"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Demux1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  5
		  Points		  [85, 0]
		  DstBlock		  "Mux4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  6
		  DstBlock		  "Mux4"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  7
		  Points		  [85, 0]
		  DstBlock		  "Mux4"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "R_sun(S)"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Mux2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "b(S)"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Mux2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux4"
		  SrcPort		  1
		  DstBlock		  "w_out"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "EKF using sun and mag vectors .. and re"
"moving bias"
	      Ports		      [9, 4]
	      Position		      [70, 565, 175, 755]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"EKF using sun and mag vectors .. and "
"removing bias"
		Location		[455, 544, 977, 1026]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"portrait"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "R_sun(S)"
		  Position		  [80, 48, 110, 62]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "b(S)"
		  Position		  [80, 78, 110, 92]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "w(S)"
		  Position		  [80, 108, 110, 122]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "R_sun(I)"
		  Position		  [80, 138, 110, 152]
		  Port			  "4"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "b(I)"
		  Position		  [80, 168, 110, 182]
		  Port			  "5"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "h_mw"
		  Position		  [80, 198, 110, 212]
		  Port			  "6"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "N_mt"
		  Position		  [80, 228, 110, 242]
		  Port			  "7"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "q0"
		  Position		  [80, 288, 110, 302]
		  Port			  "8"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Eclipse"
		  Position		  [80, 348, 110, 362]
		  Port			  "9"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  Position		  [45, 255, 65, 275]
		  Decimation		  "10"
		}
		Block {
		  BlockType		  MATLABFcn
		  Name			  "EKF"
		  Position		  [185, 190, 245, 220]
		  MATLABFcn		  "AAUSAT_II_Kalman_BS_bias_vectors"
		  OutputDimensions	  "7+12+12"
		  SampleTime		  "0.1"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux2"
		  Ports			  [11, 1]
		  Position		  [150, 28, 155, 382]
		  ShowName		  off
		  Inputs		  "11"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Selector
		  Name			  "Selector"
		  Ports			  [1, 1]
		  Position		  [295, 131, 335, 169]
		  Elements		  "(1:4)"
		  InputPortWidth	  "7+12+12"
		}
		Block {
		  BlockType		  Selector
		  Name			  "Selector1"
		  Ports			  [1, 1]
		  Position		  [295, 186, 335, 224]
		  Elements		  "(5:7)"
		  InputPortWidth	  "7+12+12"
		}
		Block {
		  BlockType		  Selector
		  Name			  "Selector2"
		  Ports			  [1, 1]
		  Position		  [295, 241, 335, 279]
		  Elements		  "(8:19)"
		  InputPortWidth	  "7+12+12"
		}
		Block {
		  BlockType		  Selector
		  Name			  "Selector3"
		  Ports			  [1, 1]
		  Position		  [295, 296, 335, 334]
		  Elements		  "(20:31)"
		  InputPortWidth	  "7+12+12"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Step size"
		  Position		  [35, 310, 65, 340]
		  Value			  "0.1"
		}
		Block {
		  BlockType		  Outport
		  Name			  "q_out"
		  Position		  [410, 143, 440, 157]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "w_out"
		  Position		  [410, 198, 440, 212]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "residual"
		  Position		  [410, 253, 440, 267]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "bias estimat"
		  Position		  [410, 308, 440, 322]
		  Port			  "4"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "b(S)"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Mux2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "R_sun(S)"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Mux2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux2"
		  SrcPort		  1
		  DstBlock		  "EKF"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "R_sun(I)"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "b(I)"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "h_mw"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Mux2"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "N_mt"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Mux2"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Mux2"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "q0"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Mux2"
		  DstPort		  9
		}
		Line {
		  SrcBlock		  "Step size"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  10
		}
		Line {
		  SrcBlock		  "Selector"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "q_out"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Eclipse"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Mux2"
		  DstPort		  11
		}
		Line {
		  SrcBlock		  "w(S)"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "EKF"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    Points		    [0, -55]
		    DstBlock		    "Selector"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 55]
		    DstBlock		    "Selector2"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Selector1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 110]
		    DstBlock		    "Selector3"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Selector1"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "w_out"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Selector2"
		  SrcPort		  1
		  DstBlock		  "residual"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Selector3"
		  SrcPort		  1
		  DstBlock		  "bias estimat"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Propagator from Kalman filter"
	      Ports		      [6, 3]
	      Position		      [80, 293, 180, 467]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Propagator from Kalman filter"
		Location		[518, 287, 968, 726]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"portrait"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "q(S)"
		  Position		  [65, 48, 95, 62]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "w(S)"
		  Position		  [65, 88, 95, 102]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "h_mw(S)"
		  Position		  [65, 128, 95, 142]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "N_mt(S)"
		  Position		  [65, 168, 95, 182]
		  Port			  "4"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "N_dist(S)"
		  Position		  [65, 208, 95, 222]
		  Port			  "5"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Inertia matrix"
		  Position		  [65, 288, 95, 302]
		  Port			  "6"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  MATLABFcn
		  Name			  "EKF"
		  Position		  [170, 120, 230, 150]
		  MATLABFcn		  "kalman-propagator"
		  OutputDimensions	  "10"
		  SampleTime		  "1"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux2"
		  Ports			  [7, 1]
		  Position		  [135, 30, 145, 320]
		  ShowName		  off
		  Inputs		  "7"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Selector
		  Name			  "Selector"
		  Ports			  [1, 1]
		  Position		  [280, 61, 320, 99]
		  Elements		  "(1:4)"
		  InputPortWidth	  "10"
		}
		Block {
		  BlockType		  Selector
		  Name			  "Selector1"
		  Ports			  [1, 1]
		  Position		  [280, 116, 320, 154]
		  Elements		  "(5:7)"
		  InputPortWidth	  "10"
		}
		Block {
		  BlockType		  Selector
		  Name			  "Selector2"
		  Ports			  [1, 1]
		  Position		  [280, 171, 320, 209]
		  Elements		  "(8:10)"
		  InputPortWidth	  "10"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Step size"
		  Position		  [25, 240, 55, 270]
		}
		Block {
		  BlockType		  Outport
		  Name			  "q_out"
		  Position		  [395, 73, 425, 87]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "w_out"
		  Position		  [395, 128, 425, 142]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "h_mw"
		  Position		  [395, 183, 425, 197]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Inertia matrix"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "N_mt(S)"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Selector2"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "h_mw"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Selector1"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "w_out"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "EKF"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    DstBlock		    "Selector1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Selector2"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Selector"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "h_mw(S)"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Selector"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "q_out"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Step size"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "N_dist(S)"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "Mux2"
		  SrcPort		  1
		  Points		  [0, -40]
		  DstBlock		  "EKF"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "q(S)"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "w(S)"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "otoquest"
	      Ports		      [4, 1]
	      Position		      [300, 16, 455, 184]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"otoquest"
		Location		[215, 80, 977, 660]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"portrait"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "B (I)"
		  Position		  [160, 53, 190, 67]
		  NamePlacement		  "alternate"
		  Port			  "1"
		  IconDisplay		  "Port number"
		  SampleTime		  "1"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "R_sun(I)"
		  Position		  [160, 83, 190, 97]
		  NamePlacement		  "alternate"
		  Port			  "2"
		  IconDisplay		  "Port number"
		  SampleTime		  "1"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "B(S)"
		  Position		  [160, 113, 190, 127]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  SampleTime		  "1"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "R_sun(S)"
		  Position		  [160, 143, 190, 157]
		  Port			  "4"
		  IconDisplay		  "Port number"
		  SampleTime		  "1"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [6, 1]
		  Position		  [265, 40, 275, 230]
		  ShowName		  off
		  Inputs		  "6"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Weights"
		  Position		  [115, 170, 190, 190]
		  Value			  "[0.5,0.5]"
		}
		Block {
		  BlockType		  UnitDelay
		  Name			  "create q_old"
		  Position		  [310, 223, 345, 257]
		  Orientation		  "left"
		  NamePlacement		  "alternate"
		  X0			  "[0.8 0 0 0.6]"
		}
		Block {
		  BlockType		  MATLABFcn
		  Name			  "otoquest.m"
		  Position		  [295, 120, 355, 150]
		  MATLABFcn		  "otoquest(u)"
		  Output1D		  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "q(I->S)"
		  Position		  [390, 128, 420, 142]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		  PortDimensions	  "4"
		}
		Line {
		  SrcBlock		  "Weights"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "R_sun(S)"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "B(S)"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "R_sun(I)"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "B (I)"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "otoquest.m"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    DstBlock		    "q(I->S)"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 105]
		    DstBlock		    "create q_old"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "otoquest.m"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "create q_old"
		  SrcPort		  1
		  Points		  [-65, 0; 0, -30]
		  DstBlock		  "Mux"
		  DstPort		  6
		}
		Annotation {
		  Position		  [277, 90]
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "otoquest with propagator"
	      Ports		      [6, 1]
	      Position		      [560, 13, 725, 282]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"otoquest with propagator"
		Location		[211, 80, 973, 660]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"portrait"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "B (I)"
		  Position		  [160, 53, 190, 67]
		  NamePlacement		  "alternate"
		  Port			  "1"
		  IconDisplay		  "Port number"
		  SampleTime		  "1"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "R_sun(I)"
		  Position		  [160, 83, 190, 97]
		  NamePlacement		  "alternate"
		  Port			  "2"
		  IconDisplay		  "Port number"
		  SampleTime		  "1"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "B(S)"
		  Position		  [160, 113, 190, 127]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  SampleTime		  "1"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "R_sun(S)"
		  Position		  [160, 143, 190, 157]
		  Port			  "4"
		  IconDisplay		  "Port number"
		  SampleTime		  "1"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "omega"
		  Position		  [140, 213, 170, 227]
		  Port			  "5"
		  IconDisplay		  "Port number"
		  SampleTime		  "1"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "eclipse"
		  Position		  [165, 253, 195, 267]
		  Port			  "6"
		  IconDisplay		  "Port number"
		  SampleTime		  "1"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [7, 1]
		  Position		  [265, 40, 275, 230]
		  ShowName		  off
		  Inputs		  "7"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Weights"
		  Position		  [115, 170, 190, 190]
		  Value			  "[0.5,0.5]"
		}
		Block {
		  BlockType		  MATLABFcn
		  Name			  "otoquest.m"
		  Position		  [295, 120, 355, 150]
		  MATLABFcn		  "otoquest_with_pro(u)"
		  Output1D		  off
		  SampleTime		  "0.1"
		}
		Block {
		  BlockType		  Outport
		  Name			  "q_p(I->S)"
		  Position		  [390, 128, 420, 142]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		  PortDimensions	  "4"
		}
		Line {
		  SrcBlock		  "omega"
		  SrcPort		  1
		  Points		  [65, 0; 0, -30; 10, 0]
		  DstBlock		  "Mux"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "eclipse"
		  SrcPort		  1
		  Points		  [50, 0]
		  DstBlock		  "Mux"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Weights"
		  SrcPort		  1
		  Points		  [55, 0]
		  DstBlock		  "Mux"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "R_sun(S)"
		  SrcPort		  1
		  Points		  [55, 0]
		  DstBlock		  "Mux"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "B(S)"
		  SrcPort		  1
		  Points		  [55, 0]
		  DstBlock		  "Mux"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "R_sun(I)"
		  SrcPort		  1
		  Points		  [55, 0]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "B (I)"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "otoquest.m"
		  SrcPort		  1
		  DstBlock		  "q_p(I->S)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "otoquest.m"
		  DstPort		  1
		}
		Annotation {
		  Position		  [277, 90]
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "q-method"
	      Ports		      [5, 1]
	      Position		      [55, 16, 210, 184]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"q-method"
		Location		[518, 443, 1002, 745]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"portrait"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "q(E->I)"
		  Position		  [15, 98, 45, 112]
		  NamePlacement		  "alternate"
		  Port			  "1"
		  IconDisplay		  "Port number"
		  SampleTime		  "1"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "R_s(I)"
		  Position		  [15, 148, 45, 162]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  SampleTime		  "1"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "B(E)"
		  Position		  [15, 118, 45, 132]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  SampleTime		  "1"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "B(sc)"
		  Position		  [15, 28, 45, 42]
		  NamePlacement		  "alternate"
		  Port			  "4"
		  IconDisplay		  "Port number"
		  SampleTime		  "1"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "R_s(sc)"
		  Position		  [15, 68, 45, 82]
		  NamePlacement		  "alternate"
		  Port			  "5"
		  IconDisplay		  "Port number"
		  SampleTime		  "1"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [6, 1]
		  Position		  [265, 15, 275, 255]
		  ShowName		  off
		  Inputs		  "6"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  UnitDelay
		  Name			  "Unit Delay"
		  Position		  [350, 185, 390, 220]
		  Orientation		  "down"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Vector rotation by q"
		  Ports			  [2, 1]
		  Position		  [60, 93, 160, 137]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/Vector rotation by q"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Weights"
		  Position		  [175, 185, 250, 205]
		  Value			  "[1,0]"
		}
		Block {
		  BlockType		  MATLABFcn
		  Name			  "qmethod.m"
		  Position		  [295, 120, 355, 150]
		  MATLABFcn		  "qmethod([u(1) u(4);u(2) u(5);u(3) u"
"(6)] , [u(7) u(10);u(8) u(11); u(9) u(12)], [u(13);u(14)],[u(15);u(16);u(17);"
"u(18)])"
		  Output1D		  off
		}
		Block {
		  BlockType		  Reference
		  Name			  "to unit vector"
		  Ports			  [1, 1]
		  Position		  [175, 25, 250, 45]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "to unit vector1"
		  Ports			  [1, 1]
		  Position		  [175, 105, 250, 125]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "to unit vector2"
		  Ports			  [1, 1]
		  Position		  [175, 65, 250, 85]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "to unit vector3"
		  Ports			  [1, 1]
		  Position		  [175, 144, 250, 166]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Outport
		  Name			  "q(I-SC)"
		  Position		  [390, 128, 420, 142]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		  PortDimensions	  "4"
		}
		Line {
		  SrcBlock		  "qmethod.m"
		  SrcPort		  1
		  Points		  [0, 0; 10, 0]
		  Branch {
		    DstBlock		    "q(I-SC)"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Unit Delay"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "q(E->I)"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Vector rotation by q"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "B(E)"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Vector rotation by q"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "qmethod.m"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "to unit vector"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "to unit vector1"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Vector rotation by q"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "to unit vector1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "B(sc)"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "to unit vector"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "R_s(I)"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "to unit vector3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "to unit vector3"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "to unit vector2"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "R_s(sc)"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "to unit vector2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Unit Delay"
		  SrcPort		  1
		  Points		  [0, 40; -135, 0; 0, -30]
		  DstBlock		  "Mux"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "Weights"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  5
		}
		Annotation {
		  Position		  [277, 90]
		}
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "FDI"
	  Ports			  []
	  Position		  [22, 24, 162, 94]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "FDI"
	    Location		    [415, 328, 913, 628]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "A4"
	    PaperUnits		    "centimeters"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      SubSystem
	      Name		      "Residual Generator"
	      Ports		      [2, 1]
	      Position		      [45, 29, 190, 91]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      MaskPromptString	      "Observer Poles|momentum wheel working p"
"oint|omega working point |attitude working point|Inertia Matrix|Residual Matr"
"ix (Q)|Skew symetric omega|Skew symetric Iw|Skew symetric momentum wheel|Syst"
"em Matrix|Input Matrix|Output Matrix|Observer Matrix"
	      MaskStyleString	      "edit,edit,edit,edit,edit,edit,edit,edit"
",edit,edit,edit,edit,edit"
	      MaskTunableValueString  "on,on,on,on,on,on,on,on,on,on,on,on,on"
	      MaskCallbackString      "||||||||||||"
	      MaskEnableString	      "on,on,on,on,on,on,on,on,on,on,on,on,on"
	      MaskVisibilityString    "on,on,on,on,on,on,off,off,off,off,off,o"
"ff,off"
	      MaskToolTipString	      "on,on,on,on,on,on,on,on,on,on,on,on,on"
	      MaskVarAliasString      ",,,,,,,,,,,,"
	      MaskVariables	      "poles=@1;h_mw=@2;w_bar=@3;q_bar=@4;I=@5"
";Q=@6;S_w=@7;S_Iw=@8;S_hm=@9;A=@10;B=@11;C=@12;L=@13;"
	      MaskInitialization      "S_w = [0 -w_bar(3) w_bar(2);w_bar(3) 0 "
"-w_bar(1);-w_bar(2) w_bar(1) 0];\nS_mw = [0 -h_mw(3) h_mw(2);h_mw(3) 0 -h_mw("
"1);-h_mw(2) h_mw(1) 0];\nS_Iw = [0 -w_bar(3)*I(3) w_bar(2)*I(2);w_bar(3)*I(3)"
" 0 -w_bar(1)*I(1);-w_bar(2)*I(2) w_bar(1)*I(1) 0];\nA = [-S_w, zeros(3,1), 0."
"5*eye(3), zeros(3,3);zeros(1,10);zeros(3,4), inv(I)*(S_Iw - S_w*I + S_mw), -i"
"nv(I)*S_w;zeros(3,10)];\nB = [zeros(4,3) zeros(4,3);inv(I),-inv(I);zeros(3,3)"
", eye(3)];\nC = eye(10);\nL = place(A',C',-poles);\n"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "[10,10,10,10,10,10,10,10,10,10]|[0;0;0]"
"|[0;0;0]|[0;0;0;0]|eye(3)|eye(10)|0|0|0|0|0|0|0"
	      MaskTabNameString	      ",,,,,,,,,,,,"
	      System {
		Name			"Residual Generator"
		Location		[230, 127, 1028, 494]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Input"
		  Position		  [15, 158, 45, 172]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Measurement"
		  Position		  [375, 53, 405, 67]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Gain
		  Name			  "A Matrix"
		  Position		  [200, 240, 230, 270]
		  Orientation		  "left"
		  Gain			  "A"
		  Multiplication	  "Matrix(K*u)"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "B Matrix"
		  Position		  [100, 150, 130, 180]
		  Gain			  "B"
		  Multiplication	  "Matrix(K*u)"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "C Matrix"
		  Position		  [345, 150, 375, 180]
		  Gain			  "C"
		  Multiplication	  "Matrix(K*u)"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux2"
		  Ports			  [1, 10]
		  Position		  [555, 150, 560, 215]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "10"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Integrator
		  Name			  "Integrator"
		  Ports			  [1, 1]
		  Position		  [200, 150, 230, 180]
		  IgnoreLimit		  off
		}
		Block {
		  BlockType		  Gain
		  Name			  "L Matrix"
		  Position		  [200, 85, 230, 115]
		  Orientation		  "left"
		  Gain			  "L"
		  Multiplication	  "Matrix(K*u)"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Q matrix"
		  Position		  [470, 15, 500, 45]
		  Gain			  "Q"
		  Multiplication	  "Matrix(K*u)"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Scope
		  Name			  "Scope5"
		  Ports			  [10]
		  Position		  [610, 160, 640, 205]
		  Location		  [5, 101, 1397, 1044]
		  Open			  off
		  NumInputPorts		  "10"
		  List {
		    ListType		    AxesTitles
		    axes1		    "%<SignalLabel>"
		    axes2		    "%<SignalLabel>"
		    axes3		    "%<SignalLabel>"
		    axes4		    "%<SignalLabel>"
		    axes5		    "%<SignalLabel>"
		    axes6		    "%<SignalLabel>"
		    axes7		    "%<SignalLabel>"
		    axes8		    "%<SignalLabel>"
		    axes9		    "%<SignalLabel>"
		    axes10		    "%<SignalLabel>"
		  }
		  YMin			  "-5~0~0~-1.25e-009~-5e+028~0~0~-1~-1"
"~-1"
		  YMax			  "5~2e+028~5e+027~1~0~2e+028~5e+027~1"
"~1~1"
		  SaveName		  "ScopeData6"
		  DataFormat		  "StructureWithTime"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [3, 1]
		  Position		  [155, 155, 175, 175]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "+++"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [2, 1]
		  Position		  [295, 155, 315, 175]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|++"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum2"
		  Ports			  [2, 1]
		  Position		  [415, 90, 435, 110]
		  Orientation		  "left"
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "+|-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Working\npoint"
		  Position		  [270, 210, 300, 240]
		  Value			  "[q_bar;w_bar; h_mw]"
		}
		Block {
		  BlockType		  Outport
		  Name			  "residual"
		  Position		  [540, 23, 570, 37]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Input"
		  SrcPort		  1
		  DstBlock		  "B Matrix"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Q matrix"
		  SrcPort		  1
		  DstBlock		  "residual"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Working\npoint"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Measurement"
		  SrcPort		  1
		  Points		  [15, 0]
		  DstBlock		  "Sum2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "C Matrix"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [25, 0]
		    DstBlock		    "Sum2"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 20]
		    DstBlock		    "Demux2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Sum2"
		  SrcPort		  1
		  Points		  [-95, 0]
		  Branch {
		    DstBlock		    "L Matrix"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -70]
		    DstBlock		    "Q matrix"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "C Matrix"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Integrator"
		  SrcPort		  1
		  Points		  [0, 0; 20, 0]
		  Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 90]
		    DstBlock		    "A Matrix"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Integrator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "A Matrix"
		  SrcPort		  1
		  Points		  [-30, 0]
		  DstBlock		  "Sum"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "B Matrix"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "L Matrix"
		  SrcPort		  1
		  Points		  [-30, 0]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Scope5"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  2
		  Points		  [0, 0]
		  DstBlock		  "Scope5"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  3
		  Points		  [0, 0]
		  DstBlock		  "Scope5"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  4
		  Points		  [0, 0]
		  DstBlock		  "Scope5"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  5
		  Points		  [0, 0]
		  DstBlock		  "Scope5"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  6
		  Points		  [0, 0]
		  DstBlock		  "Scope5"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  7
		  Points		  [0, 0]
		  DstBlock		  "Scope5"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  8
		  Points		  [0, 0]
		  DstBlock		  "Scope5"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  9
		  Points		  [0, 0]
		  DstBlock		  "Scope5"
		  DstPort		  9
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  10
		  Points		  [0, 0]
		  DstBlock		  "Scope5"
		  DstPort		  10
		}
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "On-board model"
	  Ports			  []
	  Position		  [187, 24, 327, 93]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "On-board model"
	    Location		    [30, 94, 1072, 972]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      SubSystem
	      Name		      "ADS on-board models"
	      Ports		      [2, 4]
	      Position		      [30, 22, 280, 213]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      MaskPromptString	      "Solar flux [W/m^2]|Albedo enabled"
	      MaskStyleString	      "edit,checkbox"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskVarAliasString      ","
	      MaskVariables	      "sun_flux=@1;alb_enabled=@2;"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "1366.9|off"
	      MaskTabNameString	      ","
	      System {
		Name			"ADS on-board models"
		Location		[142, 80, 1223, 891]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"portrait"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "sim_time (JD)"
		  Position		  [170, 53, 200, 67]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Estimated q(I->S)"
		  Position		  [40, 383, 70, 397]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Albedo model onboard"
		  Ports			  [4, 1]
		  Position		  [490, 312, 665, 453]
		  AncestorBlock		  "components_lib/ADS/On-board Sensor "
"model/Albedo model onboard"
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  MaskPromptString	  "Sun flux (mean: 1366.9)|Choose used"
" reflectivity data:|Use reflectivity matrix (blackbox)"
		  MaskStyleString	  "edit,popup(FOV cosine dep. reflecti"
"vity table|FOV meaned reflectivity table|Polynomial fit to latitude meaned re"
"flectivity|Constant reflectivity of 30%),checkbox"
		  MaskTunableValueString  "off,on,on"
		  MaskCallbackString	  "||"
		  MaskEnableString	  "on,on,on"
		  MaskVisibilityString	  "on,on,on"
		  MaskToolTipString	  "on,on,on"
		  MaskVarAliasString	  ",,"
		  MaskVariables		  "sun_flux=@1;matrix=@2;enable=@3;"
		  MaskInitialization	  "if matrix == 1\n    mrm = load('fov"
"_albedo_matrix.mat');\n    mrm = mrm.mrm;  \nelseif matrix == 2\n    mrm = lo"
"ad('fov_meaned_albedo_matrix.mat');\n    mrm = mrm.mrm;\nelseif matrix == 3\n"
"    mrm = load('fov_albedo_polynomial_matrix.mat');\n    mrm = mrm.mrm;\nelse"
"if matrix == 4\n    mrm = ones(180,288).*0.30;\nend\n"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "1366.9|FOV cosine dep. reflectivity"
" table|off"
		  MaskTabNameString	  ",,"
		  Port {
		    PortNumber		    1
		    Name		    "alb_ob"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		  }
		  System {
		    Name		    "Albedo model onboard"
		    Location		    [327, 133, 995, 692]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Earth -> Sun vector (ECEF)"
		    Position		    [95, 113, 125, 127]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Zenith vector (ECEF)"
		    Position		    [95, 193, 125, 207]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "q(I->S)"
		    Position		    [95, 448, 125, 462]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "q(I->E)"
		    Position		    [95, 488, 125, 502]
		    Port		    "4"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "On"
		    Position		    [302, 310, 358, 325]
		    Orientation		    "down"
		    NamePlacement	    "alternate"
		    ShowName		    off
		    Value		    "enable"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "On1"
		    Position		    [302, 40, 358, 55]
		    Orientation		    "down"
		    NamePlacement	    "alternate"
		    ShowName		    off
		    Value		    "~enable"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    Ports		    [2, 1]
		    Position		    [480, 150, 500, 170]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "|++"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "cos dependent albedo"
		    Ports		    [2, 1, 1]
		    Position		    [250, 81, 415, 239]
		    TreatAsAtomicUnit	    off
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    System {
		    Name		    "cos dependent albedo"
		    Location		    [84, 168, 1027, 615]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Earth -> Sun vector (ECEF)"
		    Position		    [65, 53, 95, 67]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Zenith vector (ECEF)"
		    Position		    [70, 213, 100, 227]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [520, 55, 540, 75]
		    StatesWhenEnabling	    "reset"
		    }
		    Block {
		    BlockType		    Abs
		    Name		    "Abs"
		    Position		    [510, 185, 540, 215]
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Dot Product"
		    Ports		    [2, 1]
		    Position		    [435, 162, 465, 238]
		    SourceBlock		    "simulink/Math\nOperations/Dot Pro"
"duct"
		    SourceType		    "Dot Product"
		    InputSameDT		    "on"
		    OutputDataTypeScalingMode "Inherit via internal rule"
		    OutDataType		    "sfix(16)"
		    OutScaling		    "2^-10"
		    LockScale		    "off"
		    RndMeth		    "Floor"
		    DoSatur		    "off"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Mean solar flux\n(1366.9 [W/m^2])"
		    Position		    [235, 114, 310, 146]
		    Value		    "sun_flux"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    Ports		    [2, 1]
		    Position		    [345, 24, 375, 166]
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product1"
		    Ports		    [2, 1]
		    Position		    [580, 190, 610, 230]
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product2"
		    Ports		    [2, 1]
		    Position		    [660, 200, 690, 240]
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Sun vector \nto unit vector"
		    Ports		    [1, 1]
		    Position		    [185, 39, 285, 81]
		    SourceBlock		    "components_lib/Math utilities/Vec"
"tor operations/to unit vector"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Zentih vector\nto unit vector"
		    Ports		    [1, 1]
		    Position		    [185, 199, 285, 241]
		    SourceBlock		    "components_lib/Math utilities/Vec"
"tor operations/to unit vector"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    MATLABFcn
		    Name		    "zenith2ref(u, mrm)"
		    Position		    [350, 280, 410, 310]
		    MATLABFcn		    "zenith2ref(u, mrm)*2"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Albedo vector (I)"
		    Position		    [740, 213, 770, 227]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Product2"
		    SrcPort		    1
		    DstBlock		    "Albedo vector (I)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product1"
		    SrcPort		    1
		    DstBlock		    "Product2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Abs"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "Product1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Dot Product"
		    SrcPort		    1
		    DstBlock		    "Abs"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sun vector \nto unit vector"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mean solar flux\n(1366.9 [W/m^2])"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    Points		    [20, 0; 0, 85]
		    DstBlock		    "Dot Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "zenith2ref(u, mrm)"
		    SrcPort		    1
		    Points		    [150, 0]
		    DstBlock		    "Product1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Zentih vector\nto unit vector"
		    SrcPort		    1
		    Points		    [0, 0; 30, 0]
		    Branch {
		    Points		    [0, 75]
		    Branch {
		    Points		    [0, 75; 310, 0; 0, -140]
		    DstBlock		    "Product2"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "zenith2ref(u, mrm)"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "Dot Product"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Earth -> Sun vector (ECEF)"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "Sun vector \nto unit vector"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Zenith vector (ECEF)"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "Zentih vector\nto unit vector"
		    DstPort		    1
		    }
		    Annotation {
		    Name		    "Projection onto\nthe zenith vecto"
"r"
		    Position		    [450, 140]
		    }
		    }
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "fov matrix albedo"
		    Ports		    [4, 1, 1]
		    Position		    [250, 356, 415, 514]
		    TreatAsAtomicUnit	    off
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    System {
		    Name		    "fov matrix albedo"
		    Location		    [60, 503, 1204, 971]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Zenith vector (ECEF)"
		    Position		    [60, 53, 90, 67]
		    NamePlacement	    "alternate"
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Earth -> Sun vector (ECEF)"
		    Position		    [60, 78, 90, 92]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "q(I->S)"
		    Position		    [60, 168, 90, 182]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "q(I->E)"
		    Position		    [60, 228, 90, 242]
		    Port		    "4"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [675, 30, 695, 50]
		    StatesWhenEnabling	    "reset"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Albedo projection"
		    Ports		    [3, 1]
		    Position		    [435, 49, 585, 211]
		    SourceBlock		    "components_lib/ADS/On-board Senso"
"r model/Albedo projection"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    Demux
		    Name		    "Demux"
		    Ports		    [1, 2]
		    Position		    [625, 100, 630, 160]
		    BackgroundColor	    "black"
		    ShowName		    off
		    Outputs		    "2"
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Earth Albedo\nModel"
		    Ports		    [2, 1]
		    Position		    [205, 46, 295, 99]
		    TreatAsAtomicUnit	    on
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    MaskType		    "Earth Albedo Model"
		    MaskDescription	    "Calculate Earth Albedo using stat"
"ic data from the EP/TOMS spacecraft."
		    MaskHelp		    "<b>Input</b><br>\nSat: Vector to "
"satellite in ECEF [m]<br>\nSun: Vector to the Sun in ECEF [m]<p>\n<b>Paramete"
"rs</b><br>\nReflectivity Data (EPR Struct): TOMS Reflectivity data [E.U].<br>"
"\nReduction factor: Reduce data resolution by this factor.<br>\nSample Time ("
"-1 for inherited): Sample Time [s]. The block cannot inherit continuous sampl"
"e time.<br>\nEnable: Enable or disable albedo calculation<p>\n<b>Output</b><b"
"r>\nAlbedo: Fraction of solar irradiance received on the satellite. The incom"
"ing solar irradiance is 1366.5 W/m^2<p>\n"
		    MaskPromptString	    "Reflectivity Data (EPR Struct):|R"
"eduction factor:|Sample Time (-1 for inherited):|Enable:"
		    MaskStyleString	    "edit,edit,edit,checkbox"
		    MaskTunableValueString  "on,on,on,on"
		    MaskCallbackString	    "|||enable = strcmp(get_param(gcb,"
"'enable'),'on');"
		    MaskEnableString	    "on,on,on,on"
		    MaskVisibilityString    "on,on,on,on"
		    MaskToolTipString	    "on,on,on,on"
		    MaskVarAliasString	    ",,,"
		    MaskVariables	    "eprdata=@1;redfac=@2;Ts=@3;enable"
"=@4;"
		    MaskInitialization	    "global sy;\nglobal sx;\nsy = roun"
"d(180/redfac);\nsx = round(288/redfac);\n"
		    MaskDisplay		    "image(imread('private/albedoicon."
"png'));\nport_label('output', 1, 'Albedo');\nport_label('input', 1, 'Sat');\n"
"port_label('input', 2, 'Sun');"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "load('lib/albedo_toolbox/epr_data"
"/2003/ga030101-031231')|10|1|on"
		    MaskTabNameString	    ",,,"
		    System {
		    Name		    "Earth Albedo\nModel"
		    Location		    [359, 481, 916, 781]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "r_sat_ecef"
		    Position		    [55, 143, 85, 157]
		    BackgroundColor	    "yellow"
		    Port		    "1"
		    IconDisplay		    "Port number"
		    SampleTime		    "Ts"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "r_sun_ecef"
		    Position		    [100, 178, 130, 192]
		    BackgroundColor	    "yellow"
		    Port		    "2"
		    IconDisplay		    "Port number"
		    SampleTime		    "Ts"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Albedo"
		    Ports		    [2, 1, 1]
		    Position		    [210, 132, 330, 203]
		    TreatAsAtomicUnit	    off
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    System {
		    Name		    "Albedo"
		    Location		    [486, 695, 906, 947]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "r_sat_ecef"
		    Position		    [65, 98, 95, 112]
		    BackgroundColor	    "yellow"
		    Port		    "1"
		    IconDisplay		    "Port number"
		    PortDimensions	    "3"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "r_sun_ecef"
		    Position		    [120, 118, 150, 132]
		    BackgroundColor	    "yellow"
		    Port		    "2"
		    IconDisplay		    "Port number"
		    PortDimensions	    "3"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [320, 40, 340, 60]
		    StatesWhenEnabling	    "reset"
		    }
		    Block {
		    BlockType		    MATLABFcn
		    Name		    "AlbedoFcn"
		    Position		    [220, 100, 280, 130]
		    MATLABFcn		    "albedo_onboard_wrapper(u(1:3),u(4"
":6),eprdata,redfac)"
		    OutputDimensions	    "floor([180 288]./redfac)"
		    OutputSignalType	    "real"
		    Output1D		    off
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [2, 1]
		    Position		    [185, 96, 190, 134]
		    ShowName		    off
		    Inputs		    "2"
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "a"
		    Position		    [315, 108, 345, 122]
		    BackgroundColor	    "darkGreen"
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "AlbedoFcn"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "r_sat_ecef"
		    SrcPort		    1
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "AlbedoFcn"
		    SrcPort		    1
		    DstBlock		    "a"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "r_sun_ecef"
		    SrcPort		    1
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "On"
		    Position		    [242, 90, 298, 105]
		    Orientation		    "down"
		    NamePlacement	    "alternate"
		    ShowName		    off
		    Value		    "enable"
		    }
		    Block {
		    BlockType		    ZeroOrderHold
		    Name		    "Zero-Order\nHold1"
		    Position		    [160, 176, 180, 194]
		    ShowName		    off
		    SampleTime		    "Ts"
		    }
		    Block {
		    BlockType		    ZeroOrderHold
		    Name		    "Zero-Order\nHold2"
		    Position		    [160, 141, 180, 159]
		    ShowName		    off
		    SampleTime		    "Ts"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "a"
		    Position		    [365, 163, 395, 177]
		    BackgroundColor	    "darkGreen"
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Zero-Order\nHold1"
		    SrcPort		    1
		    DstBlock		    "Albedo"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Zero-Order\nHold2"
		    SrcPort		    1
		    DstBlock		    "Albedo"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "r_sun_ecef"
		    SrcPort		    1
		    DstBlock		    "Zero-Order\nHold1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Albedo"
		    SrcPort		    1
		    DstBlock		    "a"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "r_sat_ecef"
		    SrcPort		    1
		    DstBlock		    "Zero-Order\nHold2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "On"
		    SrcPort		    1
		    DstBlock		    "Albedo"
		    DstPort		    enable
		    }
		    }
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Quaternion inverter1"
		    Ports		    [1, 1]
		    Position		    [135, 154, 235, 196]
		    SourceBlock		    "components_lib/Math utilities/Qua"
"ternion operations/Quaternion inverter"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Rotation of q1 by q2"
		    Ports		    [2, 1]
		    Position		    [305, 164, 390, 206]
		    SourceBlock		    "components_lib/Math utilities/Qua"
"ternion operations/Rotation of q1 by q2"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    Ports		    [2, 1]
		    Position		    [670, 105, 690, 125]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "|+-"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Vector rotation by q4"
		    Ports		    [2, 1]
		    Position		    [765, 84, 865, 126]
		    SourceBlock		    "components_lib/Math utilities/Qua"
"ternion operations/Vector rotation by q"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Zenith to nadir "
		    Position		    [335, 115, 365, 145]
		    Gain		    "-1"
		    ParameterDataTypeMode   "Inherit via internal rule"
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Albedo vector (I)"
		    Position		    [915, 98, 945, 112]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Earth -> Sun vector (ECEF)"
		    SrcPort		    1
		    DstBlock		    "Earth Albedo\nModel"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Zenith vector (ECEF)"
		    SrcPort		    1
		    Points		    [60, 0]
		    Branch {
		    Points		    [0, 70]
		    DstBlock		    "Zenith to nadir "
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Earth Albedo\nModel"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Vector rotation by q4"
		    SrcPort		    1
		    DstBlock		    "Albedo vector (I)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "q(I->E)"
		    SrcPort		    1
		    Points		    [155, 0; 0, -40]
		    DstBlock		    "Rotation of q1 by q2"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "q(I->S)"
		    SrcPort		    1
		    DstBlock		    "Quaternion inverter1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Earth Albedo\nModel"
		    SrcPort		    1
		    DstBlock		    "Albedo projection"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Zenith to nadir "
		    SrcPort		    1
		    DstBlock		    "Albedo projection"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Quaternion inverter1"
		    SrcPort		    1
		    Points		    [0, 0; 35, 0]
		    Branch {
		    DstBlock		    "Rotation of q1 by q2"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 95; 455, 0; 0, -175]
		    DstBlock		    "Vector rotation by q4"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Rotation of q1 by q2"
		    SrcPort		    1
		    DstBlock		    "Albedo projection"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Albedo projection"
		    SrcPort		    1
		    DstBlock		    "Demux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    2
		    Points		    [45, 0]
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    DstBlock		    "Vector rotation by q4"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Albedo vector (I)"
		    Position		    [550, 153, 580, 167]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "On1"
		    SrcPort		    1
		    DstBlock		    "cos dependent albedo"
		    DstPort		    enable
		    }
		    Line {
		    SrcBlock		    "fov matrix albedo"
		    SrcPort		    1
		    Points		    [70, 0]
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "cos dependent albedo"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "On"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "fov matrix albedo"
		    DstPort		    enable
		    }
		    Line {
		    SrcBlock		    "Zenith vector (ECEF)"
		    SrcPort		    1
		    Points		    [0, 0; 90, 0]
		    Branch {
		    Points		    [0, 175]
		    DstBlock		    "fov matrix albedo"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "cos dependent albedo"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Earth -> Sun vector (ECEF)"
		    SrcPort		    1
		    Points		    [0, 0; 65, 0]
		    Branch {
		    Points		    [0, 295]
		    DstBlock		    "fov matrix albedo"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "cos dependent albedo"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "q(I->E)"
		    SrcPort		    1
		    DstBlock		    "fov matrix albedo"
		    DstPort		    4
		    }
		    Line {
		    SrcBlock		    "q(I->S)"
		    SrcPort		    1
		    DstBlock		    "fov matrix albedo"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "Albedo vector (I)"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Reference
		  Name			  "B to unit vector"
		  Ports			  [1, 1]
		  Position		  [655, 39, 755, 81]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Eclipse model"
		  Ports			  [2, 1]
		  Position		  [505, 177, 660, 273]
		  SourceBlock		  "components_lib/ADS/On-board model/E"
"clipse model"
		  SourceType		  "Unknown"
		  ShowPortLabels	  "on"
		  r_e			  "6371010"
		  theta_e		  "65"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Ephemeris on-board"
		  Ports			  [1, 2]
		  Position		  [260, 80, 420, 160]
		  SourceBlock		  "components_lib/ADS/On-board model/E"
"phemeris on-board"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Orbit and Magnetic field models"
		  Ports			  [2, 2]
		  Position		  [475, 40, 635, 120]
		  SourceBlock		  "components_lib/ADS/On-board model/O"
"rbit and Magnetic field models"
		  SourceType		  "Unknown"
		  ShowPortLabels	  "on"
		  tle_type		  "Oersted TLE"
		}
		Block {
		  BlockType		  Reference
		  Name			  "P_S - P_A to unit vector"
		  Ports			  [1, 1]
		  Position		  [455, 659, 555, 701]
		  NamePlacement		  "alternate"
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [2, 1]
		  Position		  [367, 570, 458, 590]
		  Orientation		  "down"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Reference
		  Name			  "R_sas flux to unit vector"
		  Ports			  [1, 1]
		  Position		  [465, 729, 565, 771]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "R_sas to unit vector"
		  Ports			  [1, 1]
		  Position		  [270, 494, 370, 536]
		  NamePlacement		  "alternate"
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Solar flux [W/m^2]\n(1366.9)\n"
		  Position		  [400, 490, 470, 530]
		  Orientation		  "down"
		  Value			  "sun_flux"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [210, 505, 230, 525]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|-+"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum2"
		  Ports			  [2, 1]
		  Position		  [405, 625, 425, 645]
		  Orientation		  "down"
		  NamePlacement		  "alternate"
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|++"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Reference
		  Name			  "Sun vector rotation "
		  Ports			  [2, 1]
		  Position		  [310, 324, 410, 366]
		  SourceBlock		  "components_lib/Math utilities/Quate"
"rnion operations/Vector rotation by q"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  Position		  [735, 695, 765, 725]
		  Criteria		  "u2 ~= 0"
		  InputSameDT		  off
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Reference
		  Name			  "Zenith vector rotation"
		  Ports			  [2, 1]
		  Position		  [310, 394, 410, 436]
		  SourceBlock		  "components_lib/Math utilities/Quate"
"rnion operations/Vector rotation by q"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Constant
		  Name			  "albedo enabled"
		  Position		  [595, 694, 685, 726]
		  Value			  "alb_enabled"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Mag unit vector (I)"
		  Position		  [795, 53, 825, 67]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Sun unit vector (I)"
		  Position		  [815, 703, 845, 717]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Eclipse: 1=true, 0=false"
		  Position		  [715, 218, 745, 232]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Albedo vector (I)"
		  Position		  [965, 518, 995, 532]
		  Port			  "4"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "albedo enabled"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "Sun unit vector (I)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum2"
		  SrcPort		  1
		  Points		  [0, 30]
		  DstBlock		  "P_S - P_A to unit vector"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  Points		  [0, 5]
		  Branch {
		    DstBlock		    "Sum2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [-75, 0; 0, 150]
		    DstBlock		    "R_sas flux to unit vector"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "R_sas to unit vector"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Solar flux [W/m^2]\n(1366.9)\n"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "R_sas to unit vector"
		  SrcPort		  1
		  Points		  [15, 0]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Ephemeris on-board"
		  SrcPort		  2
		  Points		  [5, 0]
		  Branch {
		    Points		    [30, 0; 0, 60]
		    Branch {
		    Points		    [0, 100; -185, 0; 0, 55]
		    DstBlock		    "Sun vector rotation "
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Eclipse model"
		    DstPort		    1
		    }
		  }
		  Branch {
		    Points		    [0, 70; -285, 0; 0, 330]
		    DstBlock		    "Sum"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Sun vector rotation "
		  SrcPort		  1
		  Points		  [60, 0]
		  DstBlock		  "Albedo model onboard"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Zenith vector rotation"
		  SrcPort		  1
		  Points		  [40, 0; 0, -50]
		  DstBlock		  "Albedo model onboard"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Orbit and Magnetic field models"
		  SrcPort		  2
		  Points		  [165, 0; 0, 190]
		  Branch {
		    Points		    [0, 180; -645, 0]
		    Branch {
		    Points		    [0, 45]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -45]
		    DstBlock		    "Zenith vector rotation"
		    DstPort		    2
		    }
		  }
		  Branch {
		    Points		    [-315, 0]
		    DstBlock		    "Eclipse model"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Eclipse model"
		  SrcPort		  1
		  DstBlock		  "Eclipse: 1=true, 0=false"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Ephemeris on-board"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    Points		    [0, 165; -210, 0; 0, 70]
		    Branch {
		    DstBlock		    "Sun vector rotation "
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 70]
		    Branch {
		    DstBlock		    "Zenith vector rotation"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 45; 245, 0]
		    DstBlock		    "Albedo model onboard"
		    DstPort		    4
		    }
		    }
		  }
		  Branch {
		    DstBlock		    "Orbit and Magnetic field models"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "sim_time (JD)"
		  SrcPort		  1
		  Points		  [0, 0; 25, 0]
		  Branch {
		    DstBlock		    "Orbit and Magnetic field models"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 60]
		    DstBlock		    "Ephemeris on-board"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Orbit and Magnetic field models"
		  SrcPort		  1
		  DstBlock		  "B to unit vector"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "B to unit vector"
		  SrcPort		  1
		  DstBlock		  "Mag unit vector (I)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "P_S - P_A to unit vector"
		  SrcPort		  1
		  Points		  [160, 0]
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "R_sas flux to unit vector"
		  SrcPort		  1
		  Points		  [150, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Estimated q(I->S)"
		  SrcPort		  1
		  Points		  [400, 0]
		  DstBlock		  "Albedo model onboard"
		  DstPort		  3
		}
		Line {
		  Name			  "alb_ob"
		  Labels		  [0, 0]
		  SrcBlock		  "Albedo model onboard"
		  SrcPort		  1
		  Points		  [210, 0; 0, 140]
		  Branch {
		    DstBlock		    "Albedo vector (I)"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 110]
		    DstBlock		    "Sum2"
		    DstPort		    2
		  }
		}
		Annotation {
		  Name			  "P_S - P_A"
		  Position		  [399, 700]
		}
		Annotation {
		  Name			  "R_sas"
		  Position		  [252, 502]
		}
		Annotation {
		  Name			  "R_s"
		  Position		  [174, 534]
		}
		Annotation {
		  Name			  "R_sa"
		  Position		  [185, 477]
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Albedo emulation model"
	      Ports		      [3, 1]
	      Position		      [590, 242, 840, 428]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Albedo emulation model"
		Location		[132, 129, 1333, 810]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"portrait"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Sunlight vector(I)"
		  Position		  [125, 163, 155, 177]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Nadir vector (I)"
		  Position		  [125, 88, 155, 102]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "q(I>E)"
		  Position		  [25, 143, 55, 157]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Reference
		  Name			  "Earth Albedo\nModel1"
		  Ports			  [2, 1]
		  Position		  [385, 96, 475, 149]
		  SourceBlock		  "albedo_lib/Earth Albedo\nModel"
		  SourceType		  "Earth Albedo Model"
		  ShowPortLabels	  "on"
		  eprdata		  "mean_epr"
		  redfac		  "1"
		  Ts			  "60"
		  enable		  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Vector rotation by q1"
		  Ports			  [2, 1]
		  Position		  [220, 64, 285, 106]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/Vector rotation by q"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Vector rotation by q2"
		  Ports			  [2, 1]
		  Position		  [220, 139, 285, 181]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/Vector rotation by q"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Reflectivity matrix"
		  Position		  [580, 118, 610, 132]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Vector rotation by q1"
		  SrcPort		  1
		  Points		  [40, 0; 0, 25]
		  DstBlock		  "Earth Albedo\nModel1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Vector rotation by q2"
		  SrcPort		  1
		  Points		  [40, 0; 0, -25]
		  DstBlock		  "Earth Albedo\nModel1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Earth Albedo\nModel1"
		  SrcPort		  1
		  DstBlock		  "Reflectivity matrix"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Nadir vector (I)"
		  SrcPort		  1
		  DstBlock		  "Vector rotation by q1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "q(I>E)"
		  SrcPort		  1
		  Points		  [0, 0; 20, 0]
		  Branch {
		    Points		    [0, -75]
		    DstBlock		    "Vector rotation by q1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Vector rotation by q2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Sunlight vector(I)"
		  SrcPort		  1
		  DstBlock		  "Vector rotation by q2"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Albedo model onboard"
	      Ports		      [4, 1]
	      Position		      [310, 23, 560, 212]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      MaskPromptString	      "Sun flux (mean: 1366.9)|Choose used ref"
"lectivity data:|Use reflectivity matrix (blackbox)"
	      MaskStyleString	      "edit,popup(FOV cosine dep. reflectivity"
" table|FOV meaned reflectivity table|Polynomial fit to latitude meaned reflec"
"tivity|Constant reflectivity of 30%),checkbox"
	      MaskTunableValueString  "off,on,on"
	      MaskCallbackString      "||"
	      MaskEnableString	      "on,on,on"
	      MaskVisibilityString    "on,on,on"
	      MaskToolTipString	      "on,on,on"
	      MaskVarAliasString      ",,"
	      MaskVariables	      "sun_flux=@1;matrix=@2;enable=@3;"
	      MaskInitialization      "if matrix == 1\n    mrm = load('fov_alb"
"edo_matrix.mat');\n    mrm = mrm.mrm;  \nelseif matrix == 2\n    mrm = load('"
"fov_meaned_albedo_matrix.mat');\n    mrm = mrm.mrm;\nelseif matrix == 3\n    "
"mrm = load('fov_albedo_polynomial_matrix.mat');\n    mrm = mrm.mrm;\nelseif m"
"atrix == 4\n    mrm = ones(180,288).*0.30;\nend\n"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "1366.9|FOV cosine dep. reflectivity tab"
"le|off"
	      MaskTabNameString	      ",,"
	      System {
		Name			"Albedo model onboard"
		Location		[333, 158, 1001, 717]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"portrait"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Earth -> Sun vector (ECEF)"
		  Position		  [95, 113, 125, 127]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Zenith vector (ECEF)"
		  Position		  [95, 193, 125, 207]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "q(I->S)"
		  Position		  [95, 448, 125, 462]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "q(I->E)"
		  Position		  [95, 488, 125, 502]
		  Port			  "4"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Constant
		  Name			  "On"
		  Position		  [302, 310, 358, 325]
		  Orientation		  "down"
		  NamePlacement		  "alternate"
		  ShowName		  off
		  Value			  "enable"
		}
		Block {
		  BlockType		  Constant
		  Name			  "On1"
		  Position		  [302, 40, 358, 55]
		  Orientation		  "down"
		  NamePlacement		  "alternate"
		  ShowName		  off
		  Value			  "~enable"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [480, 150, 500, 170]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|++"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "cos dependent albedo"
		  Ports			  [2, 1, 1]
		  Position		  [250, 81, 415, 239]
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  System {
		    Name		    "cos dependent albedo"
		    Location		    [84, 168, 1027, 615]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Earth -> Sun vector (ECEF)"
		    Position		    [65, 53, 95, 67]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Zenith vector (ECEF)"
		    Position		    [70, 213, 100, 227]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [520, 55, 540, 75]
		    StatesWhenEnabling	    "reset"
		    }
		    Block {
		    BlockType		    Abs
		    Name		    "Abs"
		    Position		    [510, 185, 540, 215]
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Dot Product"
		    Ports		    [2, 1]
		    Position		    [435, 162, 465, 238]
		    SourceBlock		    "simulink/Math\nOperations/Dot Pro"
"duct"
		    SourceType		    "Dot Product"
		    InputSameDT		    "on"
		    OutputDataTypeScalingMode "Inherit via internal rule"
		    OutDataType		    "sfix(16)"
		    OutScaling		    "2^-10"
		    LockScale		    "off"
		    RndMeth		    "Floor"
		    DoSatur		    "off"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Mean solar flux\n(1366.9 [W/m^2])"
		    Position		    [235, 114, 310, 146]
		    Value		    "sun_flux"
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product"
		    Ports		    [2, 1]
		    Position		    [345, 24, 375, 166]
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product1"
		    Ports		    [2, 1]
		    Position		    [580, 190, 610, 230]
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Product
		    Name		    "Product2"
		    Ports		    [2, 1]
		    Position		    [660, 200, 690, 240]
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Sun vector \nto unit vector"
		    Ports		    [1, 1]
		    Position		    [185, 39, 285, 81]
		    SourceBlock		    "components_lib/Math utilities/Vec"
"tor operations/to unit vector"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Zentih vector\nto unit vector"
		    Ports		    [1, 1]
		    Position		    [185, 199, 285, 241]
		    SourceBlock		    "components_lib/Math utilities/Vec"
"tor operations/to unit vector"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    MATLABFcn
		    Name		    "zenith2ref(u, mrm)"
		    Position		    [350, 280, 410, 310]
		    MATLABFcn		    "zenith2ref(u, mrm)*2"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Albedo vector (I)"
		    Position		    [740, 213, 770, 227]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Product2"
		    SrcPort		    1
		    DstBlock		    "Albedo vector (I)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Product1"
		    SrcPort		    1
		    DstBlock		    "Product2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Abs"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "Product1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Dot Product"
		    SrcPort		    1
		    DstBlock		    "Abs"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sun vector \nto unit vector"
		    SrcPort		    1
		    DstBlock		    "Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mean solar flux\n(1366.9 [W/m^2])"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "Product"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Product"
		    SrcPort		    1
		    Points		    [20, 0; 0, 85]
		    DstBlock		    "Dot Product"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "zenith2ref(u, mrm)"
		    SrcPort		    1
		    Points		    [150, 0]
		    DstBlock		    "Product1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Zentih vector\nto unit vector"
		    SrcPort		    1
		    Points		    [0, 0; 30, 0]
		    Branch {
		    Points		    [0, 75]
		    Branch {
		    Points		    [0, 75; 310, 0; 0, -140]
		    DstBlock		    "Product2"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "zenith2ref(u, mrm)"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "Dot Product"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Earth -> Sun vector (ECEF)"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "Sun vector \nto unit vector"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Zenith vector (ECEF)"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "Zentih vector\nto unit vector"
		    DstPort		    1
		    }
		    Annotation {
		    Name		    "Projection onto\nthe zenith vecto"
"r"
		    Position		    [450, 140]
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "fov matrix albedo"
		  Ports			  [4, 1, 1]
		  Position		  [250, 356, 415, 514]
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  System {
		    Name		    "fov matrix albedo"
		    Location		    [60, 503, 1204, 971]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Zenith vector (ECEF)"
		    Position		    [60, 53, 90, 67]
		    NamePlacement	    "alternate"
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Earth -> Sun vector (ECEF)"
		    Position		    [60, 78, 90, 92]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "q(I->S)"
		    Position		    [60, 168, 90, 182]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "q(I->E)"
		    Position		    [60, 228, 90, 242]
		    Port		    "4"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [675, 30, 695, 50]
		    StatesWhenEnabling	    "reset"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Albedo projection"
		    Ports		    [3, 1]
		    Position		    [440, 50, 590, 210]
		    SourceBlock		    "components_lib/ADS/On-board Senso"
"r model/Albedo projection"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    Demux
		    Name		    "Demux"
		    Ports		    [1, 2]
		    Position		    [625, 100, 630, 160]
		    BackgroundColor	    "black"
		    ShowName		    off
		    Outputs		    "2"
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Earth Albedo\nModel"
		    Ports		    [2, 1]
		    Position		    [205, 46, 295, 99]
		    TreatAsAtomicUnit	    on
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    MaskType		    "Earth Albedo Model"
		    MaskDescription	    "Calculate Earth Albedo using stat"
"ic data from the EP/TOMS spacecraft."
		    MaskHelp		    "<b>Input</b><br>\nSat: Vector to "
"satellite in ECEF [m]<br>\nSun: Vector to the Sun in ECEF [m]<p>\n<b>Paramete"
"rs</b><br>\nReflectivity Data (EPR Struct): TOMS Reflectivity data [E.U].<br>"
"\nReduction factor: Reduce data resolution by this factor.<br>\nSample Time ("
"-1 for inherited): Sample Time [s]. The block cannot inherit continuous sampl"
"e time.<br>\nEnable: Enable or disable albedo calculation<p>\n<b>Output</b><b"
"r>\nAlbedo: Fraction of solar irradiance received on the satellite. The incom"
"ing solar irradiance is 1366.5 W/m^2<p>\n"
		    MaskPromptString	    "Reflectivity Data (EPR Struct):|R"
"eduction factor:|Sample Time (-1 for inherited):|Enable:"
		    MaskStyleString	    "edit,edit,edit,checkbox"
		    MaskTunableValueString  "on,on,on,on"
		    MaskCallbackString	    "|||enable = strcmp(get_param(gcb,"
"'enable'),'on');"
		    MaskEnableString	    "on,on,on,on"
		    MaskVisibilityString    "on,on,on,on"
		    MaskToolTipString	    "on,on,on,on"
		    MaskVarAliasString	    ",,,"
		    MaskVariables	    "eprdata=@1;redfac=@2;Ts=@3;enable"
"=@4;"
		    MaskInitialization	    "global sy;\nglobal sx;\nsy = roun"
"d(180/redfac);\nsx = round(288/redfac);\n"
		    MaskDisplay		    "image(imread('private/albedoicon."
"png'));\nport_label('output', 1, 'Albedo');\nport_label('input', 1, 'Sat');\n"
"port_label('input', 2, 'Sun');"
		    MaskIconFrame	    on
		    MaskIconOpaque	    on
		    MaskIconRotate	    "none"
		    MaskIconUnits	    "autoscale"
		    MaskValueString	    "load('lib/space_environment_emula"
"tion/albedo/toolbox/epr_data/2003/ga030101-031231')|10|1|on"
		    MaskTabNameString	    ",,,"
		    System {
		    Name		    "Earth Albedo\nModel"
		    Location		    [359, 481, 916, 781]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "r_sat_ecef"
		    Position		    [55, 143, 85, 157]
		    BackgroundColor	    "yellow"
		    Port		    "1"
		    IconDisplay		    "Port number"
		    SampleTime		    "Ts"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "r_sun_ecef"
		    Position		    [100, 178, 130, 192]
		    BackgroundColor	    "yellow"
		    Port		    "2"
		    IconDisplay		    "Port number"
		    SampleTime		    "Ts"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Albedo"
		    Ports		    [2, 1, 1]
		    Position		    [210, 132, 330, 203]
		    TreatAsAtomicUnit	    off
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    System {
		    Name		    "Albedo"
		    Location		    [486, 695, 906, 947]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "r_sat_ecef"
		    Position		    [65, 98, 95, 112]
		    BackgroundColor	    "yellow"
		    Port		    "1"
		    IconDisplay		    "Port number"
		    PortDimensions	    "3"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "r_sun_ecef"
		    Position		    [120, 118, 150, 132]
		    BackgroundColor	    "yellow"
		    Port		    "2"
		    IconDisplay		    "Port number"
		    PortDimensions	    "3"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [320, 40, 340, 60]
		    StatesWhenEnabling	    "reset"
		    }
		    Block {
		    BlockType		    MATLABFcn
		    Name		    "AlbedoFcn"
		    Position		    [220, 100, 280, 130]
		    MATLABFcn		    "albedo_onboard_wrapper(u(1:3),u(4"
":6),eprdata,redfac)"
		    OutputDimensions	    "floor([180 288]./redfac)"
		    OutputSignalType	    "real"
		    Output1D		    off
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [2, 1]
		    Position		    [185, 96, 190, 134]
		    ShowName		    off
		    Inputs		    "2"
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "a"
		    Position		    [315, 108, 345, 122]
		    BackgroundColor	    "darkGreen"
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    OutputWhenDisabled	    "reset"
		    InitialOutput	    "0"
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "AlbedoFcn"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "r_sat_ecef"
		    SrcPort		    1
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "AlbedoFcn"
		    SrcPort		    1
		    DstBlock		    "a"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "r_sun_ecef"
		    SrcPort		    1
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    }
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "On"
		    Position		    [242, 90, 298, 105]
		    Orientation		    "down"
		    NamePlacement	    "alternate"
		    ShowName		    off
		    Value		    "enable"
		    }
		    Block {
		    BlockType		    ZeroOrderHold
		    Name		    "Zero-Order\nHold1"
		    Position		    [160, 176, 180, 194]
		    ShowName		    off
		    SampleTime		    "Ts"
		    }
		    Block {
		    BlockType		    ZeroOrderHold
		    Name		    "Zero-Order\nHold2"
		    Position		    [160, 141, 180, 159]
		    ShowName		    off
		    SampleTime		    "Ts"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "a"
		    Position		    [365, 163, 395, 177]
		    BackgroundColor	    "darkGreen"
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Zero-Order\nHold1"
		    SrcPort		    1
		    DstBlock		    "Albedo"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Zero-Order\nHold2"
		    SrcPort		    1
		    DstBlock		    "Albedo"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "r_sun_ecef"
		    SrcPort		    1
		    DstBlock		    "Zero-Order\nHold1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Albedo"
		    SrcPort		    1
		    DstBlock		    "a"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "r_sat_ecef"
		    SrcPort		    1
		    DstBlock		    "Zero-Order\nHold2"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "On"
		    SrcPort		    1
		    DstBlock		    "Albedo"
		    DstPort		    enable
		    }
		    }
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Quaternion inverter1"
		    Ports		    [1, 1]
		    Position		    [135, 154, 235, 196]
		    SourceBlock		    "components_lib/Math utilities/Qua"
"ternion operations/Quaternion inverter"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Rotation of q1 by q2"
		    Ports		    [2, 1]
		    Position		    [305, 164, 390, 206]
		    SourceBlock		    "components_lib/Math utilities/Qua"
"ternion operations/Rotation of q1 by q2"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    Ports		    [2, 1]
		    Position		    [670, 105, 690, 125]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "|+-"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Vector rotation by q4"
		    Ports		    [2, 1]
		    Position		    [765, 84, 865, 126]
		    SourceBlock		    "components_lib/Math utilities/Qua"
"ternion operations/Vector rotation by q"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Zenith to nadir "
		    Position		    [335, 115, 365, 145]
		    Gain		    "-1"
		    ParameterDataTypeMode   "Inherit via internal rule"
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Albedo vector (I)"
		    Position		    [915, 98, 945, 112]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Earth -> Sun vector (ECEF)"
		    SrcPort		    1
		    DstBlock		    "Earth Albedo\nModel"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Zenith vector (ECEF)"
		    SrcPort		    1
		    Points		    [60, 0]
		    Branch {
		    Points		    [0, 70]
		    DstBlock		    "Zenith to nadir "
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Earth Albedo\nModel"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Vector rotation by q4"
		    SrcPort		    1
		    DstBlock		    "Albedo vector (I)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "q(I->E)"
		    SrcPort		    1
		    Points		    [155, 0; 0, -40]
		    DstBlock		    "Rotation of q1 by q2"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "q(I->S)"
		    SrcPort		    1
		    DstBlock		    "Quaternion inverter1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Earth Albedo\nModel"
		    SrcPort		    1
		    DstBlock		    "Albedo projection"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Zenith to nadir "
		    SrcPort		    1
		    DstBlock		    "Albedo projection"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Quaternion inverter1"
		    SrcPort		    1
		    Points		    [0, 0; 35, 0]
		    Branch {
		    DstBlock		    "Rotation of q1 by q2"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 95; 455, 0; 0, -175]
		    DstBlock		    "Vector rotation by q4"
		    DstPort		    1
		    }
		    }
		    Line {
		    SrcBlock		    "Rotation of q1 by q2"
		    SrcPort		    1
		    DstBlock		    "Albedo projection"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Albedo projection"
		    SrcPort		    1
		    DstBlock		    "Demux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    2
		    Points		    [45, 0]
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    DstBlock		    "Vector rotation by q4"
		    DstPort		    2
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Albedo vector (I)"
		  Position		  [550, 153, 580, 167]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "On1"
		  SrcPort		  1
		  DstBlock		  "cos dependent albedo"
		  DstPort		  enable
		}
		Line {
		  SrcBlock		  "fov matrix albedo"
		  SrcPort		  1
		  Points		  [70, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "cos dependent albedo"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "On"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "fov matrix albedo"
		  DstPort		  enable
		}
		Line {
		  SrcBlock		  "Zenith vector (ECEF)"
		  SrcPort		  1
		  Points		  [0, 0; 90, 0]
		  Branch {
		    Points		    [0, 175]
		    DstBlock		    "fov matrix albedo"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "cos dependent albedo"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Earth -> Sun vector (ECEF)"
		  SrcPort		  1
		  Points		  [0, 0; 65, 0]
		  Branch {
		    Points		    [0, 295]
		    DstBlock		    "fov matrix albedo"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "cos dependent albedo"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "q(I->E)"
		  SrcPort		  1
		  DstBlock		  "fov matrix albedo"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "q(I->S)"
		  SrcPort		  1
		  DstBlock		  "fov matrix albedo"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Albedo vector (I)"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Albedo projection"
	      Ports		      [3, 1]
	      Position		      [590, 22, 840, 208]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Albedo projection"
		Location		[376, 80, 1076, 734]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"portrait"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Reflectivity matrix"
		  Position		  [370, 33, 400, 47]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Nadir (E)"
		  Position		  [515, 63, 545, 77]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		  Port {
		    PortNumber		    1
		    Name		    "nadir"
		    PropagatedSignals	    "nadir (E)"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		  }
		}
		Block {
		  BlockType		  Inport
		  Name			  "q(S->E)"
		  Position		  [40, 108, 70, 122]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux7"
		  Ports			  [4, 1]
		  Position		  [600, 25, 605, 145]
		  ShowName		  off
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Reshape"
		  Ports			  [1, 1]
		  Position		  [465, 28, 495, 52]
		  SourceBlock		  "simulink/Math\nOperations/Reshape"
		  SourceType		  "Reshape"
		  OutputDimensionality	  "1-D array"
		  OutputDimensions	  "[1,1]"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Vector rotation by q"
		  Ports			  [2, 1]
		  Position		  [230, 64, 330, 131]
		  SourceBlock		  "components_lib/Math utilities/Quate"
"rnion operations/Vector rotation by q"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Vector rotation by q1"
		  Ports			  [2, 1]
		  Position		  [230, 159, 330, 226]
		  SourceBlock		  "components_lib/Math utilities/Quate"
"rnion operations/Vector rotation by q"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Constant
		  Name			  "X+ vector (SC)"
		  Position		  [150, 96, 185, 134]
		  Value			  "[1 0 0]"
		}
		Block {
		  BlockType		  MATLABFcn
		  Name			  "ss_proj"
		  Position		  [645, 70, 705, 100]
		  MATLABFcn		  "ss_proj3(u(length(u)-8:length(u)-6)"
",u(length(u)-5:length(u)-3),u(length(u)-2:length(u)),reshape(u(1:length(u)-9)"
",round([180,288]/sqrt(51840/(length(u)-9)))))"
		}
		Block {
		  BlockType		  Constant
		  Name			  "y+ vector (SC)"
		  Position		  [155, 191, 190, 229]
		  Value			  "[0 1 0]"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Albedo flux [W/m^2]"
		  Position		  [760, 78, 790, 92]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "ss_proj"
		  SrcPort		  1
		  DstBlock		  "Albedo flux [W/m^2]"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux7"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "ss_proj"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Reshape"
		  SrcPort		  1
		  DstBlock		  "Mux7"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Vector rotation by q"
		  SrcPort		  1
		  DstBlock		  "Mux7"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Vector rotation by q1"
		  SrcPort		  1
		  Points		  [175, 0; 0, -65]
		  DstBlock		  "Mux7"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "y+ vector (SC)"
		  SrcPort		  1
		  DstBlock		  "Vector rotation by q1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "X+ vector (SC)"
		  SrcPort		  1
		  DstBlock		  "Vector rotation by q"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "q(S->E)"
		  SrcPort		  1
		  Points		  [0, 0; 25, 0]
		  Branch {
		    Points		    [0, 60]
		    DstBlock		    "Vector rotation by q1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "Vector rotation by q"
		    DstPort		    1
		  }
		}
		Line {
		  Name			  "nadir"
		  Labels		  [0, 0]
		  SrcBlock		  "Nadir (E)"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Mux7"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Reflectivity matrix"
		  SrcPort		  1
		  DstBlock		  "Reshape"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Eclipse model"
	      Ports		      [2, 1]
	      Position		      [590, 446, 840, 524]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      MaskPromptString	      "Radius of Earth [m]|Max. angle of theta"
" [deg] (eclipse: theta > r_earth/norm(R_SA))"
	      MaskStyleString	      "edit,edit"
	      MaskTunableValueString  "on,on"
	      MaskCallbackString      "|"
	      MaskEnableString	      "on,on"
	      MaskVisibilityString    "on,on"
	      MaskToolTipString	      "on,on"
	      MaskVarAliasString      ","
	      MaskVariables	      "r_e=@1;theta_e=@2;"
	      MaskDisplay	      "image(imread('eclipse.jpg'));\ncolor('w"
"hite'); \nport_label('input', 1, 'Sun vector (I)');\nport_label('input', 2, '"
"Satellite vector (I)');\nport_label('output', 1, 'Eclipse');\nfprintf('1=true"
",\\n 0=false')\n\n"
	      MaskIconFrame	      on
	      MaskIconOpaque	      off
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "6371010|65"
	      MaskTabNameString	      ","
	      System {
		Name			"Eclipse model"
		Location		[215, 80, 977, 660]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"portrait"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Sun vector (I)"
		  Position		  [25, 43, 55, 57]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Satellite (I)"
		  Position		  [25, 143, 55, 157]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [365, 25, 395, 55]
		  Value			  "pi"
		}
		Block {
		  BlockType		  Product
		  Name			  "Divide"
		  Ports			  [2, 1]
		  Position		  [200, 242, 215, 353]
		  Inputs		  "*/"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  OutScaling		  "2^-10"
		  RndMeth		  "Floor"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product"
		  Ports			  [2, 1]
		  Position		  [275, 82, 305, 113]
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product1"
		  Ports			  [2, 1]
		  Position		  [90, 307, 120, 338]
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Earth radius"
		  Position		  [115, 255, 175, 285]
		  Value			  "r_e"
		}
		Block {
		  BlockType		  Constant
		  Name			  "False"
		  Position		  [475, 170, 505, 200]
		  Value			  "0"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Manual Switch"
		  Ports			  [2, 1]
		  Position		  [355, 212, 385, 248]
		  ShowName		  off
		  SourceBlock		  "simulink/Signal\nRouting/Manual Swi"
"tch"
		  SourceType		  "Manual Switch"
		  ShowPortLabels	  "on"
		  sw			  "0"
		  action		  "0"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction"
		  Ports			  [1, 1]
		  Position		  [145, 310, 175, 340]
		  Operator		  "sqrt"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Max angle"
		  Position		  [215, 206, 300, 234]
		  Value			  "theta_e/180*pi"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Satellite unit vector"
		  Ports			  [1, 1]
		  Position		  [100, 129, 200, 171]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [445, 90, 465, 110]
		  Orientation		  "down"
		  NamePlacement		  "alternate"
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "-+|"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		  Port {
		    PortNumber		    1
		    Name		    "theta"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		  }
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [2, 1]
		  Position		  [445, 220, 465, 240]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "+-|"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Reference
		  Name			  "Sun unit vector"
		  Ports			  [1, 1]
		  Position		  [100, 29, 200, 71]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  Position		  [535, 203, 560, 257]
		  InputSameDT		  off
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trigonometric\nFunction"
		  Ports			  [1, 1]
		  Position		  [275, 285, 305, 315]
		  Operator		  "asin"
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trigonometric\nFunction1"
		  Ports			  [1, 1]
		  Position		  [365, 85, 395, 115]
		  Operator		  "acos"
		}
		Block {
		  BlockType		  Constant
		  Name			  "True"
		  Position		  [475, 260, 505, 290]
		}
		Block {
		  BlockType		  Outport
		  Name			  "Eclipse:\n1 = true,\n0 = false"
		  Position		  [615, 223, 645, 237]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		  PortDimensions	  "1"
		}
		Line {
		  SrcBlock		  "Dot Product1"
		  SrcPort		  1
		  DstBlock		  "Math\nFunction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Max angle"
		  SrcPort		  1
		  DstBlock		  "Manual Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Trigonometric\nFunction"
		  SrcPort		  1
		  Points		  [20, 0; 0, -60]
		  DstBlock		  "Manual Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Manual Switch"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  DstBlock		  "Eclipse:\n1 = true,\n0 = false"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "False"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "True"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Switch"
		  DstPort		  2
		}
		Line {
		  Name			  "theta"
		  Labels		  [0, 1]
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [55, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Trigonometric\nFunction1"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Divide"
		  SrcPort		  1
		  DstBlock		  "Trigonometric\nFunction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Math\nFunction"
		  SrcPort		  1
		  DstBlock		  "Divide"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Earth radius"
		  SrcPort		  1
		  DstBlock		  "Divide"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Dot Product"
		  SrcPort		  1
		  DstBlock		  "Trigonometric\nFunction1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Satellite unit vector"
		  SrcPort		  1
		  Points		  [30, 0; 0, -45]
		  DstBlock		  "Dot Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sun unit vector"
		  SrcPort		  1
		  Points		  [30, 0; 0, 40]
		  DstBlock		  "Dot Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Satellite (I)"
		  SrcPort		  1
		  Points		  [0, 0; 15, 0]
		  Branch {
		    Points		    [0, 175]
		    Branch {
		    DstBlock		    "Dot Product1"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Dot Product1"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "Satellite unit vector"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Sun vector (I)"
		  SrcPort		  1
		  DstBlock		  "Sun unit vector"
		  DstPort		  1
		}
		Annotation {
		  Name			  "theta_e"
		  Position		  [402, 221]
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Ephemeris on-board"
	      Ports		      [1, 2]
	      Position		      [310, 241, 560, 319]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Ephemeris on-board"
		Location		[206, 80, 968, 660]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"portrait"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Time t(JD)"
		  Position		  [80, 138, 110, 152]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		  Port {
		    PortNumber		    1
		    Name		    "t"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "ECEF"
		  Ports			  [1, 1]
		  Position		  [215, 209, 315, 251]
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  Port {
		    PortNumber		    1
		    Name		    "q(I -> E)\n"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		  }
		  System {
		    Name		    "ECEF"
		    Location		    [425, 283, 923, 583]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "t(JD)"
		    Position		    [110, 103, 140, 117]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    MATLABFcn
		    Name		    "eci2ecef"
		    Position		    [210, 95, 270, 125]
		    MATLABFcn		    "eci2ecef"
		    OutputDimensions	    "4"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "q(I->E)"
		    Position		    [360, 103, 390, 117]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "eci2ecef"
		    SrcPort		    1
		    DstBlock		    "q(I->E)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "t(JD)"
		    SrcPort		    1
		    DstBlock		    "eci2ecef"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Sun Position"
		  Ports			  [1, 1]
		  Position		  [215, 124, 315, 166]
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  Port {
		    PortNumber		    1
		    Name		    "R_s(I)\n"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		  }
		  System {
		    Name		    "Sun Position"
		    Location		    [212, 93, 974, 673]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "t(JD)"
		    Position		    [130, 133, 160, 147]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    MATLABFcn
		    Name		    "Sun R in ECI"
		    Position		    [235, 125, 295, 155]
		    MATLABFcn		    "sun"
		    OutputDimensions	    "3"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "R_s(I)"
		    Position		    [375, 133, 405, 147]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "t(JD)"
		    SrcPort		    1
		    DstBlock		    "Sun R in ECI"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sun R in ECI"
		    SrcPort		    1
		    DstBlock		    "R_s(I)"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "Earth Rotation q(I->E)"
		  Position		  [440, 223, 470, 237]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Sun Position R_s(I)"
		  Position		  [430, 138, 460, 152]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  Name			  "q(I -> E)\n"
		  Labels		  [0, 0]
		  SrcBlock		  "ECEF"
		  SrcPort		  1
		  DstBlock		  "Earth Rotation q(I->E)"
		  DstPort		  1
		}
		Line {
		  Name			  "t"
		  Labels		  [0, 0; 1, 0]
		  SrcBlock		  "Time t(JD)"
		  SrcPort		  1
		  Points		  [30, 0]
		  Branch {
		    DstBlock		    "Sun Position"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 85]
		    DstBlock		    "ECEF"
		    DstPort		    1
		  }
		}
		Line {
		  Name			  "R_s(I)\n"
		  Labels		  [0, 0]
		  SrcBlock		  "Sun Position"
		  SrcPort		  1
		  DstBlock		  "Sun Position R_s(I)"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Gyros"
	      Ports		      [2, 2]
	      Position		      [310, 652, 560, 728]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      MaskType		      "Parameters for the gyro sensor block"
	      MaskDescription	      "Fill out the parameters for use in the "
"simulation.\nformat of the parameter field: (gyro1 gyro2 gyro3 gyro4 gyro5 gy"
"ro6)\ngyro 1 and gyro 4 are situated on the same axis, but in opposite direct"
"ions etc."
	      MaskPromptString	      "Amplification HW: Op-amp gain () |Ampli"
"fication HW: Op-amp offset (mV)|OBC algorithms: Scale factor (mV/rad/s)|OBC a"
"lgorithms: offset (mV)|OBC algorithms: Scale factor drift (%/K)|OBC algorithm"
"s: Offset drift (mV/K)"
	      MaskStyleString	      "edit,edit,edit,edit,edit,edit"
	      MaskTunableValueString  "on,on,on,on,on,on"
	      MaskCallbackString      "|||||"
	      MaskEnableString	      "on,on,on,on,on,on"
	      MaskVisibilityString    "on,on,on,on,on,on"
	      MaskToolTipString	      "on,on,on,on,on,on"
	      MaskVarAliasString      ",,,,,"
	      MaskVariables	      "op_amp_gain=@1;op_amp_offset=@2;scale_o"
"bc_alg=@3;offset_obc_alg=@4;e_drift_scale_obc_alg=@5;e_drift_offset_obc_alg=@"
"6;"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "[10 10 10 10 10 10]|[2500 2500 2500 250"
"0 2500 2500]|[859.4 859.4 859.4 859.4 859.4 859.4 ]|[2500 2500 2500 2500 2500"
" 2500]|[0.075 0.075 0.075 0.075 0.075 0.075]|[10 10 10 10 10 10]"
	      MaskTabNameString	      ",,,,,"
	      System {
		Name			"Gyros"
		Location		[95, 99, 903, 588]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"portrait"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Temperature_meas [K]"
		  Position		  [45, 248, 75, 262]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "V_ADC [mV]"
		  Position		  [45, 43, 75, 57]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Combine the angular rate \nfrom the"
" 6 gyros to angular \nrate in S-frame"
		  Ports			  [1, 1]
		  Position		  [580, 238, 715, 282]
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  System {
		    Name		    "Combine the angular rate \nfrom t"
"he 6 gyros to angular \nrate in S-frame"
		    Location		    [651, 201, 1746, 984]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "W_meas 6 gyros"
		    Position		    [20, 108, 50, 122]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Demux
		    Name		    "Demux"
		    Ports		    [1, 6]
		    Position		    [80, 27, 85, 203]
		    BackgroundColor	    "black"
		    ShowName		    off
		    Outputs		    "6"
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain1"
		    Position		    [220, 65, 250, 95]
		    ShowName		    off
		    Gain		    "0.5"
		    ParameterDataTypeMode   "Inherit via internal rule"
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [3, 1]
		    Position		    [195, 12, 200, 148]
		    ShowName		    off
		    Inputs		    "3"
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    Ports		    [2, 1]
		    Position		    [150, 30, 170, 50]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "|+-"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum5"
		    Ports		    [2, 1]
		    Position		    [150, 75, 170, 95]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "|+-"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum6"
		    Ports		    [2, 1]
		    Position		    [150, 115, 170, 135]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "|+-"
		    InputSameDT		    off
		    OutDataTypeMode	    "Inherit via internal rule"
		    SaturateOnIntegerOverflow off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "W_meas (S)"
		    Position		    [275, 73, 305, 87]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Gain1"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "W_meas (S)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "W_meas 6 gyros"
		    SrcPort		    1
		    DstBlock		    "Demux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "Gain1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum6"
		    SrcPort		    1
		    DstBlock		    "Mux"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Sum5"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    Points		    [5, 0]
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    6
		    Points		    [70, 0]
		    DstBlock		    "Sum6"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    3
		    Points		    [0, 25]
		    DstBlock		    "Sum6"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    5
		    Points		    [35, 0; 0, -50]
		    DstBlock		    "Sum5"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    2
		    Points		    [0, 15]
		    DstBlock		    "Sum5"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    4
		    Points		    [20, 0; 0, -65]
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Gain
		  Name			  "Compensate op.amp gain1"
		  Position		  [170, 105, 280, 155]
		  Gain			  "1./op_amp_gain"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Compensate op.amp gain2"
		  Position		  [170, 25, 280, 75]
		  Gain			  "1./op_amp_gain"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Product
		  Name			  "Divide"
		  Ports			  [2, 1]
		  Position		  [530, 122, 545, 393]
		  ShowName		  off
		  Inputs		  "*/"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  OutScaling		  "2^-10"
		  RndMeth		  "Floor"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Drift(offset) [mV/K]"
		  Position		  [90, 195, 200, 215]
		  Value			  "e_drift_offset_obc_alg"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Drift(scale factor) [%/K]"
		  Position		  [65, 346, 190, 364]
		  Value			  "e_drift_scale_obc_alg"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  Position		  [220, 339, 260, 371]
		  Gain			  "0.01"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Offset [mV]"
		  Position		  [70, 119, 145, 141]
		  Value			  "offset_obc_alg"
		}
		Block {
		  BlockType		  Product
		  Name			  "Produc3"
		  Ports			  [3, 1]
		  Position		  [290, 286, 310, 424]
		  ShowName		  off
		  Inputs		  "3"
		  InputSameDT		  off
		  RndMeth		  "Floor"
		  Port {
		    PortNumber		    1
		    Name		    "temp coor"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		  }
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [2, 1]
		  Position		  [410, 198, 430, 242]
		  ShowName		  off
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  Ports			  [2, 1]
		  Position		  [290, 180, 310, 280]
		  ShowName		  off
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Signum
		  Name			  "Sign"
		  Position		  [360, 155, 390, 185]
		  Orientation		  "down"
		  NamePlacement		  "alternate"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [2, 1]
		  Position		  [180, 245, 200, 265]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum2"
		  Ports			  [2, 1]
		  Position		  [440, 345, 460, 365]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|++"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		  Port {
		    PortNumber		    1
		    Name		    "Scale factor"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		  }
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum3"
		  Ports			  [2, 1]
		  Position		  [320, 80, 340, 100]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum4"
		  Ports			  [2, 1]
		  Position		  [470, 180, 490, 200]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Constant
		  Name			  "mV->rad/s "
		  Position		  [100, 392, 190, 408]
		  Value			  "scale_obc_alg"
		}
		Block {
		  BlockType		  Constant
		  Name			  "temp must be deviation \nfrom 25 de"
"gree C"
		  Position		  [167, 300, 213, 320]
		  Orientation		  "up"
		  NamePlacement		  "alternate"
		  Value			  "298.15"
		}
		Block {
		  BlockType		  Outport
		  Name			  "W_meas (S)\nmeaned pair\n[rad/s]"
		  Position		  [740, 253, 770, 267]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "W_meas (S)\n[rad/s]"
		  Position		  [740, 323, 770, 337]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Combine the angular rate \nfrom the"
" 6 gyros to angular \nrate in S-frame"
		  SrcPort		  1
		  DstBlock		  "W_meas (S)\nmeaned pair\n[rad/s]"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Compensate op.amp gain1"
		  SrcPort		  1
		  Points		  [45, 0]
		  DstBlock		  "Sum3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Compensate op.amp gain2"
		  SrcPort		  1
		  Points		  [45, 0]
		  DstBlock		  "Sum3"
		  DstPort		  1
		}
		Line {
		  Name			  "Scale factor"
		  Labels		  [3, 0]
		  SrcBlock		  "Sum2"
		  SrcPort		  1
		  Points		  [10, 0; 0, -30]
		  DstBlock		  "Divide"
		  DstPort		  2
		}
		Line {
		  Name			  "temp coor"
		  Labels		  [0, 0]
		  SrcBlock		  "Produc3"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "mV->rad/s "
		  SrcPort		  1
		  Points		  [0, 0; 45, 0]
		  Branch {
		    DstBlock		    "Produc3"
		    DstPort		    3
		  }
		  Branch {
		    Labels		    [2, 0]
		    Points		    [0, 45; 210, 0]
		    DstBlock		    "Sum2"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Produc3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Temperature_meas [K]"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "temp must be deviation \nfrom 25 de"
"gree C"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Drift(offset) [mV/K]"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Divide"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    DstBlock		    "Combine the angular rate \nfrom t"
"he 6 gyros to angular \nrate in S-frame"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 70]
		    DstBlock		    "W_meas (S)\n[rad/s]"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  Points		  [0, 0; 35, 0]
		  Branch {
		    DstBlock		    "Product1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 55]
		    DstBlock		    "Produc3"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Offset [mV]"
		  SrcPort		  1
		  DstBlock		  "Compensate op.amp gain1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "V_ADC [mV]"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Compensate op.amp gain2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Drift(scale factor) [%/K]"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Gain"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sign"
		  SrcPort		  1
		  Points		  [0, 20]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum3"
		  SrcPort		  1
		  Points		  [0, 0; 30, 0]
		  Branch {
		    DstBlock		    "Sign"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [105, 0]
		    DstBlock		    "Sum4"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  Points		  [45, 0]
		  DstBlock		  "Sum4"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum4"
		  SrcPort		  1
		  DstBlock		  "Divide"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Magnetic field model"
	      Ports		      [1, 1]
	      Position		      [590, 653, 840, 727]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Magnetic field model"
		Location		[421, 353, 919, 653]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"portrait"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "R_sc(E)"
		  Position		  [110, 103, 140, 117]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  "S-Function"
		  Ports			  [1, 1]
		  Position		  [205, 95, 265, 125]
		  FunctionName		  "igrfS"
		  Parameters		  "2002,4"
		}
		Block {
		  BlockType		  Outport
		  Name			  "B(E)"
		  Position		  [360, 103, 390, 117]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "S-Function"
		  SrcPort		  1
		  DstBlock		  "B(E)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "R_sc(E)"
		  SrcPort		  1
		  DstBlock		  "S-Function"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Magnetometer"
	      Ports		      [2, 1]
	      Position		      [310, 446, 560, 524]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      MaskPromptString	      "Amplification HW: Op-amp gain () |Magne"
"tometer supply voltage (V)|Amplification HW: Op-amp offset (mV)|OBC algorithm"
"s: Sensitivity (mV/V/gauss)|OBC algorithms: Sensitivity drift due to temperat"
"ure (ppm/K)|OBC algorithms: offset (mV)"
	      MaskStyleString	      "edit,edit,edit,edit,edit,edit"
	      MaskTunableValueString  "on,on,on,on,on,on"
	      MaskCallbackString      "|||||"
	      MaskEnableString	      "on,on,on,on,on,on"
	      MaskVisibilityString    "on,on,on,on,on,on"
	      MaskToolTipString	      "on,on,on,on,on,on"
	      MaskVarAliasString      ",,,,,"
	      MaskVariables	      "op_amp_gain=@1;v_supply_model=@2;op_amp"
"_offset=@3;sens_obc_alg=@4;e_drift_sens_obc_alg=@5;e_offset_obc_alg=@6;"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "[500 500 500]|5|[2500 2500 2500]|[1 1 1"
"]|[-3000 -3000 -3000]|[10 10 10]*0"
	      MaskTabNameString	      ",,,,,"
	      System {
		Name			"Magnetometer"
		Location		[103, 80, 942, 501]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"portrait"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "V_ADC [mV]"
		  Position		  [30, 83, 60, 97]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "temp_meas [K]"
		  Position		  [30, 163, 60, 177]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Compensate \nop.amp gain2"
		  Position		  [460, 65, 570, 115]
		  Gain			  "1./op_amp_gain"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Product
		  Name			  "Divide"
		  Ports			  [2, 1]
		  Position		  [615, 12, 640, 328]
		  ShowName		  off
		  Inputs		  "*/"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  OutScaling		  "2^-10"
		  RndMeth		  "Floor"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Drift(scale factor) [%/K]"
		  Position		  [75, 241, 200, 259]
		  Value			  "e_drift_sens_obc_alg"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Offset [mV]"
		  Position		  [352, 155, 428, 180]
		  Orientation		  "up"
		  Value			  "op_amp_offset"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product3"
		  Ports			  [3, 1]
		  Position		  [305, 131, 325, 369]
		  ShowName		  off
		  Inputs		  "3"
		  InputSameDT		  off
		  RndMeth		  "Floor"
		  Port {
		    PortNumber		    1
		    Name		    "temp coor"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		  }
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [2, 1]
		  Position		  [130, 160, 150, 180]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "-+|"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum2"
		  Ports			  [2, 1]
		  Position		  [395, 235, 425, 265]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|++"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum3"
		  Ports			  [2, 1]
		  Position		  [375, 75, 405, 105]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "convert ppm\nto scale factor"
		  Position		  [220, 229, 275, 271]
		  NamePlacement		  "alternate"
		  Gain			  "10e-6"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "mv/v/gauss->\nmv/gauss"
		  Position		  [460, 225, 530, 275]
		  Gain			  "v_supply_model"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		  Port {
		    PortNumber		    1
		    Name		    "Scale factor"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "sensitivity \n[mV/V/Gauss]"
		  Position		  [110, 322, 200, 338]
		  Value			  "sens_obc_alg"
		}
		Block {
		  BlockType		  Constant
		  Name			  "temp must be deviation \nfrom 25 de"
"gree C"
		  Position		  [117, 120, 163, 140]
		  Orientation		  "down"
		  Value			  "298.15"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Mag field meas\n[Gauss]"
		  Position		  [760, 163, 790, 177]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Divide"
		  SrcPort		  1
		  DstBlock		  "Mag field meas\n[Gauss]"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "temp must be deviation \nfrom 25 de"
"gree C"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "temp_meas [K]"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  Name			  "Scale factor"
		  Labels		  [-1, 1]
		  SrcBlock		  "mv/v/gauss->\nmv/gauss"
		  SrcPort		  1
		  DstBlock		  "Divide"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Compensate \nop.amp gain2"
		  SrcPort		  1
		  DstBlock		  "Divide"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum3"
		  SrcPort		  1
		  DstBlock		  "Compensate \nop.amp gain2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Drift(scale factor) [%/K]"
		  SrcPort		  1
		  DstBlock		  "convert ppm\nto scale factor"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "V_ADC [mV]"
		  SrcPort		  1
		  DstBlock		  "Sum3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Offset [mV]"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Product3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "convert ppm\nto scale factor"
		  SrcPort		  1
		  DstBlock		  "Product3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "sensitivity \n[mV/V/Gauss]"
		  SrcPort		  1
		  Points		  [0, 0; 35, 0]
		  Branch {
		    Labels		    [2, 0]
		    Points		    [0, 65; 170, 0]
		    DstBlock		    "Sum2"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Product3"
		    DstPort		    3
		  }
		}
		Line {
		  Name			  "temp coor"
		  Labels		  [0, 0]
		  SrcBlock		  "Product3"
		  SrcPort		  1
		  DstBlock		  "Sum2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum2"
		  SrcPort		  1
		  DstBlock		  "mv/v/gauss->\nmv/gauss"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Orbit and Magnetic field models"
	      Ports		      [2, 2]
	      Position		      [310, 346, 560, 424]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      MaskDescription	      "When you want to use \"Other\" make sur"
"e to define the TLE in the SGP4 subsystem. "
	      MaskPromptString	      "Choose which TLE to use for SGP4"
	      MaskStyleString	      "popup(Oersted TLE|Other TLE)"
	      MaskTunableValueString  "on"
	      MaskEnableString	      "on"
	      MaskVisibilityString    "on"
	      MaskToolTipString	      "on"
	      MaskVariables	      "tle_type=@1;"
	      MaskInitialization      "\nif tle_type==1 %Choose which TLE to u"
"se\n    enable_oersted_tle=1;\n    enable_other_tle=0;\nelse\n    enable_oers"
"ted_tle=0;\n    enable_other_tle=1;\nend"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "Oersted TLE"
	      System {
		Name			"Orbit and Magnetic field models"
		Location		[35, 122, 1189, 752]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "JD"
		  Position		  [80, 13, 110, 27]
		  BackgroundColor	  "darkGreen"
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Earth rotation q(I->E)"
		  Position		  [590, 138, 620, 152]
		  BackgroundColor	  "green"
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  " S-Function"
		  Ports			  [1, 1]
		  Position		  [440, 230, 490, 260]
		  FunctionName		  "sgp4S"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [55, 75, 160, 95]
		  Value			  "enable_oersted_tle"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  Position		  [55, 225, 160, 245]
		  Value			  "enable_other_tle"
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux1"
		  Ports			  [1, 2]
		  Position		  [515, 198, 520, 287]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "[3 3]"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain\n1440"
		  Position		  [373, 110, 407, 160]
		  Orientation		  "down"
		  NamePlacement		  "alternate"
		  Gain			  "1440"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Magnetic field model"
		  Ports			  [1, 1]
		  Position		  [805, 190, 875, 230]
		  SourceBlock		  "components_lib/ADS/On-board model/M"
"agnetic field model"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		  Port {
		    PortNumber		    1
		    Name		    "B(I / E)"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		  }
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [2, 1]
		  Position		  [405, 226, 410, 264]
		  ShowName		  off
		  Inputs		  "2"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Quaternion inverter"
		  Ports			  [1, 1]
		  Position		  [710, 124, 810, 166]
		  SourceBlock		  "components_lib/Math utilities/Quate"
"rnion operations/Quaternion inverter"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [380, 60, 400, 80]
		  Orientation		  "down"
		  NamePlacement		  "alternate"
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "-+|"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [2, 1]
		  Position		  [335, 228, 350, 277]
		  ShowName		  off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum2"
		  Ports			  [2, 1]
		  Position		  [335, 43, 350, 92]
		  ShowName		  off
		}
		Block {
		  BlockType		  Gain
		  Name			  "T->Gauss"
		  Position		  [995, 184, 1020, 216]
		  Gain			  "1e4"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "TLE and time\ninitialization1"
		  Ports			  [1, 2]
		  Position		  [185, 24, 280, 146]
		  ShowName		  off
		  FontSize		  12
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  MaskDescription	  "Input TLE from the standard Two-Lin"
"e Orbital Element Set Format\nSatellite Name, Line 1 and 2."
		  MaskPromptString	  "Satellite Name:|Epoch [YYDDD]:|Epoc"
"h [JD]:|MM dot:|MM dot dot:|Drag:|Inclination [deg]:|Right Ascension of Ascen"
"ding Node [deg]:|Eccentricity [-]:|Argument of Perigee [deg]:|Mean Anomaly [d"
"eg]:|Mean Motion [rev/day]:|Sampling Time [sec]:"
		  MaskStyleString	  "edit,edit,edit,edit,edit,edit,edit,"
"edit,edit,edit,edit,edit,edit"
		  MaskTunableValueString  "on,on,on,on,on,on,on,on,on,on,on,on"
",on"
		  MaskCallbackString	  "||||||||||||"
		  MaskEnableString	  "on,on,on,on,on,on,on,on,on,on,on,on"
",on"
		  MaskVisibilityString	  "on,on,on,on,on,on,on,on,on,on,on,on"
",on"
		  MaskToolTipString	  "on,on,on,on,on,on,on,on,on,on,on,on"
",on"
		  MaskVarAliasString	  ",,,,,,,,,,,,"
		  MaskVariables		  "satname=@1;YYDDD=@2;JulianDay=@3;xn"
"dt2o=@4;xndd6o=@5;bstar=@6;xincl=@7;xnodeo=@8;eo=@9;omegao=@10;xmo=@11;xno=@1"
"2;ts=@13;"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "'Orsted'|02039|2452275.5+40.6925505"
"7|0.00002748*0|0|0.00071190|96.4788|112.1945|0.0148615|71.6037|290.1241|14.43"
"891950|1"
		  MaskTabNameString	  ",,,,,,,,,,,,"
		  System {
		    Name		    "TLE and time\ninitialization1"
		    Location		    [668, 448, 1232, 759]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Enable?"
		    Position		    [20, 28, 50, 42]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Create TLE and JD"
		    Ports		    [0, 2, 1]
		    Position		    [75, 62, 210, 138]
		    FontSize		    12
		    TreatAsAtomicUnit	    on
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    System {
		    Name		    "Create TLE and JD"
		    Location		    [254, 918, 838, 1127]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [515, 40, 535, 60]
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    Position		    [365, 85, 460, 115]
		    Value		    "JulianDay"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant "
		    Position		    [45, 135, 460, 165]
		    Value		    "[JulianDay,xndt2o,xndd6o,0,bstar,"
"0,xincl,xnodeo,eo,omegao,xmo,xno]"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Init JD"
		    Position		    [510, 93, 540, 107]
		    BackgroundColor	    "yellow"
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "TLE "
		    Position		    [510, 143, 540, 157]
		    BackgroundColor	    "yellow"
		    Port		    "2"
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    DstBlock		    "Init JD"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant "
		    SrcPort		    1
		    DstBlock		    "TLE "
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Oersted_InitJD"
		    Position		    [285, 73, 315, 87]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Oersted_TLE"
		    Position		    [285, 113, 315, 127]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Enable?"
		    SrcPort		    1
		    Points		    [85, 0]
		    DstBlock		    "Create TLE and JD"
		    DstPort		    enable
		    }
		    Line {
		    SrcBlock		    "Create TLE and JD"
		    SrcPort		    2
		    DstBlock		    "Oersted_TLE"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Create TLE and JD"
		    SrcPort		    1
		    DstBlock		    "Oersted_InitJD"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "TLE and time\ninitialization3"
		  Ports			  [1, 2]
		  Position		  [185, 174, 280, 296]
		  ShowName		  off
		  FontSize		  12
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  MaskDescription	  "Input TLE from the standard Two-Lin"
"e Orbital Element Set Format\nSatellite Name, Line 1 and 2."
		  MaskPromptString	  "Satellite Name:|Epoch [YYDDD]:|Epoc"
"h [JD]:|MM dot:|MM dot dot:|Drag:|Inclination [deg]:|Right Ascension of Ascen"
"ding Node [deg]:|Eccentricity [-]:|Argument of Perigee [deg]:|Mean Anomaly [d"
"eg]:|Mean Motion [rev/day]:|Sampling Time [sec]:"
		  MaskStyleString	  "edit,edit,edit,edit,edit,edit,edit,"
"edit,edit,edit,edit,edit,edit"
		  MaskTunableValueString  "on,on,on,on,on,on,on,on,on,on,on,on"
",on"
		  MaskCallbackString	  "||||||||||||"
		  MaskEnableString	  "on,on,on,on,on,on,on,on,on,on,on,on"
",on"
		  MaskVisibilityString	  "on,on,on,on,on,on,on,on,on,on,on,on"
",on"
		  MaskToolTipString	  "on,on,on,on,on,on,on,on,on,on,on,on"
",on"
		  MaskVarAliasString	  ",,,,,,,,,,,,"
		  MaskVariables		  "satname=@1;YYDDD=@2;JulianDay=@3;xn"
"dt2o=@4;xndd6o=@5;bstar=@6;xincl=@7;xnodeo=@8;eo=@9;omegao=@10;xmo=@11;xno=@1"
"2;ts=@13;"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "autoscale"
		  MaskValueString	  "'Orsted'|02039|2452275.5+40.6925505"
"7|0.00002748*0|0|0.00071190|96.4788|112.1945|0.0148615|71.6037|290.1241|14.43"
"891950|1"
		  MaskTabNameString	  ",,,,,,,,,,,,"
		  System {
		    Name		    "TLE and time\ninitialization3"
		    Location		    [668, 448, 1232, 759]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Enable?"
		    Position		    [20, 28, 50, 42]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Create TLE and JD"
		    Ports		    [0, 2, 1]
		    Position		    [75, 62, 210, 138]
		    FontSize		    12
		    TreatAsAtomicUnit	    on
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    System {
		    Name		    "Create TLE and JD"
		    Location		    [254, 918, 838, 1127]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [515, 40, 535, 60]
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    Position		    [365, 85, 460, 115]
		    Value		    "JulianDay"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant "
		    Position		    [45, 135, 460, 165]
		    Value		    "[JulianDay,xndt2o,xndd6o,0,bstar,"
"0,xincl,xnodeo,eo,omegao,xmo,xno]"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Init JD"
		    Position		    [510, 93, 540, 107]
		    BackgroundColor	    "yellow"
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "TLE "
		    Position		    [510, 143, 540, 157]
		    BackgroundColor	    "yellow"
		    Port		    "2"
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    DstBlock		    "Init JD"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant "
		    SrcPort		    1
		    DstBlock		    "TLE "
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Other_InitJD"
		    Position		    [285, 73, 315, 87]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Other_TLE"
		    Position		    [285, 113, 315, 127]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Enable?"
		    SrcPort		    1
		    Points		    [85, 0]
		    DstBlock		    "Create TLE and JD"
		    DstPort		    enable
		    }
		    Line {
		    SrcBlock		    "Create TLE and JD"
		    SrcPort		    2
		    DstBlock		    "Other_TLE"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Create TLE and JD"
		    SrcPort		    1
		    DstBlock		    "Other_InitJD"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Terminator
		  Name			  "Terminator"
		  Position		  [640, 255, 660, 275]
		}
		Block {
		  BlockType		  Reference
		  Name			  "Vector rotation by q"
		  Ports			  [2, 1]
		  Position		  [705, 189, 770, 231]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/Vector rotation by q"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Vector rotation by q1"
		  Ports			  [2, 1]
		  Position		  [910, 179, 975, 221]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/Vector rotation by q"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Gain
		  Name			  "km -> m"
		  Position		  [540, 203, 610, 237]
		  Gain			  "1000"
		}
		Block {
		  BlockType		  Gain
		  Name			  "km/s -> m/s"
		  Position		  [540, 249, 615, 281]
		  Gain			  "1000"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Magnetic field vector B(I)"
		  Position		  [1060, 193, 1090, 207]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Position (I)"
		  Position		  [770, 268, 800, 282]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "T->Gauss"
		  SrcPort		  1
		  DstBlock		  "Magnetic field vector B(I)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Vector rotation by q1"
		  SrcPort		  1
		  DstBlock		  "T->Gauss"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Quaternion inverter"
		  SrcPort		  1
		  Points		  [80, 0]
		  DstBlock		  "Vector rotation by q1"
		  DstPort		  1
		}
		Line {
		  Name			  "B(I / E)"
		  Labels		  [0, 0]
		  SrcBlock		  "Magnetic field model"
		  SrcPort		  1
		  DstBlock		  "Vector rotation by q1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Earth rotation q(I->E)"
		  SrcPort		  1
		  Points		  [40, 0]
		  Branch {
		    DstBlock		    "Quaternion inverter"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 55]
		    DstBlock		    "Vector rotation by q"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Vector rotation by q"
		  SrcPort		  1
		  DstBlock		  "Magnetic field model"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Gain\n1440"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Gain\n1440"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum2"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  1
		  DstBlock		  "km -> m"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  2
		  DstBlock		  "km/s -> m/s"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  " S-Function"
		  SrcPort		  1
		  DstBlock		  "Demux1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  " S-Function"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "km/s -> m/s"
		  SrcPort		  1
		  DstBlock		  "Terminator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "km -> m"
		  SrcPort		  1
		  Points		  [60, 0]
		  Branch {
		    Points		    [0, 0; 0, 55]
		    DstBlock		    "Position (I)"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Vector rotation by q"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "JD"
		  SrcPort		  1
		  Points		  [275, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "TLE and time\ninitialization3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "TLE and time\ninitialization1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "TLE and time\ninitialization1"
		  SrcPort		  1
		  DstBlock		  "Sum2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "TLE and time\ninitialization3"
		  SrcPort		  1
		  Points		  [30, 0; 0, -125]
		  DstBlock		  "Sum2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "TLE and time\ninitialization1"
		  SrcPort		  2
		  Points		  [35, 0]
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "TLE and time\ninitialization3"
		  SrcPort		  2
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Annotation {
		  Name			  "Other TLE"
		  Position		  [236, 607]
		}
		Annotation {
		  Name			  "rsted TLE"
		  Position		  [201, 157]
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Sun sensors"
	      Ports		      [2, 1]
	      Position		      [590, 546, 840, 624]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      MaskPromptString	      "Signal attenuation: Gain|Signal attenua"
"tion: Offset|Temperature drift compensation factor|Dark current compensation:"
" Dark currents vector|Current nomalization: Max currents vector"
	      MaskStyleString	      "edit,edit,edit,edit,edit"
	      MaskTunableValueString  "on,on,on,on,on"
	      MaskCallbackString      "||||"
	      MaskEnableString	      "on,on,on,on,on"
	      MaskVisibilityString    "on,on,on,on,on"
	      MaskToolTipString	      "on,on,on,on,on"
	      MaskVarAliasString      ",,,,"
	      MaskVariables	      "op_amp_gain=@1;op_amp_offset=@2;temp_dr"
"ift=@3;I_dark=@4;I_max=@5;"
	      MaskDisplay	      "image(imread('sun.jpg'));\ncolor('w');"
"\nport_label('input', 1, 'I_ADC[mA]');\nport_label('input', 2, 'Temperature ["
"K]');\nport_label('output', 1, 'Sun position (s)');\n"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      MaskValueString	      "1|0|0.00233|[0.0815 0.0815 0.0815 0.081"
"5 0.0815 0.0815 ]|[1.3928 1.3928 1.3928 1.3928 1.3928 1.3928]"
	      MaskTabNameString	      ",,,,"
	      System {
		Name			"Sun sensors"
		Location		[240, 140, 1054, 632]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"portrait"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "I_ADC [mA]"
		  Position		  [30, 128, 60, 142]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Temperature \n[K]"
		  Position		  [300, 198, 330, 212]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Compensate op_amp gain\n(is an atte"
"nuation)"
		  Position		  [180, 110, 290, 160]
		  Gain			  "op_amp_gain"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux"
		  Ports			  [1, 2]
		  Position		  [545, 318, 550, 382]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "2"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Drift [%/degreesC]"
		  Position		  [345, 158, 455, 182]
		  NamePlacement		  "alternate"
		  Value			  "temp_drift"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Max currents"
		  Position		  [180, 344, 265, 366]
		  Value			  "I_max"
		}
		Block {
		  BlockType		  Product
		  Name			  "Normalization of currents"
		  Ports			  [2, 1]
		  Position		  [370, 332, 400, 363]
		  Inputs		  "*/"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  OutScaling		  "2^-10"
		  RndMeth		  "Floor"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Normalized darkcurrents"
		  Position		  [325, 429, 410, 451]
		  Value			  "I_dark./I_max"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Offset [mV]"
		  Position		  [83, 190, 157, 220]
		  Orientation		  "up"
		  NamePlacement		  "alternate"
		  Value			  "op_amp_offset"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [2, 1]
		  Position		  [590, 320, 620, 350]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum2"
		  Ports			  [2, 1]
		  Position		  [455, 335, 485, 365]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum3"
		  Ports			  [2, 1]
		  Position		  [105, 120, 135, 150]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum5"
		  Ports			  [2, 1]
		  Position		  [475, 190, 505, 220]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum6"
		  Ports			  [2, 1]
		  Position		  [655, 155, 685, 185]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "++|"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Temp is deviation\nfrom 25 degree C"
		  Position		  [466, 245, 514, 265]
		  Orientation		  "up"
		  NamePlacement		  "alternate"
		  Value			  "298.15"
		}
		Block {
		  BlockType		  Product
		  Name			  "Temperature \ndrift [mA]"
		  Ports			  [3, 1]
		  Position		  [550, 120, 595, 220]
		  NamePlacement		  "alternate"
		  Inputs		  "3"
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Sun position (s)"
		  Position		  [715, 328, 745, 342]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Temp is deviation\nfrom 25 degree C"
		  SrcPort		  1
		  DstBlock		  "Sum5"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum5"
		  SrcPort		  1
		  DstBlock		  "Temperature \ndrift [mA]"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Temperature \n[K]"
		  SrcPort		  1
		  DstBlock		  "Sum5"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Drift [%/degreesC]"
		  SrcPort		  1
		  DstBlock		  "Temperature \ndrift [mA]"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Temperature \ndrift [mA]"
		  SrcPort		  1
		  DstBlock		  "Sum6"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  2
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Sun position (s)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Normalized darkcurrents"
		  SrcPort		  1
		  Points		  [55, 0]
		  DstBlock		  "Sum2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum2"
		  SrcPort		  1
		  DstBlock		  "Demux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Compensate op_amp gain\n(is an atte"
"nuation)"
		  SrcPort		  1
		  Points		  [200, 0]
		  Branch {
		    DstBlock		    "Temperature \ndrift [mA]"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -60; 175, 0]
		    DstBlock		    "Sum6"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Max currents"
		  SrcPort		  1
		  DstBlock		  "Normalization of currents"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Normalization of currents"
		  SrcPort		  1
		  DstBlock		  "Sum2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum6"
		  SrcPort		  1
		  Points		  [25, 0; 0, 120; -425, 0; 0, 50]
		  DstBlock		  "Normalization of currents"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "I_ADC [mA]"
		  SrcPort		  1
		  DstBlock		  "Sum3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Offset [mV]"
		  SrcPort		  1
		  DstBlock		  "Sum3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum3"
		  SrcPort		  1
		  DstBlock		  "Compensate op_amp gain\n(is an atte"
"nuation)"
		  DstPort		  1
		}
		Annotation {
		  Name			  "Vector plus sides minus \nvector mi"
"nus sides"
		  Position		  [595, 402]
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Temperature: Convert voltage from ADC i"
"nto measured temperature"
	      Ports		      [1, 1]
	      Position		      [310, 547, 560, 623]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Temperature: Convert voltage from ADC"
" into measured temperature"
		Location		[380, 440, 1026, 864]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"portrait"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Temperature_meas\n[mV]"
		  Position		  [25, 28, 55, 42]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Temperature\n[K]"
		  Position		  [410, 28, 440, 42]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Temperature_meas\n[mV]"
		  SrcPort		  1
		  DstBlock		  "Temperature\n[K]"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "sensor model"
	      Ports		      [4, 4]
	      Position		      [30, 239, 280, 426]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"sensor model"
		Location		[203, 323, 1207, 797]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"portrait"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Magnetometer V_ADC\n[mV]"
		  Position		  [85, 33, 115, 47]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Gyros V_ADC\n[mV]"
		  Position		  [50, 218, 80, 232]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Sun sensors [mA]"
		  Position		  [85, 313, 115, 327]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Temperature V_ADC\n[mV]"
		  Position		  [50, 163, 80, 177]
		  Port			  "4"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Reference
		  Name			  "Gyros"
		  Ports			  [2, 2]
		  Position		  [370, 143, 655, 252]
		  SourceBlock		  "components_lib/ADS/On-board model/G"
"yros"
		  SourceType		  "Parameters for the gyro sensor bloc"
"k"
		  ShowPortLabels	  "on"
		  op_amp_gain		  "[10 10 10 10 10 10]"
		  op_amp_offset		  "[2500 2500 2500 2500 2500 2500]"
		  scale_obc_alg		  "[859.4 859.4 859.4 859.4 859.4 859."
"4 ]"
		  offset_obc_alg	  "[2500 2500 2500 2500 2500 2500]"
		  e_drift_scale_obc_alg	  "[0.075 0.075 0.075 0.075 0.075 0.07"
"5]"
		  e_drift_offset_obc_alg  "[10 10 10 10 10 10]"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Mag field vector \nto unit vector"
		  Ports			  [1, 1]
		  Position		  [605, 39, 705, 81]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Magnetometer"
		  Ports			  [2, 1]
		  Position		  [390, 22, 550, 98]
		  SourceBlock		  "components_lib/ADS/On-board model/M"
"agnetometer"
		  SourceType		  "Unknown"
		  ShowPortLabels	  "on"
		  op_amp_gain		  "[500 500 500]"
		  v_supply_model	  "5"
		  op_amp_offset		  "[2500 2500 2500]"
		  sens_obc_alg		  "[1 1 1]"
		  e_drift_sens_obc_alg	  "[-3000 -3000 -3000]"
		  e_offset_obc_alg	  "[10 10 10]*0"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Sun pos vector \nto unit vector"
		  Ports			  [1, 1]
		  Position		  [605, 329, 705, 371]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Sun sensors"
		  Ports			  [2, 1]
		  Position		  [410, 291, 530, 404]
		  SourceBlock		  "components_lib/ADS/On-board model/S"
"un sensors"
		  SourceType		  "Unknown"
		  ShowPortLabels	  "on"
		  op_amp_gain		  "1"
		  op_amp_offset		  "0"
		  temp_drift		  "0.00233"
		  I_dark		  "[0.0815 0.0815 0.0815 0.0815 0.0815"
" 0.0815 ]"
		  I_max			  "[1.3928 1.3928 1.3928 1.3928 1.3928"
" 1.3928]"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Temperature: Convert voltage from A"
"DC\ninto measured temperature"
		  Ports			  [1, 1]
		  Position		  [140, 155, 290, 185]
		  SourceBlock		  "components_lib/ADS/On-board model/T"
"emperature: Convert voltage from ADC into measured temperature"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Magnetic field unit vector (S)"
		  Position		  [805, 53, 835, 67]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Sun unit vector (S)"
		  Position		  [805, 343, 835, 357]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Omega (1x3) (S)\n[rad/s]"
		  Position		  [805, 163, 835, 177]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Omega (1x6) (S)\n[rad/s]"
		  Position		  [805, 218, 835, 232]
		  Port			  "4"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Sun pos vector \nto unit vector"
		  SrcPort		  1
		  DstBlock		  "Sun unit vector (S)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Gyros"
		  SrcPort		  2
		  DstBlock		  "Omega (1x6) (S)\n[rad/s]"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mag field vector \nto unit vector"
		  SrcPort		  1
		  DstBlock		  "Magnetic field unit vector (S)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sun sensors"
		  SrcPort		  1
		  DstBlock		  "Sun pos vector \nto unit vector"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sun sensors [mA]"
		  SrcPort		  1
		  DstBlock		  "Sun sensors"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Gyros V_ADC\n[mV]"
		  SrcPort		  1
		  DstBlock		  "Gyros"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Gyros"
		  SrcPort		  1
		  DstBlock		  "Omega (1x3) (S)\n[rad/s]"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Temperature V_ADC\n[mV]"
		  SrcPort		  1
		  DstBlock		  "Temperature: Convert voltage from A"
"DC\ninto measured temperature"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Magnetometer"
		  SrcPort		  1
		  DstBlock		  "Mag field vector \nto unit vector"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Magnetometer V_ADC\n[mV]"
		  SrcPort		  1
		  DstBlock		  "Magnetometer"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Temperature: Convert voltage from A"
"DC\ninto measured temperature"
		  SrcPort		  1
		  Points		  [50, 0]
		  Branch {
		    Points		    [0, 0]
		    Branch {
		    Points		    [0, 205]
		    DstBlock		    "Sun sensors"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, -90]
		    DstBlock		    "Magnetometer"
		    DstPort		    2
		    }
		  }
		  Branch {
		    DstBlock		    "Gyros"
		    DstPort		    1
		  }
		}
	      }
	    }
	  }
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "Actuator Emulation"
      Ports		      []
      Position		      [417, 419, 561, 488]
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      MinAlgLoopOccurrences   off
      RTWSystemCode	      "Auto"
      System {
	Name			"Actuator Emulation"
	Location		[283, 289, 997, 951]
	Open			off
	ModelBrowserVisibility	on
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  SubSystem
	  Name			  "Magnetorquer"
	  Ports			  [4, 1]
	  Position		  [45, 35, 145, 100]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  MaskPromptString	  "Maximum voltage|Coil dimensions [x y]|Coil "
"inductance|Coil winding number|Wire cross sectional area|Wire resistivity|Wir"
"e resistivity temp. coef.|Wire resistivity base temp."
	  MaskStyleString	  "edit,edit,edit,edit,edit,edit,edit,edit"
	  MaskTunableValueString  "on,on,on,on,on,on,on,on"
	  MaskCallbackString	  "|||||||"
	  MaskEnableString	  "on,on,on,on,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on,on,on,on"
	  MaskVarAliasString	  ",,,,,,,"
	  MaskVariables		  "v_max_mt=@1;coil_dim=@2;L_mt=@3;n_mt=@4;A_w"
"ire_mt=@5;sigma_0_mt=@6;alpha_0_mt=@7;T_0_mt=@8;"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "5|[0.07 0.21]|26.956e-3|435|(pi/4)*0.0002^2"
"|1.7e-8|3.9e-3|293"
	  MaskTabNameString	  ",,,,,,,"
	  System {
	    Name		    "Magnetorquer"
	    Location		    [212, 73, 945, 612]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "A4"
	    PaperUnits		    "centimeters"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "v_mt"
	      Position		      [30, 203, 60, 217]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "coil normal"
	      Position		      [30, 88, 60, 102]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "B(s)"
	      Position		      [30, 48, 60, 62]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "T"
	      Position		      [30, 333, 60, 347]
	      Port		      "4"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Area"
	      Position		      [250, 165, 280, 195]
	      Value		      "coil_dim(1)*coil_dim(2)"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Prodct5"
	      Ports		      [2, 1]
	      Position		      [640, 362, 670, 393]
	      ShowName		      off
	      Inputs		      "*/"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [3, 1]
	      Position		      [310, 121, 340, 239]
	      ShowName		      off
	      Inputs		      "3"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      Ports		      [3, 1]
	      Position		      [310, 334, 340, 376]
	      ShowName		      off
	      Inputs		      "3"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      Ports		      [2, 1]
	      Position		      [415, 132, 445, 163]
	      ShowName		      off
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      Ports		      [3, 1]
	      Position		      [515, 347, 545, 393]
	      ShowName		      off
	      Inputs		      "3"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Resistivity"
	      Position		      [175, 424, 245, 456]
	      Value		      "sigma_0_mt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Resistivity\nbase temperature"
	      Position		      [65, 374, 120, 406]
	      Value		      "T_0_mt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Resistivity temperature\ncoefficient"
	      Position		      [175, 353, 245, 387]
	      Value		      "alpha_0_mt"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      Position		      [100, 195, 130, 225]
	      UpperLimit	      "v_max_mt"
	      LowerLimit	      "-v_max_mt"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [125, 330, 145, 350]
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "|+-"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum1"
	      Ports		      [2, 1]
	      Position		      [385, 345, 405, 365]
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "|++"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Windings"
	      Position		      [250, 115, 280, 145]
	      Value		      "n_mt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Windings1"
	      Position		      [430, 445, 460, 475]
	      Value		      "n_mt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Wire cross\nsectional area"
	      Position		      [555, 415, 610, 445]
	      Value		      "A_wire_mt"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "cross product"
	      Ports		      [2, 1]
	      Position		      [520, 136, 610, 189]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/cross_product_no_fnc"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "electro mechanics\ntransfer function"
	      Ports		      [2, 1]
	      Position		      [165, 198, 235, 242]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"electro mechanics\ntransfer function"
		Location		[866, 495, 1376, 693]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "v"
		  Position		  [25, 38, 55, 52]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "R(T)"
		  Position		  [25, 118, 55, 132]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Integrator
		  Name			  "Integrator"
		  Ports			  [1, 1]
		  Position		  [335, 30, 365, 60]
		  IgnoreLimit		  off
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  Ports			  [2, 1]
		  Position		  [100, 117, 130, 148]
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [180, 35, 200, 55]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "dot Gain"
		  Position		  [235, 25, 290, 65]
		  Gain			  "1/L_mt"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Outport
		  Name			  "i"
		  Position		  [455, 38, 485, 52]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "R(T)"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "v"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [55, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Integrator"
		  SrcPort		  1
		  Points		  [0, 0; 35, 0]
		  Branch {
		    DstBlock		    "i"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 125; -320, 0]
		    DstBlock		    "Product1"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "dot Gain"
		  SrcPort		  1
		  DstBlock		  "Integrator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "dot Gain"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "wire \ncircumference"
	      Position		      [415, 372, 475, 408]
	      Value		      "2*coil_dim(1)+2*coil_dim(2)"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "N_mt(s)"
	      Position		      [675, 158, 705, 172]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "B(s)"
	      SrcPort		      1
	      Points		      [435, 0; 0, 120]
	      DstBlock		      "cross product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Prodct5"
	      SrcPort		      1
	      Points		      [15, 0; 0, -90; -545, 0; 0, -60]
	      DstBlock		      "electro mechanics\ntransfer function"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Wire cross\nsectional area"
	      SrcPort		      1
	      Points		      [5, 0; 0, -45]
	      DstBlock		      "Prodct5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      DstBlock		      "Prodct5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Windings1"
	      SrcPort		      1
	      Points		      [35, 0]
	      DstBlock		      "Product3"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "wire \ncircumference"
	      SrcPort		      1
	      Points		      [10, 0; 0, -20]
	      DstBlock		      "Product3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum1"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Resistivity"
	      SrcPort		      1
	      Points		      [35, 0]
	      Branch {
		Points			[110, 0]
		DstBlock		"Sum1"
		DstPort			2
	      }
	      Branch {
		Points			[0, -70]
		DstBlock		"Product1"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Resistivity temperature\ncoefficient"
	      SrcPort		      1
	      Points		      [20, 0; 0, -15]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "T"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Resistivity\nbase temperature"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "coil normal"
	      SrcPort		      1
	      Points		      [335, 0]
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "v_mt"
	      SrcPort		      1
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "electro mechanics\ntransfer function"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "electro mechanics\ntransfer function"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Windings"
	      SrcPort		      1
	      Points		      [5, 0; 0, 10]
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Area"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      Points		      [55, 0]
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "cross product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "cross product"
	      SrcPort		      1
	      DstBlock		      "N_mt(s)"
	      DstPort		      1
	    }
	    Annotation {
	      Name		      "R_{mt}(T)"
	      Position		      [564, 282]
	      TeXMode		      "on"
	    }
	    Annotation {
	      Name		      "i_{mt}"
	      Position		      [266, 231]
	      TeXMode		      "on"
	    }
	    Annotation {
	      Name		      "m_{mt}"
	      Position		      [374, 192]
	      TeXMode		      "on"
	    }
	    Annotation {
	      Name		      "m_{mt_{vec}}"
	      Position		      [474, 158]
	      TeXMode		      "on"
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Magnetorquer without L"
	  Ports			  [4, 1]
	  Position		  [415, 40, 515, 105]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  MaskPromptString	  "Maximum voltage|Coil dimensions [x y]|Coil "
"winding number|Wire cross sectional area|Wire resistivity|Wire resistivity te"
"mp. coef.|Wire resistivity base temp."
	  MaskStyleString	  "edit,edit,edit,edit,edit,edit,edit"
	  MaskTunableValueString  "on,on,on,on,on,on,on"
	  MaskCallbackString	  "||||||"
	  MaskEnableString	  "on,on,on,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on,on,on"
	  MaskVarAliasString	  ",,,,,,"
	  MaskVariables		  "v_max_mt=@1;coil_dim=@2;n_mt=@3;A_wire_mt=@"
"4;sigma_0_mt=@5;alpha_0_mt=@6;T_0_mt=@7;"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "5|[0.07 0.21]|435|(pi/4)*0.0002^2|1.7e-8|3."
"9e-3|293"
	  MaskTabNameString	  ",,,,,,"
	  System {
	    Name		    "Magnetorquer without L"
	    Location		    [212, 73, 945, 612]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "A4"
	    PaperUnits		    "centimeters"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "v_mt"
	      Position		      [30, 208, 60, 222]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "coil normal"
	      Position		      [30, 88, 60, 102]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "B(s)"
	      Position		      [30, 48, 60, 62]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "T"
	      Position		      [30, 333, 60, 347]
	      Port		      "4"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Area"
	      Position		      [205, 163, 240, 197]
	      Value		      "coil_dim(1)*coil_dim(2)"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Divide"
	      Ports		      [2, 1]
	      Position		      [170, 207, 200, 238]
	      Inputs		      "*/"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      OutScaling	      "2^-10"
	      RndMeth		      "Floor"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Prodct5"
	      Ports		      [2, 1]
	      Position		      [640, 362, 670, 393]
	      ShowName		      off
	      Inputs		      "*/"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [3, 1]
	      Position		      [310, 112, 340, 248]
	      ShowName		      off
	      Inputs		      "3"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      Ports		      [3, 1]
	      Position		      [310, 334, 340, 376]
	      ShowName		      off
	      Inputs		      "3"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      Ports		      [2, 1]
	      Position		      [415, 132, 445, 163]
	      ShowName		      off
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      Ports		      [3, 1]
	      Position		      [515, 347, 545, 393]
	      ShowName		      off
	      Inputs		      "3"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Resistivity"
	      Position		      [175, 424, 245, 456]
	      Value		      "sigma_0_mt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Resistivity\nbase temperature"
	      Position		      [65, 374, 120, 406]
	      Value		      "T_0_mt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Resistivity temperature\ncoefficient"
	      Position		      [175, 353, 245, 387]
	      Value		      "alpha_0_mt"
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Saturation"
	      Position		      [100, 200, 130, 230]
	      UpperLimit	      "v_max_mt"
	      LowerLimit	      "-v_max_mt"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [125, 330, 145, 350]
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "|+-"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum1"
	      Ports		      [2, 1]
	      Position		      [385, 345, 405, 365]
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "|++"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Windings"
	      Position		      [250, 120, 280, 150]
	      Value		      "n_mt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Windings1"
	      Position		      [430, 445, 460, 475]
	      Value		      "n_mt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Wire cross\nsectional area"
	      Position		      [555, 415, 610, 445]
	      Value		      "A_wire_mt"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "cross product"
	      Ports		      [2, 1]
	      Position		      [520, 136, 610, 189]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/cross_product_no_fnc"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "wire \ncircumference"
	      Position		      [425, 371, 475, 409]
	      Value		      "2*coil_dim(1)+2*coil_dim(2)"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "N_mt(s)"
	      Position		      [675, 158, 705, 172]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "B(s)"
	      SrcPort		      1
	      Points		      [395, 0; 0, 120]
	      DstBlock		      "cross product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "cross product"
	      SrcPort		      1
	      DstBlock		      "N_mt(s)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "cross product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      Points		      [55, 0]
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Area"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Windings"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Divide"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Saturation"
	      SrcPort		      1
	      DstBlock		      "Divide"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "v_mt"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Saturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "coil normal"
	      SrcPort		      1
	      Points		      [335, 0]
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Resistivity\nbase temperature"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "T"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Resistivity temperature\ncoefficient"
	      SrcPort		      1
	      Points		      [20, 0; 0, -15]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Resistivity"
	      SrcPort		      1
	      Points		      [35, 0]
	      Branch {
		Points			[0, -70]
		DstBlock		"Product1"
		DstPort			3
	      }
	      Branch {
		Points			[110, 0]
		DstBlock		"Sum1"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum1"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "wire \ncircumference"
	      SrcPort		      1
	      Points		      [10, 0; 0, -20]
	      DstBlock		      "Product3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Windings1"
	      SrcPort		      1
	      Points		      [35, 0]
	      DstBlock		      "Product3"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      DstBlock		      "Prodct5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Wire cross\nsectional area"
	      SrcPort		      1
	      Points		      [5, 0; 0, -45]
	      DstBlock		      "Prodct5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Prodct5"
	      SrcPort		      1
	      Points		      [15, 0; 0, -85; -545, 0; 0, -65]
	      DstBlock		      "Divide"
	      DstPort		      2
	    }
	    Annotation {
	      Name		      "m_{mt_{vec}}"
	      Position		      [479, 143]
	      TeXMode		      "on"
	    }
	    Annotation {
	      Name		      "m_{mt}"
	      Position		      [374, 192]
	      TeXMode		      "on"
	    }
	    Annotation {
	      Name		      "i_{mt}"
	      Position		      [266, 231]
	      TeXMode		      "on"
	    }
	    Annotation {
	      Name		      "R_{mt}(T)"
	      Position		      [564, 282]
	      TeXMode		      "on"
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Momentum wheel"
	  Ports			  [1, 3]
	  Position		  [50, 134, 140, 196]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  MaskPromptString	  "Maximum voltage|Minimum voltage|Amature res"
"istance|Amature inductance|Motor torque constant|Motor speed constant|Viscous"
" friction coef.|Momentum wheel inertia"
	  MaskStyleString	  "edit,edit,edit,edit,edit,edit,edit,edit"
	  MaskTunableValueString  "on,on,on,on,on,on,on,on"
	  MaskCallbackString	  "|||||||"
	  MaskEnableString	  "on,on,on,on,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on,on,on,on"
	  MaskVarAliasString	  ",,,,,,,"
	  MaskVariables		  "v_max_mw=@1;v_min_mw=@2;R_mw=@3;L_mw=@4;C_t"
"=@5;C_s=@6;mu_f=@7;I_mw=@8;"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "3|0|8|0.07e-3|2.67e-3|0.0027|39.606e-9|4.13"
"9e-6"
	  MaskTabNameString	  ",,,,,,,"
	  System {
	    Name		    "Momentum wheel"
	    Location		    [202, 74, 1022, 722]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "A4"
	    PaperUnits		    "centimeters"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "V_mw"
	      Position		      [25, 43, 55, 57]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Bias1"
	      Position		      [535, 118, 575, 152]
	      ShowName		      off
	      Value		      "I_mw"
	    }
	    Block {
	      BlockType		      Derivative
	      Name		      "Derivative"
	      Position		      [660, 155, 690, 185]
	      ShowName		      off
	    }
	    Block {
	      BlockType		      TransferFcn
	      Name		      "Electrical TF"
	      Position		      [230, 32, 290, 68]
	      Denominator	      "[R_mw]"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Mechanical TF"
	      Ports		      [1, 1]
	      Position		      [435, 34, 505, 66]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Mechanical TF"
		Location		[202, 74, 1022, 722]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "N_mw"
		  Position		  [75, 63, 105, 77]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [30, 115, 60, 145]
		  Value			  "mu_f"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  Position		  [195, 55, 250, 85]
		  Gain			  "1/I_mw"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Integrator
		  Name			  "Integrator"
		  Ports			  [1, 1]
		  Position		  [280, 55, 310, 85]
		  InitialCondition	  "w_mw_init"
		  IgnoreLimit		  off
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [2, 1]
		  Position		  [120, 122, 150, 153]
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [150, 60, 170, 80]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Outport
		  Name			  "w_mw"
		  Position		  [360, 63, 390, 77]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Integrator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Gain"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  Points		  [5, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "N_mw"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Integrator"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, 110; -230, 0]
		    DstBlock		    "Product"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "w_mw"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Motor speed \nconstant"
	      Position		      [385, 158, 430, 192]
	      Orientation	      "left"
	      Gain		      "C_s"
	      ParameterDataTypeMode   "Inherit via internal rule"
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Motor torque \nconstant"
	      Position		      [340, 33, 390, 67]
	      Gain		      "C_t"
	      ParameterDataTypeMode   "Inherit via internal rule"
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [610, 152, 640, 183]
	      ShowName		      off
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      Ports		      [2, 1]
	      Position		      [610, 87, 640, 118]
	      ShowName		      off
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [160, 40, 180, 60]
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "|+-"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Saturate
	      Name		      "Voltage \nsaturation"
	      Position		      [90, 35, 120, 65]
	      UpperLimit	      "v_max_mw"
	      LowerLimit	      "v_min_mw"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "omega_mw"
	      Position		      [715, 43, 745, 57]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "N_mw"
	      Position		      [715, 163, 745, 177]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "H_mw"
	      Position		      [715, 98, 745, 112]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "V_mw"
	      SrcPort		      1
	      DstBlock		      "Voltage \nsaturation"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Motor speed \nconstant"
	      SrcPort		      1
	      Points		      [-210, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Mechanical TF"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		Points			[0, 125]
		Branch {
		  DstBlock		  "Motor speed \nconstant"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "Product"
		  DstPort		  2
		}
	      }
	      Branch {
		Points			[70, 0]
		Branch {
		  DstBlock		  "omega_mw"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "Product1"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Motor torque \nconstant"
	      SrcPort		      1
	      DstBlock		      "Mechanical TF"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Electrical TF"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Voltage \nsaturation"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Electrical TF"
	      SrcPort		      1
	      DstBlock		      "Motor torque \nconstant"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Bias1"
	      SrcPort		      1
	      Points		      [0, 0; 5, 0]
	      Branch {
		Points			[0, -25]
		DstBlock		"Product1"
		DstPort			2
	      }
	      Branch {
		Points			[0, 25]
		DstBlock		"Product"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Derivative"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Derivative"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "N_mw"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "H_mw"
	      DstPort		      1
	    }
	    Annotation {
	      Name		      "e_{mw}"
	      Position		      [202, 36]
	      TeXMode		      "on"
	    }
	    Annotation {
	      Name		      "i_{mw}"
	      Position		      [315, 36]
	      TeXMode		      "on"
	    }
	    Annotation {
	      Name		      "N_{mw}"
	      Position		      [410, 36]
	      TeXMode		      "on"
	    }
	    Annotation {
	      Name		      "\\omega_{mw}"
	      Position		      [556, 36]
	      TeXMode		      "on"
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "NSO magnetorquers"
	  Ports			  [3, 1]
	  Position		  [165, 37, 265, 103]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "NSO magnetorquers"
	    Location		    [212, 73, 945, 612]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "A4"
	    PaperUnits		    "centimeters"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "v_in"
	      Position		      [25, 133, 55, 147]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "B(S)"
	      Position		      [30, 323, 60, 337]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "T"
	      Position		      [30, 378, 60, 392]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Add"
	      Ports		      [3, 1]
	      Position		      [480, 143, 510, 197]
	      Inputs		      "+++"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      OutScaling	      "2^-10"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      Ports		      [1, 3]
	      Position		      [95, 104, 100, 176]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "3"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "X Magnetorquer"
	      Ports		      [4, 1]
	      Position		      [290, 27, 395, 103]
	      SourceBlock	      "components_lib/Actuator Emulation/Magne"
"torquer"
	      SourceType	      "Unknown"
	      ShowPortLabels	      "on"
	      v_max_mt		      "5"
	      coil_dim		      "[0.07 0.21]"
	      L_mt		      "26.956e-3"
	      n_mt		      "435"
	      A_wire_mt		      "(pi/4)*0.0002^2"
	      sigma_0_mt	      "1.7e-8"
	      alpha_0_mt	      "3.9e-3"
	      T_0_mt		      "293"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "X coil \nnormal"
	      Position		      [165, 40, 195, 70]
	      Value		      "[1;0;0]"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Y Magnetorquer"
	      Ports		      [4, 1]
	      Position		      [290, 134, 395, 206]
	      SourceBlock	      "components_lib/Actuator Emulation/Magne"
"torquer"
	      SourceType	      "Unknown"
	      ShowPortLabels	      "on"
	      v_max_mt		      "5"
	      coil_dim		      "[0.07 0.21]"
	      L_mt		      "26.956e-3"
	      n_mt		      "435"
	      A_wire_mt		      "(pi/4)*0.0002^2"
	      sigma_0_mt	      "1.7e-8"
	      alpha_0_mt	      "3.9e-3"
	      T_0_mt		      "293"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Y coil\nnormal"
	      Position		      [165, 145, 195, 175]
	      Value		      "[0;1;0]"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Z Magnetorquer"
	      Ports		      [4, 1]
	      Position		      [290, 238, 395, 312]
	      SourceBlock	      "components_lib/Actuator Emulation/Magne"
"torquer"
	      SourceType	      "Unknown"
	      ShowPortLabels	      "on"
	      v_max_mt		      "5"
	      coil_dim		      "[0.07 0.07]"
	      L_mt		      "59.256e-3"
	      n_mt		      "865"
	      A_wire_mt		      "(pi/4)*0.0002^2"
	      sigma_0_mt	      "1.7e-8"
	      alpha_0_mt	      "3.9e-3"
	      T_0_mt		      "293"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Z coil\nnormal"
	      Position		      [165, 250, 195, 280]
	      Value		      "[0;0;1]"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "N_mt(S)"
	      Position		      [565, 163, 595, 177]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	      PortDimensions	      "3"
	    }
	    Line {
	      SrcBlock		      "v_in"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Add"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "N_mt(S)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "X coil \nnormal"
	      SrcPort		      1
	      DstBlock		      "X Magnetorquer"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      Points		      [20, 0; 0, -80]
	      DstBlock		      "X Magnetorquer"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "X Magnetorquer"
	      SrcPort		      1
	      Points		      [35, 0; 0, 85]
	      DstBlock		      "Add"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Y Magnetorquer"
	      SrcPort		      1
	      DstBlock		      "Add"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Z Magnetorquer"
	      SrcPort		      1
	      Points		      [35, 0; 0, -85]
	      DstBlock		      "Add"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      DstBlock		      "Y Magnetorquer"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Y coil\nnormal"
	      SrcPort		      1
	      DstBlock		      "Y Magnetorquer"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      3
	      Points		      [20, 0; 0, 80]
	      DstBlock		      "Z Magnetorquer"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Z coil\nnormal"
	      SrcPort		      1
	      DstBlock		      "Z Magnetorquer"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "B(S)"
	      SrcPort		      1
	      Points		      [150, 0; 0, -45]
	      Branch {
		Points			[0, -105]
		Branch {
		  DstBlock		  "Y Magnetorquer"
		  DstPort		  3
		}
		Branch {
		  Points		  [0, -105]
		  DstBlock		  "X Magnetorquer"
		  DstPort		  3
		}
	      }
	      Branch {
		DstBlock		"Z Magnetorquer"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "T"
	      SrcPort		      1
	      Points		      [180, 0; 0, -80]
	      Branch {
		Points			[0, -105]
		Branch {
		  DstBlock		  "Y Magnetorquer"
		  DstPort		  4
		}
		Branch {
		  Points		  [0, -105]
		  DstBlock		  "X Magnetorquer"
		  DstPort		  4
		}
	      }
	      Branch {
		DstBlock		"Z Magnetorquer"
		DstPort			4
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "NSO magnetorquers\nwithout L"
	  Ports			  [3, 1]
	  Position		  [290, 37, 390, 103]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "NSO magnetorquers\nwithout L"
	    Location		    [212, 93, 945, 632]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "A4"
	    PaperUnits		    "centimeters"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "v_in"
	      Position		      [25, 133, 55, 147]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "B(S)"
	      Position		      [30, 323, 60, 337]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "T"
	      Position		      [30, 378, 60, 392]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Add"
	      Ports		      [3, 1]
	      Position		      [480, 138, 510, 192]
	      Inputs		      "+++"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      OutScaling	      "2^-10"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      Ports		      [1, 3]
	      Position		      [95, 104, 100, 176]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "3"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "X Magnetorquer \nwithout L "
	      Ports		      [4, 1]
	      Position		      [290, 35, 390, 100]
	      SourceBlock	      "components_lib/Actuator Emulation/Magne"
"torquer without L"
	      SourceType	      "Unknown"
	      ShowPortLabels	      "on"
	      v_max_mt		      "5"
	      coil_dim		      "[0.07 0.21]"
	      n_mt		      "435"
	      A_wire_mt		      "(pi/4)*0.0002^2"
	      sigma_0_mt	      "1.7e-8"
	      alpha_0_mt	      "3.9e-3"
	      T_0_mt		      "293"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "X coil \nnormal"
	      Position		      [160, 45, 190, 75]
	      Value		      "[1;0;0]"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Y Magnetorquer \nwithout L"
	      Ports		      [4, 1]
	      Position		      [290, 130, 390, 195]
	      SourceBlock	      "components_lib/Actuator Emulation/Magne"
"torquer without L"
	      SourceType	      "Unknown"
	      ShowPortLabels	      "on"
	      v_max_mt		      "5"
	      coil_dim		      "[0.07 0.21]"
	      n_mt		      "435"
	      A_wire_mt		      "(pi/4)*0.0002^2"
	      sigma_0_mt	      "1.7e-8"
	      alpha_0_mt	      "3.9e-3"
	      T_0_mt		      "293"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Y coil\nnormal"
	      Position		      [165, 140, 195, 170]
	      Value		      "[0;1;0]"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Z Magnetorquer \nwithout L"
	      Ports		      [4, 1]
	      Position		      [290, 240, 390, 305]
	      SourceBlock	      "components_lib/Actuator Emulation/Magne"
"torquer without L"
	      SourceType	      "Unknown"
	      ShowPortLabels	      "on"
	      v_max_mt		      "5"
	      coil_dim		      "[0.07 0.07]"
	      n_mt		      "865"
	      A_wire_mt		      "(pi/4)*0.0002^2"
	      sigma_0_mt	      "1.7e-8"
	      alpha_0_mt	      "3.9e-3"
	      T_0_mt		      "293"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Z coil\nnormal"
	      Position		      [165, 250, 195, 280]
	      Value		      "[0;0;1]"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "N_mt(S)"
	      Position		      [560, 158, 590, 172]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	      PortDimensions	      "3"
	    }
	    Line {
	      SrcBlock		      "T"
	      SrcPort		      1
	      Points		      [180, 0; 0, -90]
	      Branch {
		Points			[0, -110]
		Branch {
		  Points		  [0, -95]
		  DstBlock		  "X Magnetorquer \nwithout L "
		  DstPort		  4
		}
		Branch {
		  DstBlock		  "Y Magnetorquer \nwithout L"
		  DstPort		  4
		}
	      }
	      Branch {
		DstBlock		"Z Magnetorquer \nwithout L"
		DstPort			4
	      }
	    }
	    Line {
	      SrcBlock		      "B(S)"
	      SrcPort		      1
	      Points		      [150, 0; 0, -50]
	      Branch {
		Points			[0, -110]
		Branch {
		  Points		  [0, -95]
		  DstBlock		  "X Magnetorquer \nwithout L "
		  DstPort		  3
		}
		Branch {
		  DstBlock		  "Y Magnetorquer \nwithout L"
		  DstPort		  3
		}
	      }
	      Branch {
		DstBlock		"Z Magnetorquer \nwithout L"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "Z coil\nnormal"
	      SrcPort		      1
	      DstBlock		      "Z Magnetorquer \nwithout L"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      3
	      Points		      [20, 0; 0, 85]
	      DstBlock		      "Z Magnetorquer \nwithout L"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Y coil\nnormal"
	      SrcPort		      1
	      DstBlock		      "Y Magnetorquer \nwithout L"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      DstBlock		      "Y Magnetorquer \nwithout L"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Z Magnetorquer \nwithout L"
	      SrcPort		      1
	      Points		      [40, 0; 0, -90]
	      DstBlock		      "Add"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Y Magnetorquer \nwithout L"
	      SrcPort		      1
	      DstBlock		      "Add"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "X Magnetorquer \nwithout L "
	      SrcPort		      1
	      Points		      [40, 0; 0, 75]
	      DstBlock		      "Add"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      Points		      [20, 0; 0, -70]
	      DstBlock		      "X Magnetorquer \nwithout L "
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "X coil \nnormal"
	      SrcPort		      1
	      DstBlock		      "X Magnetorquer \nwithout L "
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Add"
	      SrcPort		      1
	      DstBlock		      "N_mt(S)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "v_in"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "NSO momentum wheels"
	  Ports			  [1, 3]
	  Position		  [285, 138, 390, 222]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  MaskPromptString	  "Initial Angular Velocity"
	  MaskStyleString	  "edit"
	  MaskTunableValueString  "on"
	  MaskEnableString	  "on"
	  MaskVisibilityString	  "on"
	  MaskToolTipString	  "on"
	  MaskVariables		  "w_mw_i=@1;"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "[1078.6 1078.6 1078.6] *0.5"
	  System {
	    Name		    "NSO momentum wheels"
	    Location		    [202, 74, 1022, 722]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "A4"
	    PaperUnits		    "centimeters"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "omega_ref"
	      Position		      [25, 223, 55, 237]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Add"
	      Ports		      [3, 1]
	      Position		      [580, 179, 610, 211]
	      ShowName		      off
	      Inputs		      "+++"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      OutScaling	      "2^-10"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Add1"
	      Ports		      [3, 1]
	      Position		      [580, 224, 610, 256]
	      ShowName		      off
	      Inputs		      "+++"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      OutScaling	      "2^-10"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Add2"
	      Ports		      [3, 1]
	      Position		      [580, 264, 610, 296]
	      ShowName		      off
	      Inputs		      "+++"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      OutScaling	      "2^-10"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      Ports		      [1, 3]
	      Position		      [90, 201, 95, 259]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "3"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [380, 27, 410, 58]
	      ShowName		      off
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      Ports		      [2, 1]
	      Position		      [380, 72, 410, 103]
	      ShowName		      off
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      Ports		      [2, 1]
	      Position		      [380, 177, 410, 208]
	      ShowName		      off
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      Ports		      [2, 1]
	      Position		      [380, 222, 410, 253]
	      ShowName		      off
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product4"
	      Ports		      [2, 1]
	      Position		      [380, 327, 410, 358]
	      ShowName		      off
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product5"
	      Ports		      [2, 1]
	      Position		      [380, 372, 410, 403]
	      ShowName		      off
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Produt1"
	      Ports		      [2, 1]
	      Position		      [380, 262, 410, 293]
	      ShowName		      off
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Produt2"
	      Ports		      [2, 1]
	      Position		      [380, 412, 410, 443]
	      ShowName		      off
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Produt6"
	      Ports		      [2, 1]
	      Position		      [380, 112, 410, 143]
	      ShowName		      off
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "X Momentum wheel"
	      Ports		      [1, 3]
	      Position		      [210, 50, 295, 110]
	      SourceBlock	      "components_lib/Actuator Emulation/NSO m"
"w HW"
	      SourceType	      "Unknown"
	      ShowPortLabels	      "on"
	      C_p		      "0.4"
	      C_i		      "0.04"
	      w_mw_init		      "w_mw_i(1)"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "X wheel"
	      Position		      [150, 120, 180, 150]
	      Value		      "[1;0;0]"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Y Momentum wheel"
	      Ports		      [1, 3]
	      Position		      [210, 200, 295, 260]
	      SourceBlock	      "components_lib/Actuator Emulation/NSO m"
"w HW"
	      SourceType	      "Unknown"
	      ShowPortLabels	      "on"
	      C_p		      "0.4"
	      C_i		      "0.04"
	      w_mw_init		      "w_mw_i(2)"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Y wheel"
	      Position		      [150, 270, 180, 300]
	      Value		      "[0;1;0]"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Z Momentum wheel"
	      Ports		      [1, 3]
	      Position		      [210, 350, 295, 410]
	      SourceBlock	      "components_lib/Actuator Emulation/NSO m"
"w HW"
	      SourceType	      "Unknown"
	      ShowPortLabels	      "on"
	      C_p		      "0.4"
	      C_i		      "0.04"
	      w_mw_init		      "w_mw_i(3)"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Z wheel"
	      Position		      [150, 420, 180, 450]
	      Value		      "[0;0;1]"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "omega_mw"
	      Position		      [660, 188, 690, 202]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	      PortDimensions	      "3"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "N_mw"
	      Position		      [660, 233, 690, 247]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	      PortDimensions	      "3"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "H_mw"
	      Position		      [660, 273, 690, 287]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	      PortDimensions	      "3"
	    }
	    Line {
	      SrcBlock		      "Produt6"
	      SrcPort		      1
	      Points		      [60, 0; 0, 140]
	      DstBlock		      "Add2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Add2"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "H_mw"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      Points		      [75, 0; 0, 140]
	      DstBlock		      "Add1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      Points		      [90, 0; 0, 140]
	      DstBlock		      "Add"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Add1"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "N_mw"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "X wheel"
	      SrcPort		      1
	      Points		      [0, 0; 150, 0]
	      Branch {
		Points			[0, -40]
		Branch {
		  Points		  [0, -45]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "Product1"
		  DstPort		  2
		}
	      }
	      Branch {
		DstBlock		"Produt6"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Add"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "omega_mw"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "X Momentum wheel"
	      SrcPort		      3
	      Points		      [15, 0; 0, 20]
	      DstBlock		      "Produt6"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "X Momentum wheel"
	      SrcPort		      1
	      Points		      [15, 0; 0, -25]
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "X Momentum wheel"
	      SrcPort		      2
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Y wheel"
	      SrcPort		      1
	      Points		      [0, 0; 150, 0]
	      Branch {
		Points			[0, -40]
		Branch {
		  Points		  [0, -45]
		  DstBlock		  "Product2"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "Product3"
		  DstPort		  2
		}
	      }
	      Branch {
		DstBlock		"Produt1"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Y Momentum wheel"
	      SrcPort		      3
	      Points		      [15, 0; 0, 20]
	      DstBlock		      "Produt1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Y Momentum wheel"
	      SrcPort		      1
	      Points		      [15, 0; 0, -25]
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Y Momentum wheel"
	      SrcPort		      2
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "Add"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      DstBlock		      "Add1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Produt1"
	      SrcPort		      1
	      DstBlock		      "Add2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Z wheel"
	      SrcPort		      1
	      Points		      [0, 0; 150, 0]
	      Branch {
		Points			[0, -40]
		Branch {
		  Points		  [0, -45]
		  DstBlock		  "Product4"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "Product5"
		  DstPort		  2
		}
	      }
	      Branch {
		DstBlock		"Produt2"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Z Momentum wheel"
	      SrcPort		      3
	      Points		      [15, 0; 0, 20]
	      DstBlock		      "Produt2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Z Momentum wheel"
	      SrcPort		      1
	      Points		      [15, 0; 0, -25]
	      DstBlock		      "Product4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Z Momentum wheel"
	      SrcPort		      2
	      DstBlock		      "Product5"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Produt2"
	      SrcPort		      1
	      Points		      [140, 0; 0, -140]
	      DstBlock		      "Add2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Product5"
	      SrcPort		      1
	      Points		      [125, 0; 0, -140]
	      DstBlock		      "Add1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Product4"
	      SrcPort		      1
	      Points		      [110, 0; 0, -140]
	      DstBlock		      "Add"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "omega_ref"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      Points		      [25, 0; 0, -130]
	      DstBlock		      "X Momentum wheel"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      3
	      Points		      [25, 0; 0, 130]
	      DstBlock		      "Z Momentum wheel"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      DstBlock		      "Y Momentum wheel"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "NSO mw HW"
	  Ports			  [1, 3]
	  Position		  [165, 140, 250, 200]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  MaskPromptString	  "Motor controller p-gain|Motor controller i-"
"gain|Initial Angular velocity "
	  MaskStyleString	  "edit,edit,edit"
	  MaskTunableValueString  "on,on,on"
	  MaskCallbackString	  "||"
	  MaskEnableString	  "on,on,on"
	  MaskVisibilityString	  "on,on,on"
	  MaskToolTipString	  "on,on,on"
	  MaskVarAliasString	  ",,"
	  MaskVariables		  "C_p=@1;C_i=@2;w_mw_init=@3;"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "0.4|0.04|w_mw_i(1)"
	  MaskTabNameString	  ",,"
	  System {
	    Name		    "NSO mw HW"
	    Location		    [202, 74, 1022, 722]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "A4"
	    PaperUnits		    "centimeters"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "omega_ref"
	      Position		      [25, 73, 55, 87]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Momentum wheel"
	      Ports		      [1, 3]
	      Position		      [345, 49, 435, 111]
	      SourceBlock	      "components_lib/Actuator Emulation/Momen"
"tum wheel"
	      SourceType	      "Unknown"
	      ShowPortLabels	      "on"
	      v_max_mw		      "3"
	      v_min_mw		      "0"
	      R_mw		      "8"
	      L_mw		      "0.07e-3"
	      C_t		      "2.67e-3"
	      C_s		      "0.0027"
	      mu_f		      "39.606e-9"
	      I_mw		      "4.139e-6"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "PI-controller"
	      Ports		      [1, 1]
	      Position		      [165, 52, 275, 108]
	      SourceBlock	      "components_lib/Actuator Emulation/PI-co"
"ntroller"
	      SourceType	      "Unknown"
	      ShowPortLabels	      "on"
	      PI_cp		      "C_p"
	      PI_ci		      "C_i"
	      int_limit_max	      "3"
	      int_limit_min	      "-3"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum3"
	      Ports		      [2, 1]
	      Position		      [90, 70, 110, 90]
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "-+|"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "omega_mw"
	      Position		      [490, 28, 520, 42]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	      PortDimensions	      "1"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "N_mw"
	      Position		      [490, 73, 520, 87]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	      PortDimensions	      "1"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "H_mw"
	      Position		      [490, 113, 520, 127]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	      PortDimensions	      "1"
	    }
	    Line {
	      SrcBlock		      "omega_ref"
	      SrcPort		      1
	      DstBlock		      "Sum3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum3"
	      SrcPort		      1
	      DstBlock		      "PI-controller"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "PI-controller"
	      SrcPort		      1
	      DstBlock		      "Momentum wheel"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Momentum wheel"
	      SrcPort		      2
	      DstBlock		      "N_mw"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Momentum wheel"
	      SrcPort		      1
	      Points		      [15, 0; 0, -25]
	      Branch {
		DstBlock		"omega_mw"
		DstPort			1
	      }
	      Branch {
		Points			[-355, 0]
		DstBlock		"Sum3"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Momentum wheel"
	      SrcPort		      3
	      Points		      [15, 0; 0, 20]
	      DstBlock		      "H_mw"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "PI-controller"
	  Ports			  [1, 1]
	  Position		  [410, 147, 520, 203]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  MaskPromptString	  "Porpotional gain|Integrator gain|Integrator"
" limit max|Integrator limit min"
	  MaskStyleString	  "edit,edit,edit,edit"
	  MaskTunableValueString  "on,on,on,on"
	  MaskCallbackString	  "|||"
	  MaskEnableString	  "on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on"
	  MaskToolTipString	  "on,on,on,on"
	  MaskVarAliasString	  ",,,"
	  MaskVariables		  "PI_cp=@1;PI_ci=@2;int_limit_max=@3;int_limi"
"t_min=@4;"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "C_p|C_i|3|-3"
	  MaskTabNameString	  ",,,"
	  System {
	    Name		    "PI-controller"
	    Location		    [445, 444, 861, 629]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "error signal"
	      Position		      [25, 78, 55, 92]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "C_i"
	      Position		      [175, 30, 205, 60]
	      Gain		      "PI_ci"
	      ParameterDataTypeMode   "Inherit via internal rule"
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "C_p"
	      Position		      [125, 115, 155, 145]
	      Gain		      "PI_cp"
	      ParameterDataTypeMode   "Inherit via internal rule"
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Integrator
	      Name		      "Integrator"
	      Ports		      [1, 1]
	      Position		      [115, 29, 145, 61]
	      LimitOutput	      on
	      UpperSaturationLimit    "int_limit_max"
	      LowerSaturationLimit    "int_limit_min"
	      IgnoreLimit	      off
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [250, 75, 270, 95]
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "+|+"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "control signal"
	      Position		      [315, 78, 345, 92]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "C_i"
	      SrcPort		      1
	      Points		      [50, 0]
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "C_p"
	      SrcPort		      1
	      Points		      [100, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Integrator"
	      SrcPort		      1
	      DstBlock		      "C_i"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "error signal"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[0, -40]
		DstBlock		"Integrator"
		DstPort			1
	      }
	      Branch {
		Points			[0, 45]
		DstBlock		"C_p"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "control signal"
	      DstPort		      1
	    }
	  }
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "Disturbances"
      Ports		      []
      Position		      [418, 39, 562, 111]
      TreatAsAtomicUnit	      off
      MinAlgLoopOccurrences   off
      RTWSystemCode	      "Auto"
      System {
	Name			"Disturbances"
	Location		[195, 91, 1007, 676]
	Open			off
	ModelBrowserVisibility	on
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  SubSystem
	  Name			  "Atmospheric"
	  Ports			  [4, 2]
	  Position		  [95, 183, 205, 252]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "Atmospheric"
	    Location		    [155, 72, 959, 562]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "portrait"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "q(I->S)"
	      Position		      [15, 128, 45, 142]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "V_sc(I)"
	      Position		      [15, 218, 45, 232]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "R_com(S)"
	      Position		      [15, 23, 45, 37]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	      Port {
		PortNumber		1
		Name			"Center of Mass"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Deployed"
	      Position		      [15, 168, 45, 182]
	      Port		      "4"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "C_D"
	      Position		      [280, 175, 335, 205]
	      Value		      "Cd"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Density"
	      Position		      [255, 295, 315, 325]
	      Value		      "rho"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Dimensions"
	      Position		      [145, 60, 195, 80]
	      Value		      "Dim"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Exposed area"
	      Ports		      [3, 1]
	      Position		      [120, 128, 225, 182]
	      SourceBlock	      "components_lib/Disturbances/Exposed are"
"a"
	      SourceType	      "Unknown"
	      ShowPortLabels	      "on"
	      dim_sat_area	      "Dim"
	      dim_sat_array	      "[-0.30,-0.30]"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [430, 221, 475, 249]
	      ShowName		      off
	      Gain		      "-1/2"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      Position		      [225, 56, 270, 84]
	      ShowName		      off
	      Gain		      "1/2"
	      Port {
		PortNumber		1
		Name			"Geometric Center"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Model Info"
	      Ports		      []
	      Position		      [464, 270, 616, 324]
	      ShowName		      off
	      FontName		      "Arial"
	      SourceBlock	      "simulink/Model-Wide\nUtilities/Model In"
"fo"
	      SourceType	      "CMBlock"
	      ShowPortLabels	      "on"
	      InitialBlockCM	      "None"
	      BlockCM		      "None"
	      Frame		      "on"
	      DisplayStringWithTags   "The Constants Cd, \nrho and Dim are spe"
"cified \nin the NSO mask"
	      MaskDisplayString	      "The Constants Cd, \\nrho and Dim are sp"
"ecified \\nin the NSO mask"
	      HorizontalTextAlignment "Center"
	      LeftAlignmentValue      "0.5"
	      SourceBlockDiagram      "components_lib"
	      TagMaxNumber	      "20"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      Ports		      [2, 1]
	      Position		      [220, 194, 245, 316]
	      InputSameDT	      off
	      RndMeth		      "Floor"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      Ports		      [2, 1]
	      Position		      [265, 231, 310, 264]
	      ShowName		      off
	      InputSameDT	      off
	      RndMeth		      "Floor"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      Ports		      [2, 1]
	      Position		      [340, 221, 365, 339]
	      ShowName		      off
	      InputSameDT	      off
	      RndMeth		      "Floor"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product4"
	      Ports		      [2, 1]
	      Position		      [390, 145, 410, 325]
	      ShowName		      off
	      InputSameDT	      off
	      RndMeth		      "Floor"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [355, 20, 375, 40]
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "|-+"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Vector rotation by q"
	      Ports		      [2, 1]
	      Position		      [505, 105, 565, 145]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/Vector rotation by q"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "cross_product_no_fnc"
	      Ports		      [2, 1]
	      Position		      [600, 16, 670, 74]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/cross_product_no_fnc"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Math
	      Name		      "math\noperation"
	      Ports		      [1, 1]
	      Position		      [150, 205, 190, 245]
	      ShowName		      off
	      Operator		      "magnitude^2"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "to unit vector"
	      Ports		      [1, 1]
	      Position		      [75, 272, 135, 298]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/to unit vector"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "N_atm(S)"
	      Position		      [700, 38, 730, 52]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "F_atm(I)"
	      Position		      [700, 228, 730, 242]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "cross_product_no_fnc"
	      DstPort		      1
	    }
	    Line {
	      Name		      "Center of Mass"
	      Labels		      [1, 1]
	      SrcBlock		      "R_com(S)"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      Name		      "Geometric Center"
	      Labels		      [0, 0]
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      Points		      [90, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Dimensions"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Gain1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Vector rotation by q"
	      SrcPort		      1
	      Points		      [5, 0; 0, -65]
	      DstBlock		      "cross_product_no_fnc"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		DstBlock		"F_atm(I)"
		DstPort			1
	      }
	      Branch {
		Points			[0, -100]
		DstBlock		"Vector rotation by q"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Product4"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "q(I->S)"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		Points			[0, -20]
		DstBlock		"Vector rotation by q"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Exposed area"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Density"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "math\noperation"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "to unit vector"
	      SrcPort		      1
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "V_sc(I)"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		DstBlock		"to unit vector"
		DstPort			1
	      }
	      Branch {
		DstBlock		"math\noperation"
		DstPort			1
	      }
	      Branch {
		Points			[0, -70]
		DstBlock		"Exposed area"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Exposed area"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "C_D"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Product4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      DstBlock		      "Product4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "cross_product_no_fnc"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "N_atm(S)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Deployed"
	      SrcPort		      1
	      DstBlock		      "Exposed area"
	      DstPort		      3
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Disturbances"
	  Ports			  [13, 2]
	  Position		  [285, 224, 515, 436]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "Disturbances"
	    Location		    [550, 80, 1344, 817]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Moon positon R_m(I)"
	      Position		      [85, 403, 115, 417]
	      NamePlacement	      "alternate"
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	      Port {
		PortNumber		1
		Name			"R_m(I)\n"
		PropagatedSignals	"R_m(I)\n\n"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Sun position R_s(I)"
	      Position		      [85, 63, 115, 77]
	      NamePlacement	      "alternate"
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	      Port {
		PortNumber		1
		Name			"R_s(I)\n"
		PropagatedSignals	"R_s(I)\n"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Inertia folded I_f(C)"
	      Position		      [85, 518, 115, 532]
	      NamePlacement	      "alternate"
	      Port		      "3"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Orbit position R_sc(I)"
	      Position		      [85, 83, 115, 97]
	      Port		      "4"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Attitude q(I -> SC)"
	      Position		      [85, 263, 115, 277]
	      Port		      "5"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Orbit velocity V_sc(I)"
	      Position		      [85, 293, 115, 307]
	      Port		      "6"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Center of mass  R_com(SC)"
	      Position		      [85, 233, 115, 247]
	      Port		      "7"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Mass of Spacecraft\n"
	      Position		      [85, 583, 115, 597]
	      Port		      "8"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "q(SC->C)"
	      Position		      [85, 553, 115, 567]
	      NamePlacement	      "alternate"
	      Port		      "9"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "eclipse"
	      Position		      [85, 123, 115, 137]
	      Port		      "10"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Inertia deployed I_d(C)"
	      Position		      [85, 483, 115, 497]
	      NamePlacement	      "alternate"
	      Port		      "11"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "deployed"
	      Position		      [85, 163, 115, 177]
	      Port		      "12"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "R_com_deployed"
	      Position		      [85, 198, 115, 212]
	      Port		      "13"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Atmospheric"
	      Ports		      [4, 2]
	      Position		      [335, 255, 425, 375]
	      SourceBlock	      "components_lib/Disturbances/Atmospheric"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Gravity"
	      Ports		      [7, 2]
	      Position		      [330, 395, 450, 605]
	      SourceBlock	      "components_lib/Disturbances/Gravity"
	      SourceType	      "Unknown"
	      ShowPortLabels	      "on"
	      G			      "6.673e-11"
	      M_sun		      "1.98892e30"
	      M_moon		      " 7.36e22"
	      M_earth		      "5.9742e24"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Quaternion inverter"
	      Ports		      [1, 1]
	      Position		      [230, 552, 275, 568]
	      SourceBlock	      "components_lib/Math utilities/Quaternio"
"n operations/Quaternion inverter"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Radiation (I)"
	      Ports		      [6, 2]
	      Position		      [335, 53, 435, 187]
	      SourceBlock	      "components_lib/Disturbances/Radiation ("
"I)"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum1"
	      Ports		      [3, 1]
	      Position		      [485, 37, 500, 533]
	      ShowName		      off
	      Inputs		      "+++"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum2"
	      Ports		      [3, 1]
	      Position		      [540, 62, 555, 628]
	      ShowName		      off
	      Inputs		      "+++"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [220, 485, 250, 515]
	      ShowName		      off
	      Criteria		      "u2 > Threshold"
	      InputSameDT	      off
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      Position		      [200, 200, 230, 230]
	      ShowName		      off
	      Criteria		      "u2 > Threshold"
	      InputSameDT	      off
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Disturbance tourque N_dist(sc)"
	      Position		      [620, 278, 650, 292]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Disturbance Force F_dist(I)"
	      Position		      [615, 338, 645, 352]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      Points		      [70, 0]
	      Branch {
		Points			[0, 115]
		DstBlock		"Atmospheric"
		DstPort			3
	      }
	      Branch {
		Points			[0, -85]
		DstBlock		"Radiation (I)"
		DstPort			4
	      }
	    }
	    Line {
	      SrcBlock		      "R_com_deployed"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Center of mass  R_com(SC)"
	      SrcPort		      1
	      Points		      [65, 0]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "q(SC->C)"
	      SrcPort		      1
	      DstBlock		      "Quaternion inverter"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Quaternion inverter"
	      SrcPort		      1
	      DstBlock		      "Gravity"
	      DstPort		      6
	    }
	    Line {
	      SrcBlock		      "Mass of Spacecraft\n"
	      SrcPort		      1
	      DstBlock		      "Gravity"
	      DstPort		      7
	    }
	    Line {
	      Name		      "R_m(I)\n"
	      Labels		      [0, 0]
	      SrcBlock		      "Moon positon R_m(I)"
	      SrcPort		      1
	      DstBlock		      "Gravity"
	      DstPort		      1
	    }
	    Line {
	      Name		      "R_s(I)\n"
	      Labels		      [0, 0]
	      SrcBlock		      "Sun position R_s(I)"
	      SrcPort		      1
	      Points		      [140, 0]
	      Branch {
		Points			[0, 370]
		DstBlock		"Gravity"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Radiation (I)"
		DstPort			1
	      }
	    }
	    Line {
	      Labels		      [1, 0]
	      SrcBlock		      "Attitude q(I -> SC)"
	      SrcPort		      1
	      Points		      [170, 0]
	      Branch {
		Points			[0, 0]
		Branch {
		  DstBlock		  "Atmospheric"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, -160]
		  DstBlock		  "Radiation (I)"
		  DstPort		  3
		}
	      }
	      Branch {
		Points			[0, 260]
		DstBlock		"Gravity"
		DstPort			5
	      }
	    }
	    Line {
	      SrcBlock		      "Orbit position R_sc(I)"
	      SrcPort		      1
	      Points		      [155, 0]
	      Branch {
		Points			[0, 380]
		DstBlock		"Gravity"
		DstPort			3
	      }
	      Branch {
		DstBlock		"Radiation (I)"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Orbit velocity V_sc(I)"
	      SrcPort		      1
	      DstBlock		      "Atmospheric"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Radiation (I)"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Sum1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Atmospheric"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Gravity"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Radiation (I)"
	      SrcPort		      2
	      DstBlock		      "Sum2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Atmospheric"
	      SrcPort		      2
	      DstBlock		      "Sum2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Gravity"
	      SrcPort		      2
	      Points		      [70, 0]
	      DstBlock		      "Sum2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Sum1"
	      SrcPort		      1
	      DstBlock		      "Disturbance tourque N_dist(sc)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum2"
	      SrcPort		      1
	      DstBlock		      "Disturbance Force F_dist(I)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "eclipse"
	      SrcPort		      1
	      Points		      [45, 0; 0, 20]
	      DstBlock		      "Radiation (I)"
	      DstPort		      5
	    }
	    Line {
	      SrcBlock		      "Inertia folded I_f(C)"
	      SrcPort		      1
	      Points		      [55, 0; 0, -15]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Inertia deployed I_d(C)"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Gravity"
	      DstPort		      4
	    }
	    Line {
	      Labels		      [0, 0]
	      SrcBlock		      "deployed"
	      SrcPort		      1
	      Points		      [55, 0]
	      Branch {
		Points			[0, 45]
		DstBlock		"Switch1"
		DstPort			2
	      }
	      Branch {
		Points			[0, 45]
		Branch {
		  Points		  [0, 145]
		  Branch {
		    Points		    [0, 140]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Atmospheric"
		    DstPort		    4
		  }
		}
		Branch {
		  Points		  [0, -45]
		  DstBlock		  "Radiation (I)"
		  DstPort		  6
		}
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Exposed area"
	  Ports			  [3, 1]
	  Position		  [475, 74, 575, 116]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  MaskPromptString	  "Satellite Body Dimentions [x,y,z]|Solar Arr"
"ay Dimentions [array1_y,array2_x]"
	  MaskStyleString	  "edit,edit"
	  MaskTunableValueString  "on,on"
	  MaskCallbackString	  "|"
	  MaskEnableString	  "on,on"
	  MaskVisibilityString	  "on,on"
	  MaskToolTipString	  "on,on"
	  MaskVarAliasString	  ","
	  MaskVariables		  "dim_sat_area=@1;dim_sat_array=@2;"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "Dim|[-0.30,-0.30]"
	  MaskTabNameString	  ","
	  System {
	    Name		    "Exposed area"
	    Location		    [-6, 80, 1214, 678]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "portrait"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "quaternion"
	      Position		      [60, 33, 90, 47]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "vector"
	      Position		      [60, 73, 90, 87]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "deployed"
	      Position		      [1050, 348, 1080, 362]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      Ports		      [2, 1]
	      Position		      [535, 88, 590, 132]
	      ShowName		      off
	      Multiplication	      "Matrix(*)"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product3"
	      Ports		      [2, 1]
	      Position		      [535, 188, 590, 232]
	      ShowName		      off
	      Multiplication	      "Matrix(*)"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product4"
	      Ports		      [2, 1]
	      Position		      [535, 138, 590, 182]
	      ShowName		      off
	      Multiplication	      "Matrix(*)"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product5"
	      Ports		      [2, 1]
	      Position		      [535, 238, 590, 282]
	      ShowName		      off
	      Multiplication	      "Matrix(*)"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product6"
	      Ports		      [2, 1]
	      Position		      [535, 288, 590, 332]
	      ShowName		      off
	      Multiplication	      "Matrix(*)"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Projection Matrix1"
	      Ports		      [1, 1]
	      Position		      [360, 18, 455, 82]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Projection Matrix1"
		Location		[556, 405, 1297, 898]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "n-vector"
		  Position		  [25, 213, 55, 227]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Add"
		  Ports			  [3, 1]
		  Position		  [445, 34, 475, 66]
		  Inputs		  "+++"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  OutScaling		  "2^-10"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux"
		  Ports			  [1, 3]
		  Position		  [80, 76, 90, 364]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain1"
		  Position		  [400, 113, 425, 137]
		  ShowName		  off
		  Gain			  "-1"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain2"
		  Position		  [400, 138, 425, 162]
		  ShowName		  off
		  Gain			  "-1"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain3"
		  Position		  [400, 163, 425, 187]
		  ShowName		  off
		  Gain			  "-1"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain4"
		  Position		  [400, 213, 425, 237]
		  ShowName		  off
		  Gain			  "-1"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain5"
		  Position		  [400, 238, 425, 262]
		  ShowName		  off
		  Gain			  "-1"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain6"
		  Position		  [400, 263, 425, 287]
		  ShowName		  off
		  Gain			  "-1"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFuncion"
		  Ports			  [1, 1]
		  Position		  [175, 90, 205, 120]
		  ShowName		  off
		  Operator		  "square"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction"
		  Ports			  [1, 1]
		  Position		  [495, 35, 525, 65]
		  ShowName		  off
		  Operator		  "reciprocal"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction1"
		  Ports			  [1, 1]
		  Position		  [175, 205, 205, 235]
		  ShowName		  off
		  Operator		  "square"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction2"
		  Ports			  [1, 1]
		  Position		  [175, 280, 205, 310]
		  ShowName		  off
		  Operator		  "square"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [9, 1]
		  Position		  [445, 88, 450, 312]
		  ShowName		  off
		  Inputs		  "9"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  Ports			  [2, 1]
		  Position		  [175, 127, 205, 158]
		  ShowName		  off
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Product
		  Name			  "Product2"
		  Ports			  [2, 1]
		  Position		  [175, 167, 205, 198]
		  ShowName		  off
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Product
		  Name			  "Product3"
		  Ports			  [2, 1]
		  Position		  [175, 242, 205, 273]
		  ShowName		  off
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Product
		  Name			  "Prouct"
		  Ports			  [2, 1]
		  Position		  [590, 177, 620, 208]
		  ShowName		  off
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Reference
		  Name			  "Reshape"
		  Ports			  [1, 1]
		  Position		  [480, 188, 510, 212]
		  SourceBlock		  "simulink/Math\nOperations/Reshape"
		  SourceType		  "Reshape"
		  OutputDimensionality	  "Customize"
		  OutputDimensions	  "[3,3]"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [285, 90, 305, 110]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|++"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [2, 1]
		  Position		  [240, 190, 260, 210]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "+|+"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum2"
		  Ports			  [2, 1]
		  Position		  [285, 290, 305, 310]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "++|"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Outport
		  Name			  "P matrix"
		  Position		  [645, 188, 675, 202]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  1
		  Points		  [0, 0; 35, 0]
		  Branch {
		    Points		    [0, -20]
		    DstBlock		    "Math\nFuncion"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 10]
		    Branch {
		    DstBlock		    "Product1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 40]
		    DstBlock		    "Product2"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  2
		  Points		  [0, 0; 55, 0]
		  Branch {
		    DstBlock		    "Math\nFunction1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -70]
		    DstBlock		    "Product1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 30]
		    DstBlock		    "Product3"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  3
		  Points		  [15, 0]
		  Branch {
		    Points		    [0, -125]
		    DstBlock		    "Product2"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [50, 0; 0, -20]
		    Branch {
		    DstBlock		    "Math\nFunction2"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Product3"
		    DstPort		    2
		    }
		  }
		}
		Line {
		  SrcBlock		  "Gain1"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Gain2"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Gain3"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Gain4"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "Gain5"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "Gain6"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [0, 0; 160, 0]
		  Branch {
		    Points		    [0, -20]
		    DstBlock		    "Gain1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 30]
		    DstBlock		    "Gain3"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Product2"
		  SrcPort		  1
		  Points		  [10, 0; 0, -10; 135, 0]
		  Branch {
		    Points		    [0, -25]
		    DstBlock		    "Gain2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 75]
		    DstBlock		    "Gain5"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Product3"
		  SrcPort		  1
		  Points		  [0, 0; 165, 0]
		  Branch {
		    Points		    [0, -35]
		    DstBlock		    "Gain4"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 15]
		    DstBlock		    "Gain6"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum2"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  9
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "Math\nFuncion"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [35, 0; 0, 10]
		    Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [30, 0; 0, 160]
		    DstBlock		    "Sum2"
		    DstPort		    1
		    }
		  }
		  Branch {
		    Points		    [0, -65]
		    DstBlock		    "Add"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Math\nFunction2"
		  SrcPort		  1
		  Points		  [40, 0; 0, -60]
		  Branch {
		    DstBlock		    "Sum1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [45, 0; 0, -100]
		    Branch {
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [35, 0; 0, -75]
		    DstBlock		    "Add"
		    DstPort		    3
		    }
		  }
		}
		Line {
		  SrcBlock		  "Math\nFunction1"
		  SrcPort		  1
		  Points		  [0, 0; 25, 0]
		  Branch {
		    Points		    [0, 80]
		    DstBlock		    "Sum2"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -120; 20, 0]
		    Branch {
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -50]
		    DstBlock		    "Add"
		    DstPort		    2
		    }
		  }
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "Reshape"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "n-vector"
		  SrcPort		  1
		  DstBlock		  "Demux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Math\nFunction"
		  SrcPort		  1
		  Points		  [0, 135]
		  DstBlock		  "Prouct"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Add"
		  SrcPort		  1
		  DstBlock		  "Math\nFunction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Reshape"
		  SrcPort		  1
		  DstBlock		  "Prouct"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Prouct"
		  SrcPort		  1
		  DstBlock		  "P matrix"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Satellite Area"
	      Ports		      [3, 1]
	      Position		      [745, 100, 880, 220]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Satellite Area"
		Location		[48, 152, 898, 602]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "px"
		  Position		  [25, 23, 55, 37]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "py"
		  Position		  [25, 58, 55, 72]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "pz"
		  Position		  [25, 93, 55, 107]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product"
		  Ports			  [2, 1]
		  Position		  [300, 32, 330, 63]
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product1"
		  Ports			  [2, 1]
		  Position		  [300, 107, 330, 138]
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product2"
		  Ports			  [2, 1]
		  Position		  [300, 182, 330, 213]
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [3, 1]
		  Position		  [445, 110, 475, 140]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "+|+|+"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Reference
		  Name			  "cross_product_no_fnc1"
		  Ports			  [2, 1]
		  Position		  [160, 101, 250, 154]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/cross_product_no_fnc"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "cross_product_no_fnc2"
		  Ports			  [2, 1]
		  Position		  [160, 176, 250, 229]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/cross_product_no_fnc"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "cross_product_no_fnc3"
		  Ports			  [2, 1]
		  Position		  [160, 26, 250, 79]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/cross_product_no_fnc"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Math
		  Name			  "inv1"
		  Ports			  [1, 1]
		  Position		  [360, 35, 390, 65]
		  Operator		  "sqrt"
		}
		Block {
		  BlockType		  Math
		  Name			  "inv2"
		  Ports			  [1, 1]
		  Position		  [360, 110, 390, 140]
		  Operator		  "sqrt"
		}
		Block {
		  BlockType		  Math
		  Name			  "inv3"
		  Ports			  [1, 1]
		  Position		  [360, 185, 390, 215]
		  Operator		  "sqrt"
		}
		Block {
		  BlockType		  Outport
		  Name			  "area_sat"
		  Position		  [510, 118, 540, 132]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "area_sat"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "inv3"
		  SrcPort		  1
		  Points		  [65, 0]
		  DstBlock		  "Sum"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "inv2"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "pz"
		  SrcPort		  1
		  Points		  [40, 0; 0, 40]
		  Branch {
		    Points		    [0, 75]
		    DstBlock		    "cross_product_no_fnc2"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "cross_product_no_fnc1"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "cross_product_no_fnc2"
		  SrcPort		  1
		  Points		  [0, 0; 15, 0]
		  Branch {
		    Points		    [0, -15]
		    DstBlock		    "Dot Product2"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Dot Product2"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Dot Product2"
		  SrcPort		  1
		  DstBlock		  "inv3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "cross_product_no_fnc1"
		  SrcPort		  1
		  Points		  [0, 0; 15, 0]
		  Branch {
		    DstBlock		    "Dot Product1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -15]
		    DstBlock		    "Dot Product1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Dot Product1"
		  SrcPort		  1
		  DstBlock		  "inv2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "py"
		  SrcPort		  1
		  Points		  [60, 0]
		  Branch {
		    Points		    [0, 125]
		    DstBlock		    "cross_product_no_fnc2"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "cross_product_no_fnc3"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "inv1"
		  SrcPort		  1
		  Points		  [65, 0]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "px"
		  SrcPort		  1
		  Points		  [0, 10; 70, 0]
		  Branch {
		    Points		    [0, 75]
		    DstBlock		    "cross_product_no_fnc1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "cross_product_no_fnc3"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "cross_product_no_fnc3"
		  SrcPort		  1
		  Points		  [0, 0; 15, 0]
		  Branch {
		    Points		    [0, -15]
		    DstBlock		    "Dot Product"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Dot Product"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Dot Product"
		  SrcPort		  1
		  DstBlock		  "inv1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Shadow Area"
	      Ports		      [5, 1]
	      Position		      [745, 279, 880, 381]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Shadow Area"
		Location		[-15, 30, 1349, 725]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "px"
		  Position		  [50, 163, 80, 177]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "py"
		  Position		  [50, 193, 80, 207]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "pz"
		  Position		  [50, 223, 80, 237]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "f1_py"
		  Position		  [50, 288, 80, 302]
		  Port			  "4"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "f2_px"
		  Position		  [50, 393, 80, 407]
		  Port			  "5"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Add"
		  Ports			  [2, 1]
		  Position		  [1040, 247, 1070, 278]
		  ShowName		  off
		  Inputs		  "+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  OutScaling		  "2^-10"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Add1"
		  Ports			  [2, 1]
		  Position		  [1040, 167, 1070, 198]
		  ShowName		  off
		  Inputs		  "+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  OutScaling		  "2^-10"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product1"
		  Ports			  [2, 1]
		  Position		  [285, 137, 315, 168]
		  ShowName		  off
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product10"
		  Ports			  [2, 1]
		  Position		  [790, 192, 820, 223]
		  ShowName		  off
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product11"
		  Ports			  [2, 1]
		  Position		  [740, 512, 770, 543]
		  ShowName		  off
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product12"
		  Ports			  [2, 1]
		  Position		  [740, 17, 770, 48]
		  ShowName		  off
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product2"
		  Ports			  [2, 1]
		  Position		  [285, 187, 315, 218]
		  ShowName		  off
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product3"
		  Ports			  [2, 1]
		  Position		  [285, 327, 315, 358]
		  ShowName		  off
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product4"
		  Ports			  [2, 1]
		  Position		  [285, 377, 315, 408]
		  ShowName		  off
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product5"
		  Ports			  [2, 1]
		  Position		  [790, 252, 820, 283]
		  ShowName		  off
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product6"
		  Ports			  [2, 1]
		  Position		  [740, 67, 770, 98]
		  ShowName		  off
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product7"
		  Ports			  [2, 1]
		  Position		  [740, 462, 770, 493]
		  ShowName		  off
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product8"
		  Ports			  [2, 1]
		  Position		  [790, 132, 820, 163]
		  ShowName		  off
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product9"
		  Ports			  [2, 1]
		  Position		  [790, 302, 820, 333]
		  ShowName		  off
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  Position		  [920, 255, 950, 285]
		  ShowName		  off
		  Gain			  "1/2"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain1"
		  Position		  [920, 305, 950, 335]
		  ShowName		  off
		  Gain			  "1/2"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain2"
		  Position		  [920, 135, 950, 165]
		  ShowName		  off
		  Gain			  "1/2"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain3"
		  Position		  [920, 195, 950, 225]
		  ShowName		  off
		  Gain			  "1/2"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [2, 1]
		  Position		  [340, 147, 370, 178]
		  ShowName		  off
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		  Port {
		    PortNumber		    1
		    Name		    "pxp"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		  }
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  Ports			  [2, 1]
		  Position		  [340, 197, 370, 228]
		  ShowName		  off
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		  Port {
		    PortNumber		    1
		    Name		    "pyp"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		  }
		}
		Block {
		  BlockType		  Product
		  Name			  "Product2"
		  Ports			  [2, 1]
		  Position		  [340, 337, 370, 368]
		  ShowName		  off
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		  Port {
		    PortNumber		    1
		    Name		    "f1_pyp"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		  }
		}
		Block {
		  BlockType		  Product
		  Name			  "Product3"
		  Ports			  [2, 1]
		  Position		  [340, 387, 370, 418]
		  ShowName		  off
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		  Port {
		    PortNumber		    1
		    Name		    "f2_pxp"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Subsystem"
		  Ports			  [1, 1]
		  Position		  [370, 475, 425, 495]
		  ShowName		  off
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  System {
		    Name		    "Subsystem"
		    Location		    [83, 488, 371, 688]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "x"
		    Position		    [40, 33, 70, 47]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    Port {
		    PortNumber		    1
		    Name		    "pxp"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		    }
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Dot Product13"
		    Ports		    [2, 1]
		    Position		    [115, 32, 145, 63]
		    ShowName		    off
		    SourceBlock		    "simulink/Math\nOperations/Dot Pro"
"duct"
		    SourceType		    "Dot Product"
		    InputSameDT		    "on"
		    OutputDataTypeScalingMode "Inherit via internal rule"
		    OutDataType		    "sfix(16)"
		    OutScaling		    "2^-10"
		    LockScale		    "off"
		    RndMeth		    "Floor"
		    DoSatur		    "off"
		    }
		    Block {
		    BlockType		    Math
		    Name		    "inv9"
		    Ports		    [1, 1]
		    Position		    [170, 35, 200, 65]
		    ShowName		    off
		    Operator		    "sqrt"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "norm(x)"
		    Position		    [225, 43, 255, 57]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "inv9"
		    SrcPort		    1
		    DstBlock		    "norm(x)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Dot Product13"
		    SrcPort		    1
		    DstBlock		    "inv9"
		    DstPort		    1
		    }
		    Line {
		    Name		    "pxp"
		    SrcBlock		    "x"
		    SrcPort		    1
		    Points		    [0, 0; 15, 0]
		    Branch {
		    Points		    [0, 15]
		    DstBlock		    "Dot Product13"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Dot Product13"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Subsystem1"
		  Ports			  [1, 1]
		  Position		  [430, 420, 485, 440]
		  ShowName		  off
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  System {
		    Name		    "Subsystem1"
		    Location		    [83, 488, 371, 688]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "x"
		    Position		    [40, 33, 70, 47]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    Port {
		    PortNumber		    1
		    Name		    "pxp"
		    PropagatedSignals	    "f2_pxp"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		    }
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Dot Product13"
		    Ports		    [2, 1]
		    Position		    [115, 32, 145, 63]
		    ShowName		    off
		    SourceBlock		    "simulink/Math\nOperations/Dot Pro"
"duct"
		    SourceType		    "Dot Product"
		    InputSameDT		    "on"
		    OutputDataTypeScalingMode "Inherit via internal rule"
		    OutDataType		    "sfix(16)"
		    OutScaling		    "2^-10"
		    LockScale		    "off"
		    RndMeth		    "Floor"
		    DoSatur		    "off"
		    }
		    Block {
		    BlockType		    Math
		    Name		    "inv9"
		    Ports		    [1, 1]
		    Position		    [170, 35, 200, 65]
		    ShowName		    off
		    Operator		    "sqrt"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "norm(x)"
		    Position		    [225, 43, 255, 57]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    Name		    "pxp"
		    SrcBlock		    "x"
		    SrcPort		    1
		    Points		    [0, 0; 15, 0]
		    Branch {
		    DstBlock		    "Dot Product13"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 15]
		    DstBlock		    "Dot Product13"
		    DstPort		    2
		    }
		    }
		    Line {
		    SrcBlock		    "Dot Product13"
		    SrcPort		    1
		    DstBlock		    "inv9"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "inv9"
		    SrcPort		    1
		    DstBlock		    "norm(x)"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Subsystem2"
		  Ports			  [1, 1]
		  Position		  [410, 315, 465, 335]
		  ShowName		  off
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  System {
		    Name		    "Subsystem2"
		    Location		    [83, 488, 371, 688]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "x"
		    Position		    [40, 33, 70, 47]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    Port {
		    PortNumber		    1
		    Name		    "pxp"
		    PropagatedSignals	    "f1_pyp"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		    }
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Dot Product13"
		    Ports		    [2, 1]
		    Position		    [115, 32, 145, 63]
		    ShowName		    off
		    SourceBlock		    "simulink/Math\nOperations/Dot Pro"
"duct"
		    SourceType		    "Dot Product"
		    InputSameDT		    "on"
		    OutputDataTypeScalingMode "Inherit via internal rule"
		    OutDataType		    "sfix(16)"
		    OutScaling		    "2^-10"
		    LockScale		    "off"
		    RndMeth		    "Floor"
		    DoSatur		    "off"
		    }
		    Block {
		    BlockType		    Math
		    Name		    "inv9"
		    Ports		    [1, 1]
		    Position		    [170, 35, 200, 65]
		    ShowName		    off
		    Operator		    "sqrt"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "norm(x)"
		    Position		    [225, 43, 255, 57]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "inv9"
		    SrcPort		    1
		    DstBlock		    "norm(x)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Dot Product13"
		    SrcPort		    1
		    DstBlock		    "inv9"
		    DstPort		    1
		    }
		    Line {
		    Name		    "pxp"
		    SrcBlock		    "x"
		    SrcPort		    1
		    Points		    [0, 0; 15, 0]
		    Branch {
		    Points		    [0, 15]
		    DstBlock		    "Dot Product13"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Dot Product13"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Subsystem3"
		  Ports			  [1, 1]
		  Position		  [370, 260, 425, 280]
		  ShowName		  off
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  System {
		    Name		    "Subsystem3"
		    Location		    [77, 463, 365, 663]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "x"
		    Position		    [40, 33, 70, 47]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    Port {
		    PortNumber		    1
		    Name		    "pxp"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		    }
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Dot Product13"
		    Ports		    [2, 1]
		    Position		    [115, 32, 145, 63]
		    ShowName		    off
		    SourceBlock		    "simulink/Math\nOperations/Dot Pro"
"duct"
		    SourceType		    "Dot Product"
		    InputSameDT		    "on"
		    OutputDataTypeScalingMode "Inherit via internal rule"
		    OutDataType		    "sfix(16)"
		    OutScaling		    "2^-10"
		    LockScale		    "off"
		    RndMeth		    "Floor"
		    DoSatur		    "off"
		    }
		    Block {
		    BlockType		    Math
		    Name		    "inv9"
		    Ports		    [1, 1]
		    Position		    [170, 35, 200, 65]
		    ShowName		    off
		    Operator		    "sqrt"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "norm(x)"
		    Position		    [225, 43, 255, 57]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "inv9"
		    SrcPort		    1
		    DstBlock		    "norm(x)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Dot Product13"
		    SrcPort		    1
		    DstBlock		    "inv9"
		    DstPort		    1
		    }
		    Line {
		    Name		    "pxp"
		    SrcBlock		    "x"
		    SrcPort		    1
		    Points		    [0, 0; 15, 0]
		    Branch {
		    Points		    [0, 15]
		    DstBlock		    "Dot Product13"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Dot Product13"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [1165, 200, 1195, 230]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "+|+"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [2, 1]
		  Position		  [855, 495, 875, 515]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "+|-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum2"
		  Ports			  [2, 1]
		  Position		  [850, 50, 870, 70]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "-|+"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum3"
		  Ports			  [2, 1]
		  Position		  [495, 450, 515, 470]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "-|+"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum4"
		  Ports			  [2, 1]
		  Position		  [490, 290, 510, 310]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "-|+"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  Position		  [1115, 160, 1145, 190]
		  ShowName		  off
		  InputSameDT		  off
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch1"
		  Position		  [1115, 240, 1145, 270]
		  ShowName		  off
		  InputSameDT		  off
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch2"
		  Position		  [565, 445, 595, 475]
		  ShowName		  off
		  InputSameDT		  off
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch3"
		  Position		  [555, 285, 585, 315]
		  ShowName		  off
		  InputSameDT		  off
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Reference
		  Name			  "cross_product_no_fnc1"
		  Tag			  "cross_product_no_fnc"
		  Ports			  [2, 1]
		  Position		  [685, 123, 740, 152]
		  ShowName		  off
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/cross_product_no_fnc"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "cross_product_no_fnc2"
		  Tag			  "cross_product_no_fnc"
		  Ports			  [2, 1]
		  Position		  [685, 258, 740, 287]
		  ShowName		  off
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/cross_product_no_fnc"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "cross_product_no_fnc3"
		  Tag			  "cross_product_no_fnc"
		  Ports			  [2, 1]
		  Position		  [685, 308, 740, 337]
		  ShowName		  off
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/cross_product_no_fnc"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "cross_product_no_fnc4"
		  Tag			  "cross_product_no_fnc"
		  Ports			  [2, 1]
		  Position		  [685, 198, 740, 227]
		  ShowName		  off
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/cross_product_no_fnc"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Math
		  Name			  "inv1"
		  Ports			  [1, 1]
		  Position		  [795, 515, 825, 545]
		  ShowName		  off
		  Operator		  "sqrt"
		}
		Block {
		  BlockType		  Math
		  Name			  "inv2"
		  Ports			  [1, 1]
		  Position		  [845, 255, 875, 285]
		  ShowName		  off
		  Operator		  "sqrt"
		}
		Block {
		  BlockType		  Math
		  Name			  "inv3"
		  Ports			  [1, 1]
		  Position		  [795, 70, 825, 100]
		  ShowName		  off
		  Operator		  "sqrt"
		}
		Block {
		  BlockType		  Math
		  Name			  "inv4"
		  Ports			  [1, 1]
		  Position		  [795, 465, 825, 495]
		  ShowName		  off
		  Operator		  "sqrt"
		}
		Block {
		  BlockType		  Math
		  Name			  "inv5"
		  Ports			  [1, 1]
		  Position		  [845, 135, 875, 165]
		  ShowName		  off
		  Operator		  "sqrt"
		}
		Block {
		  BlockType		  Math
		  Name			  "inv6"
		  Ports			  [1, 1]
		  Position		  [845, 305, 875, 335]
		  ShowName		  off
		  Operator		  "sqrt"
		}
		Block {
		  BlockType		  Math
		  Name			  "inv7"
		  Ports			  [1, 1]
		  Position		  [845, 195, 875, 225]
		  ShowName		  off
		  Operator		  "sqrt"
		}
		Block {
		  BlockType		  Math
		  Name			  "inv8"
		  Ports			  [1, 1]
		  Position		  [795, 20, 825, 50]
		  ShowName		  off
		  Operator		  "sqrt"
		}
		Block {
		  BlockType		  Reference
		  Name			  "to unit vector"
		  Ports			  [1, 1]
		  Position		  [160, 159, 215, 181]
		  ShowName		  off
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "to unit vector1"
		  Ports			  [1, 1]
		  Position		  [160, 189, 215, 211]
		  ShowName		  off
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "to unit vector2"
		  Ports			  [1, 1]
		  Position		  [160, 339, 215, 361]
		  ShowName		  off
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "to unit vector3"
		  Ports			  [1, 1]
		  Position		  [160, 389, 215, 411]
		  ShowName		  off
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Outport
		  Name			  "area_shadow"
		  Position		  [1230, 208, 1260, 222]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Subsystem1"
		  SrcPort		  1
		  Points		  [15, 0]
		  DstBlock		  "Sum3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Subsystem2"
		  SrcPort		  1
		  DstBlock		  "Sum4"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Subsystem3"
		  SrcPort		  1
		  Points		  [70, 0]
		  DstBlock		  "Sum4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Subsystem"
		  SrcPort		  1
		  DstBlock		  "Sum3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum4"
		  SrcPort		  1
		  DstBlock		  "Switch3"
		  DstPort		  2
		}
		Line {
		  Labels		  [0, 0]
		  SrcBlock		  "Switch3"
		  SrcPort		  1
		  Points		  [0, -20; 65, 0]
		  Branch {
		    Points		    [0, -60]
		    DstBlock		    "cross_product_no_fnc4"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "cross_product_no_fnc2"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Sum3"
		  SrcPort		  1
		  DstBlock		  "Switch2"
		  DstPort		  2
		}
		Line {
		  Name			  "f2_pxp"
		  Labels		  [2, 1]
		  SrcBlock		  "Product3"
		  SrcPort		  1
		  Points		  [0, 0; 35, 0]
		  Branch {
		    Points		    [140, 0]
		    DstBlock		    "Switch2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 25]
		    DstBlock		    "Subsystem1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "inv8"
		  SrcPort		  1
		  DstBlock		  "Sum2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "inv3"
		  SrcPort		  1
		  DstBlock		  "Sum2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "inv1"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "inv4"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  Points		  [215, 0; 0, -250]
		  DstBlock		  "Switch1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum2"
		  SrcPort		  1
		  Points		  [220, 0; 0, 115]
		  DstBlock		  "Switch"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Dot Product12"
		  SrcPort		  1
		  DstBlock		  "inv8"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Dot Product11"
		  SrcPort		  1
		  DstBlock		  "inv1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Dot Product1"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Dot Product2"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Dot Product3"
		  SrcPort		  1
		  DstBlock		  "Product2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Dot Product4"
		  SrcPort		  1
		  DstBlock		  "Product3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch1"
		  SrcPort		  1
		  Points		  [30, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  Points		  [30, 0]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Gain3"
		  SrcPort		  1
		  Points		  [145, 0]
		  DstBlock		  "Switch1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Add"
		  SrcPort		  1
		  DstBlock		  "Switch1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Gain2"
		  SrcPort		  1
		  Points		  [145, 0]
		  DstBlock		  "Switch"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Add1"
		  SrcPort		  1
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Gain1"
		  SrcPort		  1
		  Points		  [55, 0; 0, -130]
		  DstBlock		  "Add1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Add"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "inv7"
		  SrcPort		  1
		  Points		  [0, 0; 10, 0]
		  Branch {
		    Points		    [0, 25; 75, 0; 0, 20]
		    DstBlock		    "Add"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Gain3"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "inv5"
		  SrcPort		  1
		  Points		  [0, 0; 20, 0]
		  Branch {
		    DstBlock		    "Gain2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 25]
		    DstBlock		    "Add1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "inv6"
		  SrcPort		  1
		  DstBlock		  "Gain1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "inv2"
		  SrcPort		  1
		  DstBlock		  "Gain"
		  DstPort		  1
		}
		Line {
		  Name			  "pyp"
		  Labels		  [0, 0]
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [205, 0]
		  Branch {
		    Points		    [0, -140; 135, 0]
		    Branch {
		    Points		    [0, 15]
		    DstBlock		    "Dot Product6"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Dot Product6"
		    DstPort		    1
		    }
		  }
		  Branch {
		    Points		    [45, 0; 0, 100]
		    DstBlock		    "cross_product_no_fnc3"
		    DstPort		    1
		  }
		}
		Line {
		  Name			  "f1_pyp"
		  Labels		  [0, 0]
		  SrcBlock		  "Product2"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    Points		    [0, -30]
		    DstBlock		    "Subsystem2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [150, 0]
		    DstBlock		    "Switch3"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "Dot Product10"
		  SrcPort		  1
		  DstBlock		  "inv7"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "cross_product_no_fnc4"
		  SrcPort		  1
		  Points		  [0, 0; 15, 0]
		  Branch {
		    Points		    [0, -15]
		    DstBlock		    "Dot Product10"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Dot Product10"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Dot Product9"
		  SrcPort		  1
		  DstBlock		  "inv6"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "cross_product_no_fnc3"
		  SrcPort		  1
		  Points		  [0, 0; 15, 0]
		  Branch {
		    Points		    [0, -15]
		    DstBlock		    "Dot Product9"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Dot Product9"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Dot Product5"
		  SrcPort		  1
		  DstBlock		  "inv2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "cross_product_no_fnc2"
		  SrcPort		  1
		  Points		  [0, 0; 15, 0]
		  Branch {
		    Points		    [0, -15]
		    DstBlock		    "Dot Product5"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Dot Product5"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Dot Product8"
		  SrcPort		  1
		  DstBlock		  "inv5"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "cross_product_no_fnc1"
		  SrcPort		  1
		  Points		  [0, 0; 15, 0]
		  Branch {
		    DstBlock		    "Dot Product8"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 15]
		    DstBlock		    "Dot Product8"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Dot Product7"
		  SrcPort		  1
		  DstBlock		  "inv4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Switch2"
		  SrcPort		  1
		  Points		  [10, 0; 0, -130]
		  Branch {
		    Points		    [0, -185]
		    DstBlock		    "cross_product_no_fnc1"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "cross_product_no_fnc3"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Dot Product6"
		  SrcPort		  1
		  DstBlock		  "inv3"
		  DstPort		  1
		}
		Line {
		  Name			  "pxp"
		  Labels		  [0, 0]
		  SrcBlock		  "Product"
		  SrcPort		  1
		  Points		  [270, 0; 0, 100]
		  Branch {
		    DstBlock		    "cross_product_no_fnc2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 205; 70, 0]
		    Branch {
		    Points		    [0, 15]
		    DstBlock		    "Dot Product7"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Dot Product7"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "area_shadow"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "pz"
		  SrcPort		  1
		  Points		  [0, 0; 175, 0]
		  Branch {
		    Points		    [0, -20]
		    Branch {
		    DstBlock		    "Dot Product2"
		    DstPort		    2
		    }
		    Branch {
		    Points		    [0, -50]
		    DstBlock		    "Dot Product1"
		    DstPort		    2
		    }
		  }
		  Branch {
		    Points		    [0, 105]
		    Branch {
		    Points		    [0, 50]
		    DstBlock		    "Dot Product4"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Dot Product3"
		    DstPort		    1
		    }
		  }
		}
		Line {
		  SrcBlock		  "to unit vector1"
		  SrcPort		  1
		  Points		  [0, 0; 20, 0]
		  Branch {
		    Points		    [0, 20]
		    DstBlock		    "Product1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -5]
		    DstBlock		    "Dot Product2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "to unit vector2"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, 10]
		    DstBlock		    "Product2"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Dot Product3"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "to unit vector3"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, 10]
		    DstBlock		    "Product3"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Dot Product4"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "to unit vector"
		  SrcPort		  1
		  Points		  [0, 0; 20, 0]
		  Branch {
		    DstBlock		    "Product"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -25]
		    DstBlock		    "Dot Product1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "f2_px"
		  SrcPort		  1
		  Points		  [45, 0]
		  Branch {
		    Points		    [0, 105; 210, 0]
		    Branch {
		    Points		    [210, 0]
		    DstBlock		    "Switch2"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [0, -20]
		    DstBlock		    "Subsystem"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "to unit vector3"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "f1_py"
		  SrcPort		  1
		  Points		  [0, 0; 60, 0]
		  Branch {
		    Points		    [0, -50; 175, 0]
		    Branch {
		    Points		    [0, 25]
		    DstBlock		    "Subsystem3"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [220, 0]
		    DstBlock		    "Switch3"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "to unit vector2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "py"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, -70]
		    Branch {
		    Points		    [0, -105; 620, 0]
		    Branch {
		    Points		    [0, 15]
		    DstBlock		    "Dot Product12"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Dot Product12"
		    DstPort		    1
		    }
		    }
		    Branch {
		    DstBlock		    "cross_product_no_fnc1"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "to unit vector1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "px"
		  SrcPort		  1
		  Points		  [30, 0; 0, 0]
		  Branch {
		    Points		    [0, 350; 600, 0; 0, 0]
		    Branch {
		    Points		    [0, 15]
		    DstBlock		    "Dot Product11"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Dot Product11"
		    DstPort		    1
		    }
		  }
		  Branch {
		    Points		    [0, -60; 540, 0; 0, 95]
		    DstBlock		    "cross_product_no_fnc4"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 0]
		    DstBlock		    "to unit vector"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Solar Array Area"
	      Ports		      [4, 1]
	      Position		      [745, 437, 880, 538]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Solar Array Area"
		Location		[54, 101, 904, 551]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "f1_py"
		  Position		  [25, 33, 55, 47]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "px"
		  Position		  [25, 58, 55, 72]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "py"
		  Position		  [25, 113, 55, 127]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "f2_px"
		  Position		  [25, 143, 55, 157]
		  Port			  "4"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product"
		  Ports			  [2, 1]
		  Position		  [300, 32, 330, 63]
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product1"
		  Ports			  [2, 1]
		  Position		  [300, 112, 330, 143]
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  Position		  [425, 35, 455, 65]
		  Gain			  "2"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain1"
		  Position		  [425, 115, 455, 145]
		  Gain			  "2"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [2, 1]
		  Position		  [490, 70, 520, 100]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "+|||+"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Reference
		  Name			  "cross_product_no_fnc1"
		  Ports			  [2, 1]
		  Position		  [160, 106, 250, 159]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/cross_product_no_fnc"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "cross_product_no_fnc3"
		  Ports			  [2, 1]
		  Position		  [160, 26, 250, 79]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/cross_product_no_fnc"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Math
		  Name			  "inv1"
		  Ports			  [1, 1]
		  Position		  [360, 35, 390, 65]
		  Operator		  "sqrt"
		}
		Block {
		  BlockType		  Math
		  Name			  "inv2"
		  Ports			  [1, 1]
		  Position		  [360, 115, 390, 145]
		  Operator		  "sqrt"
		}
		Block {
		  BlockType		  Outport
		  Name			  "area_flaps"
		  Position		  [575, 78, 605, 92]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "area_flaps"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Gain1"
		  SrcPort		  1
		  Points		  [45, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "inv2"
		  SrcPort		  1
		  DstBlock		  "Gain1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Dot Product1"
		  SrcPort		  1
		  DstBlock		  "inv2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "cross_product_no_fnc1"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    DstBlock		    "Dot Product1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -15]
		    DstBlock		    "Dot Product1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "py"
		  SrcPort		  1
		  DstBlock		  "cross_product_no_fnc1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "px"
		  SrcPort		  1
		  DstBlock		  "cross_product_no_fnc3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "f2_px"
		  SrcPort		  1
		  Points		  [0, -5]
		  DstBlock		  "cross_product_no_fnc1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  Points		  [45, 0]
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "inv1"
		  SrcPort		  1
		  DstBlock		  "Gain"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Dot Product"
		  SrcPort		  1
		  DstBlock		  "inv1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "cross_product_no_fnc3"
		  SrcPort		  1
		  Points		  [0, 0; 15, 0]
		  Branch {
		    DstBlock		    "Dot Product"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -15]
		    DstBlock		    "Dot Product"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "f1_py"
		  SrcPort		  1
		  DstBlock		  "cross_product_no_fnc3"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum1"
	      Ports		      [3, 1]
	      Position		      [950, 315, 980, 345]
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "+|-|+"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [1110, 320, 1140, 390]
	      ShowName		      off
	      Criteria		      "u2 ~= 0"
	      InputSameDT	      off
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Vector rotation by q3"
	      Ports		      [2, 1]
	      Position		      [200, 29, 300, 71]
	      SourceBlock	      "components_lib/Math utilities/Quaternio"
"n operations/Vector rotation by q"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "f1_y"
	      Position		      [415, 260, 470, 280]
	      Value		      "[0 dim_sat_array(1) 0]'"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "f2_x"
	      Position		      [415, 310, 470, 330]
	      Value		      " [dim_sat_array(2) 0 0]'"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "to unit vector4"
	      Ports		      [1, 1]
	      Position		      [120, 59, 175, 101]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/to unit vector"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "x"
	      Position		      [415, 110, 470, 130]
	      Value		      "[dim_sat_area(1) 0 0]'"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "y"
	      Position		      [415, 160, 470, 180]
	      Value		      "[0 dim_sat_area(2) 0]'"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "z"
	      Position		      [415, 210, 470, 230]
	      Value		      "[0 0 dim_sat_area(3)]'"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "exposed\narea"
	      Position		      [1175, 348, 1205, 362]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "deployed"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "exposed\narea"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Vector rotation by q3"
	      SrcPort		      1
	      DstBlock		      "Projection Matrix1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum1"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Solar Array Area"
	      SrcPort		      1
	      Points		      [80, 0]
	      DstBlock		      "Sum1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Shadow Area"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Satellite Area"
	      SrcPort		      1
	      Points		      [80, 0; 0, 120]
	      Branch {
		Points			[60, 0; 0, 100]
		DstBlock		"Switch"
		DstPort			3
	      }
	      Branch {
		DstBlock		"Sum1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Product6"
	      SrcPort		      1
	      Points		      [60, 0; 0, 60]
	      Branch {
		Points			[0, 155]
		DstBlock		"Solar Array Area"
		DstPort			4
	      }
	      Branch {
		DstBlock		"Shadow Area"
		DstPort			5
	      }
	    }
	    Line {
	      SrcBlock		      "Product5"
	      SrcPort		      1
	      Points		      [75, 0; 0, 90]
	      Branch {
		DstBlock		"Shadow Area"
		DstPort			4
	      }
	      Branch {
		Points			[0, 100]
		DstBlock		"Solar Array Area"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Product3"
	      SrcPort		      1
	      Points		      [90, 0]
	      Branch {
		Points			[0, 120]
		DstBlock		"Shadow Area"
		DstPort			3
	      }
	      Branch {
		Points			[45, 0]
		DstBlock		"Satellite Area"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "Product4"
	      SrcPort		      1
	      Points		      [105, 0]
	      Branch {
		Points			[0, 150]
		Branch {
		  Points		  [0, 190]
		  DstBlock		  "Solar Array Area"
		  DstPort		  3
		}
		Branch {
		  DstBlock		  "Shadow Area"
		  DstPort		  2
		}
	      }
	      Branch {
		DstBlock		"Satellite Area"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      Points		      [120, 0]
	      Branch {
		Points			[0, 180]
		Branch {
		  Points		  [0, 185]
		  DstBlock		  "Solar Array Area"
		  DstPort		  2
		}
		Branch {
		  DstBlock		  "Shadow Area"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[15, 0]
		DstBlock		"Satellite Area"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "f2_x"
	      SrcPort		      1
	      DstBlock		      "Product6"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "f1_y"
	      SrcPort		      1
	      DstBlock		      "Product5"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "z"
	      SrcPort		      1
	      DstBlock		      "Product3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "y"
	      SrcPort		      1
	      DstBlock		      "Product4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "x"
	      SrcPort		      1
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Projection Matrix1"
	      SrcPort		      1
	      Points		      [35, 0; 0, 50]
	      Branch {
		Points			[0, 50]
		Branch {
		  Points		  [0, 50]
		  Branch {
		    Points		    [0, 50]
		    Branch {
		    Points		    [0, 50]
		    DstBlock		    "Product6"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Product5"
		    DstPort		    1
		    }
		  }
		  Branch {
		    DstBlock		    "Product3"
		    DstPort		    1
		  }
		}
		Branch {
		  DstBlock		  "Product4"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"Product2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "quaternion"
	      SrcPort		      1
	      DstBlock		      "Vector rotation by q3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "vector"
	      SrcPort		      1
	      DstBlock		      "to unit vector4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "to unit vector4"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Vector rotation by q3"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Gravity"
	  Ports			  [7, 2]
	  Position		  [95, 309, 205, 431]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  MaskPromptString	  "Gravitational Constant (m^3/kgs^2)|Mass of "
"the Sun (kg)|Mass of the Moon (kg)|Mass of the Earth (kg)"
	  MaskStyleString	  "edit,edit,edit,edit"
	  MaskTunableValueString  "on,on,on,on"
	  MaskCallbackString	  "|||"
	  MaskEnableString	  "on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on"
	  MaskToolTipString	  "on,on,on,on"
	  MaskVarAliasString	  ",,,"
	  MaskVariables		  "G=@1;M_sun=@2;M_moon=@3;M_earth=@4;"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "6.673e-11|1.98892e30| 7.36e22|5.9742e24"
	  MaskTabNameString	  ",,,"
	  System {
	    Name		    "Gravity"
	    Location		    [238, 106, 1025, 705]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "portrait"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "R_m(I)"
	      Position		      [15, 43, 45, 57]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "R_s(I)"
	      Position		      [15, 163, 45, 177]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "R_sc(I)"
	      Position		      [20, 238, 50, 252]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "I(C)"
	      Position		      [25, 363, 55, 377]
	      Port		      "4"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "q(I -> S)"
	      Position		      [25, 443, 55, 457]
	      Port		      "5"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "q(C->S)"
	      Position		      [25, 403, 55, 417]
	      Port		      "6"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "M_sat"
	      Position		      [15, 133, 45, 147]
	      Port		      "7"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [380, 190, 410, 220]
	      ShowName		      off
	      Gain		      "-1"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Gravity Gradient Torque"
	      Ports		      [4, 1]
	      Position		      [240, 306, 355, 474]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Gravity Gradient Torque"
		Location		[13, 93, 825, 703]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "R_sc(I)"
		  Position		  [15, 78, 45, 92]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "I(C)"
		  Position		  [15, 243, 45, 257]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "q(C->S)"
		  Position		  [15, 38, 45, 52]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "q(I->S)"
		  Position		  [15, 183, 45, 197]
		  Port			  "4"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "\n"
		  Ports			  [3, 1]
		  Position		  [130, 150, 230, 230]
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  System {
		    Name		    "\n"
		    Location		    [50, 230, 683, 522]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "q(C->SC)"
		    Position		    [50, 128, 80, 142]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "q(I -> SC)"
		    Position		    [60, 48, 90, 62]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "R_sc(I)"
		    Position		    [50, 223, 80, 237]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Reverse quaternion rotation"
		    Ports		    [1, 1]
		    Position		    [115, 114, 215, 156]
		    SourceBlock		    "components_lib/Math utilities/Qua"
"ternion operations/Reverse quaternion rotation"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Rotation of q1 by q2"
		    Ports		    [2, 1]
		    Position		    [270, 84, 370, 126]
		    SourceBlock		    "components_lib/Math utilities/Qua"
"ternion operations/Rotation of q1 by q2"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Vector rotation by q"
		    Ports		    [2, 1]
		    Position		    [405, 94, 505, 136]
		    SourceBlock		    "components_lib/Math utilities/Qua"
"ternion operations/Vector rotation by q"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "to unit vector"
		    Ports		    [1, 1]
		    Position		    [130, 209, 230, 251]
		    SourceBlock		    "components_lib/Math utilities/Vec"
"tor operations/to unit vector"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "R_sc(C)"
		    Position		    [540, 108, 570, 122]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Vector rotation by q"
		    SrcPort		    1
		    DstBlock		    "R_sc(C)"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "to unit vector"
		    SrcPort		    1
		    Points		    [155, 0]
		    DstBlock		    "Vector rotation by q"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Rotation of q1 by q2"
		    SrcPort		    1
		    DstBlock		    "Vector rotation by q"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "R_sc(I)"
		    SrcPort		    1
		    DstBlock		    "to unit vector"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Reverse quaternion rotation"
		    SrcPort		    1
		    Points		    [20, 0; 0, -20]
		    DstBlock		    "Rotation of q1 by q2"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "q(C->SC)"
		    SrcPort		    1
		    DstBlock		    "Reverse quaternion rotation"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "q(I -> SC)"
		    SrcPort		    1
		    Points		    [145, 0; 0, 40]
		    DstBlock		    "Rotation of q1 by q2"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Gain
		  Name			  "3*GM"
		  Position		  [450, 83, 560, 127]
		  ShowName		  off
		  Gain			  "3*G*M_earth"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [330, 110, 360, 140]
		  ShowName		  off
		  Value			  "3"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  Position		  [90, 282, 160, 338]
		  ShowName		  off
		  Value			  "[1 0 0;0 1 0;0 0 1]"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant2"
		  Position		  [105, 256, 160, 274]
		  ShowName		  off
		  Value			  "[1 1 1]"
		  VectorParams1D	  off
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot roduct"
		  Ports			  [2, 1]
		  Position		  [140, 77, 170, 108]
		  ShowName		  off
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [2, 1]
		  Position		  [395, 196, 455, 234]
		  ShowName		  off
		  Multiplication	  "Matrix(*)"
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  Ports			  [2, 1]
		  Position		  [300, 251, 345, 284]
		  ShowName		  off
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product2"
		  Ports			  [2, 1]
		  Position		  [210, 241, 255, 274]
		  ShowName		  off
		  Multiplication	  "Matrix(*)"
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product3"
		  Ports			  [2, 1]
		  Position		  [725, 171, 770, 204]
		  ShowName		  off
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Math
		  Name			  "R"
		  Ports			  [2, 1]
		  Position		  [390, 87, 420, 118]
		  Operator		  "pow"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Vector rotation by q"
		  Ports			  [2, 1]
		  Position		  [610, 173, 690, 217]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/Vector rotation by q"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "cross_product_no_fnc"
		  Ports			  [2, 1]
		  Position		  [490, 176, 580, 229]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/cross_product_no_fnc"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Math
		  Name			  "inv"
		  Ports			  [1, 1]
		  Position		  [275, 80, 305, 110]
		  ShowName		  off
		  Operator		  "reciprocal"
		}
		Block {
		  BlockType		  Math
		  Name			  "inv1"
		  Ports			  [1, 1]
		  Position		  [200, 80, 230, 110]
		  ShowName		  off
		  Operator		  "sqrt"
		}
		Block {
		  BlockType		  Reference
		  Name			  "to unit vector"
		  Ports			  [1, 1]
		  Position		  [265, 169, 330, 211]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Outport
		  Name			  "N_gr(S)"
		  Position		  [805, 183, 835, 197]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Vector rotation by q"
		  SrcPort		  1
		  DstBlock		  "Product3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "3*GM"
		  SrcPort		  1
		  Points		  [145, 0]
		  DstBlock		  "Product3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "R_sc(I)"
		  SrcPort		  1
		  Points		  [25, 0]
		  Branch {
		    Points		    [0, 130]
		    DstBlock		    "\n"
		    DstPort		    3
		  }
		  Branch {
		    Points		    [45, 0]
		    Branch {
		    DstBlock		    "Dot roduct"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, 15]
		    DstBlock		    "Dot roduct"
		    DstPort		    2
		    }
		  }
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [100, 0; 0, -35]
		  DstBlock		  "Product1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product2"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant2"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Product2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "I(C)"
		  SrcPort		  1
		  DstBlock		  "Product2"
		  DstPort		  1
		}
		Line {
		  Labels		  [0, 0]
		  SrcBlock		  "Product"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "cross_product_no_fnc"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [25, 0; 0, -65]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "\n"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "to unit vector"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "q(I->S)"
		  SrcPort		  1
		  DstBlock		  "\n"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "q(C->S)"
		  SrcPort		  1
		  Points		  [50, 0]
		  Branch {
		    Labels		    [2, 0]
		    Points		    [0, 120]
		    DstBlock		    "\n"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [495, 0]
		    DstBlock		    "Vector rotation by q"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "to unit vector"
		  SrcPort		  1
		  Points		  [0, 0; 20, 0]
		  Branch {
		    Points		    [0, 35]
		    DstBlock		    "Product"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "cross_product_no_fnc"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [5, 0; 0, -15]
		  DstBlock		  "R"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "inv1"
		  SrcPort		  1
		  DstBlock		  "inv"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "inv"
		  SrcPort		  1
		  DstBlock		  "R"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "R"
		  SrcPort		  1
		  DstBlock		  "3*GM"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product3"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "N_gr(S)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Dot roduct"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "inv1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "cross_product_no_fnc"
		  SrcPort		  1
		  DstBlock		  "Vector rotation by q"
		  DstPort		  2
		}
		Annotation {
		  Name			  "To principal frame"
		  Position		  [184, 220]
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Gravity Moon"
	      Ports		      [2, 1]
	      Position		      [240, 33, 335, 102]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Gravity Moon"
		Location		[235, 219, 812, 519]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "R_m_sat(I)"
		  Position		  [25, 43, 55, 57]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "M_sat"
		  Position		  [30, 158, 60, 172]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Constant
		  Name			  "G*M_m"
		  Position		  [40, 201, 105, 229]
		  ShowName		  off
		  Value			  "G*M_moon"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  Position		  [370, 20, 400, 50]
		  Gain			  "-1"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction1"
		  Ports			  [1, 1]
		  Position		  [255, 85, 285, 115]
		  Operator		  "reciprocal"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction2"
		  Ports			  [1, 1]
		  Position		  [180, 85, 210, 115]
		  Operator		  "magnitude^2"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [2, 1]
		  Position		  [325, 91, 370, 124]
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  Ports			  [2, 1]
		  Position		  [165, 156, 210, 189]
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product2"
		  Ports			  [2, 1]
		  Position		  [455, 86, 500, 119]
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Reference
		  Name			  "to unit vector1"
		  Ports			  [1, 1]
		  Position		  [105, 14, 205, 56]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Outport
		  Name			  "F_m(I)"
		  Position		  [525, 98, 555, 112]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Product2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  Points		  [35, 0]
		  DstBlock		  "Product2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product2"
		  SrcPort		  1
		  DstBlock		  "F_m(I)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "to unit vector1"
		  SrcPort		  1
		  DstBlock		  "Gain"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [95, 0]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Math\nFunction1"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "G*M_m"
		  SrcPort		  1
		  Points		  [20, 0; 0, -35]
		  DstBlock		  "Product1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "M_sat"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Math\nFunction2"
		  SrcPort		  1
		  DstBlock		  "Math\nFunction1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "R_m_sat(I)"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    Points		    [0, -15]
		    DstBlock		    "to unit vector1"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 50]
		    DstBlock		    "Math\nFunction2"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Gravity Sun"
	      Ports		      [2, 1]
	      Position		      [235, 123, 335, 187]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Gravity Sun"
		Location		[371, 171, 963, 511]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "M_sat"
		  Position		  [40, 168, 70, 182]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "R_s_sat(I)"
		  Position		  [30, 58, 60, 72]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Constant
		  Name			  "G*M_s"
		  Position		  [70, 200, 130, 230]
		  ShowName		  off
		  Value			  "G*M_sun"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  Position		  [355, 30, 385, 60]
		  Gain			  "-1"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction1"
		  Ports			  [1, 1]
		  Position		  [265, 95, 295, 125]
		  Operator		  "reciprocal"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction2"
		  Ports			  [1, 1]
		  Position		  [170, 95, 200, 125]
		  Operator		  "magnitude^2"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [2, 1]
		  Position		  [335, 101, 380, 134]
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  Ports			  [2, 1]
		  Position		  [175, 166, 220, 199]
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product2"
		  Ports			  [2, 1]
		  Position		  [465, 96, 510, 129]
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Reference
		  Name			  "to unit vector"
		  Ports			  [1, 1]
		  Position		  [110, 24, 210, 66]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Outport
		  Name			  "F_s(I)"
		  Position		  [550, 108, 580, 122]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Product2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  Points		  [60, 0]
		  DstBlock		  "Product2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "R_s_sat(I)"
		  SrcPort		  1
		  Points		  [15, 0]
		  Branch {
		    Points		    [0, -20]
		    DstBlock		    "to unit vector"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 45]
		    DstBlock		    "Math\nFunction2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Product2"
		  SrcPort		  1
		  DstBlock		  "F_s(I)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "to unit vector"
		  SrcPort		  1
		  DstBlock		  "Gain"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [95, 0]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Math\nFunction1"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "G*M_s"
		  SrcPort		  1
		  Points		  [5, 0; 0, -25]
		  DstBlock		  "Product1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "M_sat"
		  SrcPort		  1
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Math\nFunction2"
		  SrcPort		  1
		  DstBlock		  "Math\nFunction1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [440, 221, 485, 254]
	      ShowName		      off
	      InputSameDT	      off
	      RndMeth		      "Floor"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [3, 1]
	      Position		      [510, 24, 525, 286]
	      ShowName		      off
	      Inputs		      "+++"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum1"
	      Ports		      [2, 1]
	      Position		      [75, 40, 95, 60]
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "|+-"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum2"
	      Ports		      [2, 1]
	      Position		      [110, 160, 130, 180]
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "|+-"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Zonal Harmonics\n Earth"
	      Ports		      [1, 1]
	      Position		      [235, 221, 355, 269]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Zonal Harmonics\n Earth"
		Location		[201, 341, 736, 568]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "R_sat(I)"
		  Position		  [30, 128, 60, 142]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Reference
		  Name			  "Cartesian to\nSpherical"
		  Ports			  [3, 3]
		  Position		  [115, 120, 145, 150]
		  SourceBlock		  "simulink_extras/Transformations/Car"
"tesian to\nSpherical"
		  SourceType		  "Cart2Sph"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux"
		  Ports			  [1, 3]
		  Position		  [295, 116, 300, 154]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "3"
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux1"
		  Ports			  [1, 3]
		  Position		  [95, 116, 100, 154]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "3"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [3, 1]
		  Position		  [385, 116, 390, 154]
		  ShowName		  off
		  Inputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux1"
		  Ports			  [3, 1]
		  Position		  [195, 116, 200, 154]
		  ShowName		  off
		  Inputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  "S-Function"
		  Ports			  [1, 1]
		  Position		  [215, 120, 275, 150]
		  FunctionName		  "zonal"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Spherical to\nCartesian"
		  Ports			  [3, 3]
		  Position		  [335, 120, 365, 150]
		  SourceBlock		  "simulink_extras/Transformations/Sph"
"erical to\nCartesian"
		  SourceType		  "Sph2Cart"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Terminator
		  Name			  "Terminator"
		  Position		  [325, 50, 345, 70]
		}
		Block {
		  BlockType		  Outport
		  Name			  "grad(U_zonal(I))"
		  Position		  [425, 128, 455, 142]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  2
		  Points		  [5, 0]
		  DstBlock		  "Terminator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "R_sat(I)"
		  SrcPort		  1
		  DstBlock		  "Demux1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Spherical to\nCartesian"
		  SrcPort		  2
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Cartesian to\nSpherical"
		  SrcPort		  2
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, 50; 150, 0]
		    DstBlock		    "Spherical to\nCartesian"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Mux1"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Cartesian to\nSpherical"
		  SrcPort		  3
		  DstBlock		  "Mux1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Cartesian to\nSpherical"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux1"
		  SrcPort		  1
		  DstBlock		  "S-Function"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "S-Function"
		  SrcPort		  1
		  DstBlock		  "Demux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  3
		  DstBlock		  "Spherical to\nCartesian"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  1
		  DstBlock		  "Spherical to\nCartesian"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Spherical to\nCartesian"
		  SrcPort		  3
		  DstBlock		  "Mux"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Spherical to\nCartesian"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "grad(U_zonal(I))"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  3
		  DstBlock		  "Cartesian to\nSpherical"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  2
		  DstBlock		  "Cartesian to\nSpherical"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  1
		  DstBlock		  "Cartesian to\nSpherical"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "N_gr(S)"
	      Position		      [545, 383, 575, 397]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "F_gr(I)"
	      Position		      [550, 148, 580, 162]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gravity Sun"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Gravity Moon"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum1"
	      SrcPort		      1
	      DstBlock		      "Gravity Moon"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum2"
	      SrcPort		      1
	      DstBlock		      "Gravity Sun"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "R_s(I)"
	      SrcPort		      1
	      DstBlock		      "Sum2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "R_m(I)"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Zonal Harmonics\n Earth"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "F_gr(I)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "M_sat"
	      SrcPort		      1
	      Points		      [130, 0; 0, 0]
	      Branch {
		Points			[0, 65]
		DstBlock		"Gain"
		DstPort			1
	      }
	      Branch {
		Points			[0, 0]
		Branch {
		  Points		  [0, 0]
		  DstBlock		  "Gravity Sun"
		  DstPort		  1
		}
		Branch {
		  Labels		  [1, 0]
		  Points		  [0, -55]
		  DstBlock		  "Gravity Moon"
		  DstPort		  2
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Gravity Gradient Torque"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "N_gr(S)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "q(I -> S)"
	      SrcPort		      1
	      DstBlock		      "Gravity Gradient Torque"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "q(C->S)"
	      SrcPort		      1
	      DstBlock		      "Gravity Gradient Torque"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "I(C)"
	      SrcPort		      1
	      DstBlock		      "Gravity Gradient Torque"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "R_sc(I)"
	      SrcPort		      1
	      Points		      [30, 0; 0, 0]
	      Branch {
		DstBlock		"Sum1"
		DstPort			2
	      }
	      Branch {
		Points			[0, 0]
		Branch {
		  Points		  [0, 0; 35, 0]
		  Branch {
		    Points		    [0, -50]
		    DstBlock		    "Sum2"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Zonal Harmonics\n Earth"
		    DstPort		    1
		  }
		}
		Branch {
		  Points		  [0, 85]
		  DstBlock		  "Gravity Gradient Torque"
		  DstPort		  1
		}
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Magnetic residual disturbance"
	  Ports			  [4, 1]
	  Position		  [320, 21, 415, 154]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "Magnetic residual disturbance"
	    Location		    [140, 203, 925, 605]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "portrait"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Magnetic electronics dipole, d in(S)"
	      Position		      [115, 53, 145, 67]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Attitude q(I->S)"
	      Position		      [115, 118, 145, 132]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Earth rotation q(I->E)"
	      Position		      [115, 193, 145, 207]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Magnetic field B(E)"
	      Position		      [110, 248, 140, 262]
	      Port		      "4"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Magnetic field E->S"
	      Ports		      [3, 1]
	      Position		      [260, 169, 355, 231]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Magnetic field E->S"
		Location		[151, 242, 841, 569]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "q(I->S)"
		  Position		  [25, 33, 55, 47]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "q(I->E)"
		  Position		  [25, 98, 55, 112]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "B(E)"
		  Position		  [25, 168, 55, 182]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Reference
		  Name			  "Quaternion inverter"
		  Ports			  [1, 1]
		  Position		  [80, 84, 180, 126]
		  SourceBlock		  "Accessories_lib/Math utilities/Quat"
"ernion operations/Quaternion inverter"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Vector rotation by q"
		  Ports			  [2, 1]
		  Position		  [220, 94, 320, 136]
		  SourceBlock		  "Accessories_lib/Math utilities/Vect"
"or operations/Vector rotation by q"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Vector rotation by q1"
		  Ports			  [2, 1]
		  Position		  [355, 29, 455, 71]
		  SourceBlock		  "Accessories_lib/Math utilities/Vect"
"or operations/Vector rotation by q"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Outport
		  Name			  "B(S)"
		  Position		  [480, 43, 510, 57]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Quaternion inverter"
		  SrcPort		  1
		  DstBlock		  "Vector rotation by q"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Vector rotation by q"
		  SrcPort		  1
		  Points		  [10, 0; 0, -55]
		  DstBlock		  "Vector rotation by q1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "q(I->S)"
		  SrcPort		  1
		  DstBlock		  "Vector rotation by q1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Vector rotation by q1"
		  SrcPort		  1
		  DstBlock		  "B(S)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "q(I->E)"
		  SrcPort		  1
		  DstBlock		  "Quaternion inverter"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "B(E)"
		  SrcPort		  1
		  Points		  [145, 0]
		  DstBlock		  "Vector rotation by q"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "cross product"
	      Ports		      [2, 1]
	      Position		      [490, 84, 560, 131]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      MaskType		      "Stateflow"
	      MaskDescription	      "Embedded MATLAB block"
	      MaskDisplay	      "disp('crossproduct');"
	      MaskSelfModifiable      on
	      MaskIconFrame	      on
	      MaskIconOpaque	      off
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"cross product"
		Location		[257, 457, 812, 717]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "u"
		  Position		  [20, 101, 40, 119]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "v"
		  Position		  [20, 136, 40, 154]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Demux
		  Name			  " Demux "
		  Ports			  [1, 1]
		  Position		  [270, 160, 320, 200]
		  Outputs		  "1"
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  " SFunction "
		  Tag			  "Stateflow S-Function components_lib"
" 1"
		  Ports			  [2, 2]
		  Position		  [180, 100, 230, 160]
		  FunctionName		  "sf_sfun"
		  PortCounts		  "[2 2]"
		  Port {
		    PortNumber		    2
		    Name		    "y"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		  }
		}
		Block {
		  BlockType		  Terminator
		  Name			  " Terminator "
		  Position		  [460, 171, 480, 189]
		}
		Block {
		  BlockType		  Outport
		  Name			  "y"
		  Position		  [460, 101, 480, 119]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  " SFunction "
		  SrcPort		  1
		  Points		  [0, 65]
		  DstBlock		  " Demux "
		  DstPort		  1
		}
		Line {
		  SrcBlock		  " Demux "
		  SrcPort		  1
		  DstBlock		  " Terminator "
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "u"
		  SrcPort		  1
		  DstBlock		  " SFunction "
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "v"
		  SrcPort		  1
		  DstBlock		  " SFunction "
		  DstPort		  2
		}
		Line {
		  Name			  "y"
		  Labels		  [0, 0]
		  SrcBlock		  " SFunction "
		  SrcPort		  2
		  DstBlock		  "y"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "N_mres(S)"
	      Position		      [635, 103, 665, 117]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "Magnetic electronics dipole, d in(S)"
	      SrcPort		      1
	      Points		      [160, 0; 0, 35]
	      DstBlock		      "cross product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Magnetic field E->S"
	      SrcPort		      1
	      Points		      [55, 0; 0, -80]
	      DstBlock		      "cross product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "cross product"
	      SrcPort		      1
	      DstBlock		      "N_mres(S)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Earth rotation q(I->E)"
	      SrcPort		      1
	      DstBlock		      "Magnetic field E->S"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Magnetic field B(E)"
	      SrcPort		      1
	      Points		      [90, 0; 0, -35]
	      DstBlock		      "Magnetic field E->S"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Attitude q(I->S)"
	      SrcPort		      1
	      Points		      [85, 0; 0, 55]
	      DstBlock		      "Magnetic field E->S"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Radiation (I)"
	  Ports			  [6, 2]
	  Position		  [95, 31, 200, 114]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "Radiation (I)"
	    Location		    [215, 144, 1499, 914]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "portrait"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "R_s(I)"
	      Position		      [35, 258, 65, 272]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "R_sat(I)"
	      Position		      [35, 288, 65, 302]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "q(I->S)"
	      Position		      [35, 218, 65, 232]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "R_com(S)"
	      Position		      [35, 103, 65, 117]
	      Port		      "4"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "eclipse"
	      Position		      [35, 53, 65, 67]
	      Port		      "5"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Deployed"
	      Position		      [35, 343, 65, 357]
	      Port		      "6"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Absorbtion\nCoefficient"
	      Position		      [395, 275, 425, 305]
	      Value		      "1.55"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Absorbtion\nCoefficient1"
	      Position		      [835, 135, 865, 165]
	      ShowName		      off
	      Value		      "[0;0;0]"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Dimensions"
	      Position		      [120, 135, 170, 155]
	      Value		      "Dim"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Exposed area"
	      Ports		      [3, 1]
	      Position		      [195, 214, 295, 286]
	      SourceBlock	      "components_lib/Disturbances/Exposed are"
"a"
	      SourceType	      "Unknown"
	      ShowPortLabels	      "on"
	      dim_sat_area	      "Dim"
	      dim_sat_array	      "[-0.30,-0.30]"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [580, 280, 610, 310]
	      ShowName		      off
	      Gain		      "-1"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain1"
	      Position		      [200, 131, 245, 159]
	      ShowName		      off
	      Gain		      "1/2"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Momentum flux \nfrom the sun"
	      Position		      [310, 225, 350, 245]
	      NamePlacement	      "alternate"
	      Value		      "4.4e-6"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product1"
	      Ports		      [2, 1]
	      Position		      [375, 226, 420, 259]
	      ShowName		      off
	      InputSameDT	      off
	      RndMeth		      "Floor"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product2"
	      Ports		      [2, 1]
	      Position		      [450, 266, 495, 299]
	      ShowName		      off
	      InputSameDT	      off
	      RndMeth		      "Floor"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product4"
	      Ports		      [2, 1]
	      Position		      [520, 276, 565, 309]
	      ShowName		      off
	      InputSameDT	      off
	      RndMeth		      "Floor"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [80, 255, 100, 275]
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "|+-"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum1"
	      Ports		      [2, 1]
	      Position		      [270, 100, 290, 120]
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "|-+"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [890, 165, 920, 195]
	      Criteria		      "u2 ~= 0"
	      InputSameDT	      off
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Vector rotation by q"
	      Ports		      [2, 1]
	      Position		      [645, 179, 695, 221]
	      SourceBlock	      "components_lib/Math utilities/Quaternio"
"n operations/Vector rotation by q"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "cross_product_no_fnc"
	      Ports		      [2, 1]
	      Position		      [725, 161, 815, 214]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/cross_product_no_fnc"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "to unit vector"
	      Ports		      [1, 1]
	      Position		      [195, 314, 295, 356]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/to unit vector"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "N_rad(S)"
	      Position		      [945, 173, 975, 187]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "F_rad(I)"
	      Position		      [945, 288, 975, 302]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "Absorbtion\nCoefficient1"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "N_rad(S)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "R_s(I)"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "R_sat(I)"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "q(I->S)"
	      SrcPort		      1
	      Points		      [0, 0; 65, 0]
	      Branch {
		Points			[0, -35]
		DstBlock		"Vector rotation by q"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Exposed area"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [0, 0; 10, 0]
	      Branch {
		Points			[0, 70]
		DstBlock		"to unit vector"
		DstPort			1
	      }
	      Branch {
		Labels			[1, 0]
		Points			[0, -15]
		DstBlock		"Exposed area"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Product1"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Product2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Absorbtion\nCoefficient"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Product2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product2"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Product4"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "to unit vector"
	      SrcPort		      1
	      Points		      [205, 0]
	      DstBlock		      "Product4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Product4"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      Points		      [0, 0]
	      Branch {
		DstBlock		"F_rad(I)"
		DstPort			1
	      }
	      Branch {
		Points			[0, -85]
		DstBlock		"Vector rotation by q"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Vector rotation by q"
	      SrcPort		      1
	      DstBlock		      "cross_product_no_fnc"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Exposed area"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Product1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Momentum flux \nfrom the sun"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Product1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "cross_product_no_fnc"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "eclipse"
	      SrcPort		      1
	      Points		      [755, 0; 0, 120]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Dimensions"
	      SrcPort		      1
	      DstBlock		      "Gain1"
	      DstPort		      1
	    }
	    Line {
	      Labels		      [1, 1]
	      SrcBlock		      "R_com(S)"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      1
	    }
	    Line {
	      Labels		      [0, 0]
	      SrcBlock		      "Gain1"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Sum1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum1"
	      SrcPort		      1
	      Points		      [415, 0]
	      DstBlock		      "cross_product_no_fnc"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Deployed"
	      SrcPort		      1
	      Points		      [65, 0; 0, -75]
	      DstBlock		      "Exposed area"
	      DstPort		      3
	    }
	    Annotation {
	      Name		      "Sun line"
	      Position		      [157, 259]
	    }
	    Annotation {
	      Name		      "Earth rotation"
	      Position		      [103, 236]
	    }
	    Annotation {
	      Name		      "Radiation force"
	      Position		      [721, 300]
	    }
	  }
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "Dynamics and Kinematics"
      Ports		      []
      Position		      [582, 134, 722, 204]
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      MinAlgLoopOccurrences   off
      RTWSystemCode	      "Auto"
      System {
	Name			"Dynamics and Kinematics"
	Location		[65, 80, 779, 742]
	Open			off
	ModelBrowserVisibility	on
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  SubSystem
	  Name			  "Spacecraft Dynamics"
	  Ports			  [10, 2]
	  Position		  [45, 29, 255, 186]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "Spacecraft Dynamics"
	    Location		    [321, 238, 1123, 770]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "portrait"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Initial angular velocity W_i(S)"
	      Position		      [55, 38, 85, 52]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Initial attitude q(I->S)"
	      Position		      [55, 78, 85, 92]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Controller frame  q(S->C)"
	      Position		      [55, 148, 85, 162]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Spacecraft Inertia I(C)"
	      Position		      [55, 418, 85, 432]
	      Port		      "4"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "N_mt(S)"
	      Position		      [55, 218, 85, 232]
	      Port		      "5"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "N_mw(S)"
	      Position		      [55, 188, 85, 202]
	      Port		      "6"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "H_mw(S)"
	      Position		      [55, 283, 85, 297]
	      Port		      "7"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Disturbance N_dist(S)"
	      Position		      [55, 253, 85, 267]
	      Port		      "8"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "deployed"
	      Position		      [55, 373, 85, 387]
	      Port		      "9"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Inertia deployed I_d(C)"
	      Position		      [55, 333, 85, 347]
	      Port		      "10"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Reverse quaternion rotation"
	      Ports		      [1, 1]
	      Position		      [215, 134, 315, 176]
	      SourceBlock	      "components_lib/Math utilities/Quaternio"
"n operations/Reverse quaternion rotation"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Rotation of q1 by q1"
	      Ports		      [2, 1]
	      Position		      [610, 74, 670, 116]
	      SourceBlock	      "components_lib/Math utilities/Quaternio"
"n operations/Rotation of q1 by q2"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Rotation of q1 by q2"
	      Ports		      [2, 1]
	      Position		      [215, 74, 315, 116]
	      SourceBlock	      "components_lib/Math utilities/Quaternio"
"n operations/Rotation of q1 by q2"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [3, 1]
	      Position		      [135, 215, 155, 235]
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "+++"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [160, 365, 190, 395]
	      Criteria		      "u2 > Threshold"
	      InputSameDT	      off
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Vector rotation by q"
	      Ports		      [2, 1]
	      Position		      [215, 14, 315, 56]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/Vector rotation by q"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Vector rotation by q1"
	      Ports		      [2, 1]
	      Position		      [215, 194, 315, 236]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/Vector rotation by q"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Vector rotation by q2"
	      Ports		      [2, 1]
	      Position		      [215, 259, 315, 301]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/Vector rotation by q"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Vector rotation by q3"
	      Ports		      [2, 1]
	      Position		      [605, 194, 670, 236]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/Vector rotation by q"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      "S-Function"
	      Name		      "sc-dynamics"
	      Ports		      [4, 1]
	      Position		      [365, 189, 435, 261]
	      FunctionName	      "scdynamics"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "w to q"
	      Ports		      [2, 1]
	      Position		      [475, 64, 575, 106]
	      SourceBlock	      "components_lib/Math utilities/Quaternio"
"n operations/w to q"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Attitude q(I->S)"
	      Position		      [715, 88, 745, 102]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Angular velocity W(S)"
	      Position		      [715, 208, 745, 222]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "N_mw(S)"
	      SrcPort		      1
	      Points		      [55, 0]
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Disturbance N_dist(S)"
	      SrcPort		      1
	      Points		      [55, 0]
	      DstBlock		      "Sum"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "N_mt(S)"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Vector rotation by q1"
	      SrcPort		      1
	      DstBlock		      "sc-dynamics"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Rotation of q1 by q1"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Attitude q(I->S)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "sc-dynamics"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"Vector rotation by q3"
		DstPort			2
	      }
	      Branch {
		Points			[0, -150]
		DstBlock		"w to q"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "H_mw(S)"
	      SrcPort		      1
	      DstBlock		      "Vector rotation by q2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "w to q"
	      SrcPort		      1
	      DstBlock		      "Rotation of q1 by q1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Rotation of q1 by q2"
	      SrcPort		      1
	      DstBlock		      "w to q"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Vector rotation by q3"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Angular velocity W(S)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Reverse quaternion rotation"
	      SrcPort		      1
	      Points		      [265, 0]
	      Branch {
		Points			[0, 50]
		DstBlock		"Vector rotation by q3"
		DstPort			1
	      }
	      Branch {
		Points			[0, -50]
		DstBlock		"Rotation of q1 by q1"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Vector rotation by q2"
	      SrcPort		      1
	      Points		      [15, 0; 0, -45]
	      DstBlock		      "sc-dynamics"
	      DstPort		      3
	    }
	    Line {
	      Labels		      [2, 0]
	      SrcBlock		      "Vector rotation by q"
	      SrcPort		      1
	      Points		      [15, 0; 0, 160]
	      DstBlock		      "sc-dynamics"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Initial attitude q(I->S)"
	      SrcPort		      1
	      DstBlock		      "Rotation of q1 by q2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Controller frame  q(S->C)"
	      SrcPort		      1
	      Points		      [95, 0]
	      Branch {
		Points			[0, -50]
		Branch {
		  Points		  [0, -80]
		  DstBlock		  "Vector rotation by q"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "Rotation of q1 by q2"
		  DstPort		  2
		}
	      }
	      Branch {
		Points			[0, 0]
		Branch {
		  Points		  [0, 50]
		  DstBlock		  "Vector rotation by q1"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "Reverse quaternion rotation"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 115]
		DstBlock		"Vector rotation by q2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Initial angular velocity W_i(S)"
	      SrcPort		      1
	      DstBlock		      "Vector rotation by q"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Vector rotation by q1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [155, 0]
	      DstBlock		      "sc-dynamics"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "Inertia deployed I_d(C)"
	      SrcPort		      1
	      Points		      [55, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Spacecraft Inertia I(C)"
	      SrcPort		      1
	      Points		      [25, 0; 0, -35]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "deployed"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	  }
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "Math utilities"
      Ports		      []
      Position		      [418, 324, 562, 394]
      TreatAsAtomicUnit	      off
      MinAlgLoopOccurrences   off
      RTWSystemCode	      "Auto"
      System {
	Name			"Math utilities"
	Location		[150, 155, 655, 414]
	Open			off
	ModelBrowserVisibility	on
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"A4"
	PaperUnits		"centimeters"
	ZoomFactor		"100"
	Block {
	  BlockType		  SubSystem
	  Name			  "Quaternion operations"
	  Ports			  []
	  Position		  [197, 24, 342, 93]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "Quaternion operations"
	    Location		    [123, 93, 696, 401]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    212
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "A4"
	    PaperUnits		    "centimeters"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      SubSystem
	      Name		      "Quarternion error"
	      Ports		      [2, 1]
	      Position		      [430, 93, 530, 137]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Quarternion error"
		Location		[332, 330, 764, 585]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "q"
		  Position		  [25, 33, 55, 47]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "q2"
		  Position		  [100, 73, 130, 87]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Reference
		  Name			  "Quaternion inverter1"
		  Ports			  [1, 1]
		  Position		  [80, 25, 120, 55]
		  ShowName		  off
		  SourceBlock		  "components_lib/Math utilities/Quate"
"rnion operations/Quaternion inverter"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "qmul no func"
		  Ports			  [2, 1]
		  Position		  [155, 49, 220, 91]
		  SourceBlock		  "components_lib/Math utilities/Quate"
"rnion operations/qmul no func"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Outport
		  Name			  "\"q1-q2\""
		  Position		  [245, 63, 275, 77]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Quaternion inverter1"
		  SrcPort		  1
		  Points		  [0, 20]
		  DstBlock		  "qmul no func"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "q2"
		  SrcPort		  1
		  DstBlock		  "qmul no func"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "q"
		  SrcPort		  1
		  DstBlock		  "Quaternion inverter1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "qmul no func"
		  SrcPort		  1
		  DstBlock		  "\"q1-q2\""
		  DstPort		  1
		}
		Annotation {
		  Name			  ""
		  Position		  [179, 135]
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Quaternion inverter"
	      Ports		      [1, 1]
	      Position		      [55, 24, 155, 66]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Quaternion inverter"
		Location		[386, 212, 884, 512]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "q"
		  Position		  [90, 48, 120, 62]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux"
		  Ports			  [1, 4]
		  Position		  [145, 36, 150, 74]
		  BackgroundColor	  "black"
		  ShowName		  off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux1"
		  Ports			  [1, 3]
		  Position		  [245, 31, 250, 69]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "3"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  Position		  [195, 35, 225, 65]
		  NamePlacement		  "alternate"
		  Gain			  "-1"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [4, 1]
		  Position		  [275, 36, 280, 74]
		  ShowName		  off
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux1"
		  Ports			  [3, 1]
		  Position		  [175, 31, 180, 69]
		  ShowName		  off
		  Inputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Outport
		  Name			  "q^-1"
		  Position		  [305, 48, 335, 62]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "q"
		  SrcPort		  1
		  DstBlock		  "Demux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "q^-1"
		  DstPort		  1
		}
		Line {
		  Labels		  [1, 0]
		  SrcBlock		  "Demux"
		  SrcPort		  4
		  DstBlock		  "Mux"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  2
		  DstBlock		  "Mux1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  3
		  DstBlock		  "Mux1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Mux1"
		  SrcPort		  1
		  DstBlock		  "Gain"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  2
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  3
		  DstBlock		  "Mux"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Demux1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      "S-Function"
	      Name		      "Quaternion mulitiplication"
	      Ports		      [2, 1]
	      Position		      [305, 94, 405, 136]
	      FunctionName	      "qmul"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Reverse quaternion rotation"
	      Ports		      [1, 1]
	      Position		      [180, 24, 280, 66]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Reverse quaternion rotation"
		Location		[432, 379, 930, 679]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "q"
		  Position		  [110, 103, 140, 117]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Quaternion inverter"
		  Ports			  [1, 1]
		  Position		  [190, 89, 290, 131]
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  System {
		    Name		    "Quaternion inverter"
		    Location		    [386, 212, 884, 512]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "A4"
		    PaperUnits		    "centimeters"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "q"
		    Position		    [90, 48, 120, 62]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Demux
		    Name		    "Demux"
		    Ports		    [1, 4]
		    Position		    [145, 36, 150, 74]
		    BackgroundColor	    "black"
		    ShowName		    off
		    }
		    Block {
		    BlockType		    Demux
		    Name		    "Demux1"
		    Ports		    [1, 3]
		    Position		    [245, 31, 250, 69]
		    BackgroundColor	    "black"
		    ShowName		    off
		    Outputs		    "3"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain"
		    Position		    [195, 35, 225, 65]
		    NamePlacement	    "alternate"
		    Gain		    "-1"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [4, 1]
		    Position		    [275, 36, 280, 74]
		    ShowName		    off
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux1"
		    Ports		    [3, 1]
		    Position		    [175, 31, 180, 69]
		    ShowName		    off
		    Inputs		    "3"
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "q^-1"
		    Position		    [305, 48, 335, 62]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Gain"
		    SrcPort		    1
		    DstBlock		    "Demux1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    3
		    DstBlock		    "Mux"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    2
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    1
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux1"
		    SrcPort		    1
		    DstBlock		    "Gain"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    3
		    DstBlock		    "Mux1"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    2
		    DstBlock		    "Mux1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    1
		    DstBlock		    "Mux1"
		    DstPort		    1
		    }
		    Line {
		    Labels		    [1, 0]
		    SrcBlock		    "Demux"
		    SrcPort		    4
		    DstBlock		    "Mux"
		    DstPort		    4
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "q^-1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "q"
		    SrcPort		    1
		    DstBlock		    "Demux"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Outport
		  Name			  "q_opposit"
		  Position		  [370, 103, 400, 117]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "q"
		  SrcPort		  1
		  DstBlock		  "Quaternion inverter"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Quaternion inverter"
		  SrcPort		  1
		  DstBlock		  "q_opposit"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Rotation from q1 to q2"
	      Ports		      [2, 1]
	      Position		      [55, 94, 155, 136]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Rotation from q1 to q2"
		Location		[468, 307, 966, 607]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "q1"
		  Position		  [45, 98, 75, 112]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "q2"
		  Position		  [45, 158, 75, 172]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Reference
		  Name			  "Quaternion inverter"
		  Ports			  [1, 1]
		  Position		  [100, 144, 200, 186]
		  SourceBlock		  "components_lib/Math utilities/Quate"
"rnion operations/Quaternion inverter"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  "Quaternion mulitiplication"
		  Ports			  [2, 1]
		  Position		  [275, 104, 340, 146]
		  FunctionName		  "qmul"
		}
		Block {
		  BlockType		  Outport
		  Name			  "q_diff"
		  Position		  [385, 118, 415, 132]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "q2"
		  SrcPort		  1
		  DstBlock		  "Quaternion inverter"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Quaternion inverter"
		  SrcPort		  1
		  Points		  [25, 0; 0, -30]
		  DstBlock		  "Quaternion mulitiplication"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Quaternion mulitiplication"
		  SrcPort		  1
		  DstBlock		  "q_diff"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "q1"
		  SrcPort		  1
		  Points		  [90, 0; 0, 10]
		  DstBlock		  "Quaternion mulitiplication"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Rotation of q1 by q2"
	      Ports		      [2, 1]
	      Position		      [180, 94, 280, 136]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Rotation of q1 by q2"
		Location		[232, 322, 730, 622]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "q1"
		  Position		  [110, 103, 140, 117]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "q2"
		  Position		  [110, 173, 140, 187]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  "Quaternion mulitiplication"
		  Ports			  [2, 1]
		  Position		  [215, 119, 280, 161]
		  FunctionName		  "qmul"
		}
		Block {
		  BlockType		  Outport
		  Name			  "q_res"
		  Position		  [360, 118, 390, 132]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "q1"
		  SrcPort		  1
		  Points		  [15, 0; 0, 10; 40, 0]
		  DstBlock		  "Quaternion mulitiplication"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "q2"
		  SrcPort		  1
		  Points		  [15, 0; 0, -20; 40, 0]
		  DstBlock		  "Quaternion mulitiplication"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Quaternion mulitiplication"
		  SrcPort		  1
		  Points		  [45, 0; 0, -15]
		  DstBlock		  "q_res"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Vector rotation by q"
	      Ports		      [2, 1]
	      Position		      [180, 234, 280, 276]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Vector rotation by q"
		Location		[957, 262, 1572, 455]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "q"
		  Position		  [15, 53, 45, 67]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "V"
		  Position		  [85, 83, 115, 97]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [85, 117, 115, 133]
		  ShowName		  off
		  Value			  "0"
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux"
		  Ports			  [1, 3]
		  Position		  [140, 86, 145, 124]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "3"
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux1"
		  Ports			  [1, 4]
		  Position		  [445, 56, 450, 94]
		  BackgroundColor	  "black"
		  ShowName		  off
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [4, 1]
		  Position		  [185, 91, 190, 129]
		  ShowName		  off
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux1"
		  Ports			  [3, 1]
		  Position		  [475, 51, 480, 89]
		  ShowName		  off
		  Inputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Quaternion inverter"
		  Ports			  [1, 1]
		  Position		  [230, 49, 290, 71]
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  System {
		    Name		    "Quaternion inverter"
		    Location		    [386, 212, 884, 512]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "A4"
		    PaperUnits		    "centimeters"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "q"
		    Position		    [90, 48, 120, 62]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Demux
		    Name		    "Demux"
		    Ports		    [1, 4]
		    Position		    [145, 36, 150, 74]
		    BackgroundColor	    "black"
		    ShowName		    off
		    }
		    Block {
		    BlockType		    Demux
		    Name		    "Demux1"
		    Ports		    [1, 3]
		    Position		    [245, 31, 250, 69]
		    BackgroundColor	    "black"
		    ShowName		    off
		    Outputs		    "3"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain"
		    Position		    [195, 35, 225, 65]
		    NamePlacement	    "alternate"
		    Gain		    "-1"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [4, 1]
		    Position		    [275, 36, 280, 74]
		    ShowName		    off
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux1"
		    Ports		    [3, 1]
		    Position		    [175, 31, 180, 69]
		    ShowName		    off
		    Inputs		    "3"
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "q^-1"
		    Position		    [305, 48, 335, 62]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Gain"
		    SrcPort		    1
		    DstBlock		    "Demux1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    3
		    DstBlock		    "Mux"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    2
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    1
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux1"
		    SrcPort		    1
		    DstBlock		    "Gain"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    3
		    DstBlock		    "Mux1"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    2
		    DstBlock		    "Mux1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    1
		    DstBlock		    "Mux1"
		    DstPort		    1
		    }
		    Line {
		    Labels		    [1, 0]
		    SrcBlock		    "Demux"
		    SrcPort		    4
		    DstBlock		    "Mux"
		    DstPort		    4
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "q^-1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "q"
		    SrcPort		    1
		    DstBlock		    "Demux"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Terminator
		  Name			  "Terminator"
		  Position		  [500, 80, 520, 100]
		}
		Block {
		  BlockType		  Reference
		  Name			  "qmul no func"
		  Ports			  [2, 1]
		  Position		  [225, 99, 300, 146]
		  SourceBlock		  "components_lib/Math utilities/Quate"
"rnion operations/qmul no func"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "qmul no func1"
		  Ports			  [2, 1]
		  Position		  [345, 49, 420, 96]
		  SourceBlock		  "components_lib/Math utilities/Quate"
"rnion operations/qmul no func"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Outport
		  Name			  "q'Vq"
		  Position		  [530, 63, 560, 77]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "qmul no func"
		  SrcPort		  1
		  Points		  [25, 0]
		  DstBlock		  "qmul no func1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Quaternion inverter"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "qmul no func1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "qmul no func"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "q"
		  SrcPort		  1
		  Points		  [20, 0]
		  Branch {
		    Points		    [0, 75]
		    DstBlock		    "qmul no func"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Quaternion inverter"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "V"
		  SrcPort		  1
		  Points		  [0, 15]
		  DstBlock		  "Demux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  2
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  3
		  DstBlock		  "Mux"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "qmul no func1"
		  SrcPort		  1
		  DstBlock		  "Demux1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Mux1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  2
		  Points		  [0, 0]
		  DstBlock		  "Mux1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  3
		  Points		  [0, 0]
		  DstBlock		  "Mux1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  4
		  Points		  [0, 0]
		  DstBlock		  "Terminator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux1"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "q'Vq"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "qmul no func"
	      Ports		      [2, 1]
	      Position		      [305, 234, 405, 276]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"qmul no func"
		Location		[3, 94, 1015, 584]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "q_A"
		  Position		  [50, 348, 80, 362]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "q_B"
		  Position		  [15, 143, 45, 157]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux1"
		  Ports			  [1, 8]
		  Position		  [275, 12, 280, 303]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "8"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  From
		  Name			  "From"
		  Position		  [560, 38, 615, 52]
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "q4"
		}
		Block {
		  BlockType		  From
		  Name			  "From1"
		  Position		  [560, 53, 615, 67]
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "q3_neg"
		}
		Block {
		  BlockType		  From
		  Name			  "From10"
		  Position		  [560, 188, 615, 202]
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "q4"
		}
		Block {
		  BlockType		  From
		  Name			  "From11"
		  Position		  [560, 203, 615, 217]
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "q3_neg"
		}
		Block {
		  BlockType		  From
		  Name			  "From12"
		  Position		  [560, 218, 615, 232]
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "q1"
		}
		Block {
		  BlockType		  From
		  Name			  "From13"
		  Position		  [560, 233, 615, 247]
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "q2"
		}
		Block {
		  BlockType		  From
		  Name			  "From14"
		  Position		  [560, 248, 615, 262]
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "q3"
		}
		Block {
		  BlockType		  From
		  Name			  "From15"
		  Position		  [560, 263, 615, 277]
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "q4"
		}
		Block {
		  BlockType		  From
		  Name			  "From2"
		  Position		  [560, 68, 615, 82]
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "q2"
		}
		Block {
		  BlockType		  From
		  Name			  "From3"
		  Position		  [560, 83, 615, 97]
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "q1_neg"
		}
		Block {
		  BlockType		  From
		  Name			  "From4"
		  Position		  [560, 98, 615, 112]
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "q3"
		}
		Block {
		  BlockType		  From
		  Name			  "From5"
		  Position		  [560, 113, 615, 127]
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "q4"
		}
		Block {
		  BlockType		  From
		  Name			  "From6"
		  Position		  [560, 128, 615, 142]
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "q1_neg"
		}
		Block {
		  BlockType		  From
		  Name			  "From7"
		  Position		  [560, 143, 615, 157]
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "q2_neg"
		}
		Block {
		  BlockType		  From
		  Name			  "From8"
		  Position		  [560, 158, 615, 172]
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "q2_neg"
		}
		Block {
		  BlockType		  From
		  Name			  "From9"
		  Position		  [560, 173, 615, 187]
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  GotoTag		  "q1"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain7"
		  Position		  [140, 158, 165, 182]
		  ShowName		  off
		  Gain			  "-1"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto"
		  Position		  [305, 168, 360, 182]
		  ShowName		  off
		  GotoTag		  "q1_neg"
		  TagVisibility		  "local"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto1"
		  Position		  [305, 203, 360, 217]
		  ShowName		  off
		  GotoTag		  "q2_neg"
		  TagVisibility		  "local"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto2"
		  Position		  [305, 238, 360, 252]
		  ShowName		  off
		  GotoTag		  "q3_neg"
		  TagVisibility		  "local"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto4"
		  Position		  [305, 133, 360, 147]
		  ShowName		  off
		  GotoTag		  "q4"
		  TagVisibility		  "local"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto5"
		  Position		  [305, 98, 360, 112]
		  ShowName		  off
		  GotoTag		  "q3"
		  TagVisibility		  "local"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto6"
		  Position		  [305, 63, 360, 77]
		  ShowName		  off
		  GotoTag		  "q2"
		  TagVisibility		  "local"
		}
		Block {
		  BlockType		  Goto
		  Name			  "Goto7"
		  Position		  [305, 28, 360, 42]
		  ShowName		  off
		  GotoTag		  "q1"
		  TagVisibility		  "local"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux1"
		  Ports			  [16, 1]
		  Position		  [640, 26, 645, 289]
		  ShowName		  off
		  Inputs		  "16"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux2"
		  Ports			  [2, 1]
		  Position		  [195, 141, 200, 179]
		  ShowName		  off
		  Inputs		  "2"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [2, 1]
		  Position		  [780, 152, 810, 183]
		  Multiplication	  "Matrix(*)"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Reference
		  Name			  "Reshape1"
		  Ports			  [1, 1]
		  Position		  [675, 148, 705, 172]
		  SourceBlock		  "simulink/Math\nOperations/Reshape"
		  SourceType		  "Reshape"
		  OutputDimensionality	  "Customize"
		  OutputDimensions	  "[4,4]"
		}
		Block {
		  BlockType		  Terminator
		  Name			  "Terminator"
		  Position		  [305, 270, 325, 290]
		}
		Block {
		  BlockType		  Outport
		  Name			  "q_A*q_B"
		  Position		  [865, 163, 895, 177]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "q_A*q_B"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "q_A"
		  SrcPort		  1
		  Points		  [680, 0]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "q_B"
		  SrcPort		  1
		  Points		  [0, 0; 75, 0]
		  Branch {
		    DstBlock		    "Gain7"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Mux2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "From15"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  16
		}
		Line {
		  SrcBlock		  "From14"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  15
		}
		Line {
		  SrcBlock		  "From13"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  14
		}
		Line {
		  SrcBlock		  "From12"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  13
		}
		Line {
		  SrcBlock		  "From11"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  12
		}
		Line {
		  SrcBlock		  "From10"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  11
		}
		Line {
		  SrcBlock		  "From9"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  10
		}
		Line {
		  SrcBlock		  "From8"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  9
		}
		Line {
		  SrcBlock		  "From7"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  8
		}
		Line {
		  SrcBlock		  "From6"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  7
		}
		Line {
		  SrcBlock		  "From5"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "From4"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "From3"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "From2"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "From1"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  8
		  DstBlock		  "Terminator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  7
		  DstBlock		  "Goto2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  6
		  DstBlock		  "Goto1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  5
		  DstBlock		  "Goto"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  4
		  DstBlock		  "Goto4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  3
		  DstBlock		  "Goto5"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  2
		  DstBlock		  "Goto6"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  1
		  DstBlock		  "Goto7"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Gain7"
		  SrcPort		  1
		  DstBlock		  "Mux2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Mux1"
		  SrcPort		  1
		  DstBlock		  "Reshape1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux2"
		  SrcPort		  1
		  DstBlock		  "Demux1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Reshape1"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "quaternion composition"
	      Ports		      [2, 1]
	      Position		      [55, 164, 155, 206]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"quaternion composition"
		Location		[245, 547, 743, 847]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "vector"
		  Position		  [85, 78, 115, 92]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "angle"
		  Position		  [85, 213, 115, 227]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux"
		  Ports			  [1, 3]
		  Position		  [350, 76, 355, 114]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "3"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  Position		  [155, 205, 185, 235]
		  Gain			  "1/2"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [4, 1]
		  Position		  [385, 81, 390, 119]
		  ShowName		  off
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [2, 1]
		  Position		  [270, 76, 315, 109]
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trigonometric\nFunction"
		  Ports			  [1, 1]
		  Position		  [220, 205, 250, 235]
		  Operator		  "cos"
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trigonometric\nFunction1"
		  Ports			  [1, 1]
		  Position		  [220, 140, 250, 170]
		}
		Block {
		  BlockType		  Reference
		  Name			  "to unit vector"
		  Ports			  [1, 1]
		  Position		  [140, 64, 240, 106]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Outport
		  Name			  "q"
		  Position		  [425, 93, 455, 107]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "angle"
		  SrcPort		  1
		  DstBlock		  "Gain"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    DstBlock		    "Trigonometric\nFunction"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -65]
		    DstBlock		    "Trigonometric\nFunction1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "vector"
		  SrcPort		  1
		  DstBlock		  "to unit vector"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "to unit vector"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Trigonometric\nFunction1"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "Demux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  2
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  3
		  DstBlock		  "Mux"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Trigonometric\nFunction"
		  SrcPort		  1
		  Points		  [115, 0]
		  DstBlock		  "Mux"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "q"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "quaternion decomposition"
	      Ports		      [1, 2]
	      Position		      [180, 164, 280, 206]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"quaternion decomposition"
		Location		[221, 445, 1045, 745]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "q_in"
		  Position		  [90, 103, 120, 117]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux"
		  Ports			  [1, 4]
		  Position		  [150, 79, 155, 136]
		  BackgroundColor	  "black"
		  ShowName		  off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain"
		  Position		  [260, 115, 290, 145]
		  Gain			  "2"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction"
		  Ports			  [1, 1]
		  Position		  [320, 55, 350, 85]
		  Operator		  "reciprocal"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [3, 1]
		  Position		  [205, 71, 210, 109]
		  ShowName		  off
		  Inputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [2, 1]
		  Position		  [375, 36, 420, 69]
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trigonometric\nFunction"
		  Ports			  [1, 1]
		  Position		  [200, 115, 230, 145]
		  Operator		  "acos"
		}
		Block {
		  BlockType		  Trigonometry
		  Name			  "Trigonometric\nFunction1"
		  Ports			  [1, 1]
		  Position		  [270, 55, 300, 85]
		}
		Block {
		  BlockType		  Reference
		  Name			  "to unit vector"
		  Ports			  [1, 1]
		  Position		  [460, 34, 560, 76]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/to unit vector"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Vector"
		  Position		  [590, 48, 620, 62]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Angle"
		  Position		  [440, 123, 470, 137]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "q_in"
		  SrcPort		  1
		  DstBlock		  "Demux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  4
		  DstBlock		  "Trigonometric\nFunction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Trigonometric\nFunction"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    DstBlock		    "Gain"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -60]
		    DstBlock		    "Trigonometric\nFunction1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Gain"
		  SrcPort		  1
		  DstBlock		  "Angle"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  1
		  Points		  [15, 0; 0, -5]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  2
		  Points		  [20, 0; 0, -10]
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  3
		  Points		  [30, 0]
		  DstBlock		  "Mux"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  Points		  [15, 0; 0, -45]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Math\nFunction"
		  SrcPort		  1
		  Points		  [0, -10]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Trigonometric\nFunction1"
		  SrcPort		  1
		  DstBlock		  "Math\nFunction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "to unit vector"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "to unit vector"
		  SrcPort		  1
		  DstBlock		  "Vector"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "quaternion expansion"
	      Ports		      [1, 1]
	      Position		      [430, 24, 530, 66]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"quaternion expansion"
		Location		[297, 152, 1133, 538]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "q1-3"
		  Position		  [40, 108, 70, 122]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  Position		  [190, 53, 215, 77]
		  ShowName		  off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux2"
		  Ports			  [1, 3]
		  Position		  [150, 78, 155, 152]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction4"
		  Ports			  [1, 1]
		  Position		  [190, 77, 215, 103]
		  ShowName		  off
		  Operator		  "square"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction5"
		  Ports			  [1, 1]
		  Position		  [190, 102, 215, 128]
		  ShowName		  off
		  Operator		  "square"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction6"
		  Ports			  [1, 1]
		  Position		  [190, 127, 215, 153]
		  ShowName		  off
		  Operator		  "square"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction7"
		  Ports			  [1, 1]
		  Position		  [315, 90, 345, 120]
		  ShowName		  off
		  Operator		  "sqrt"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux2"
		  Ports			  [2, 1]
		  Position		  [315, 16, 320, 54]
		  ShowName		  off
		  Inputs		  "2"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [2, 1]
		  Position		  [395, 82, 425, 113]
		  ShowName		  off
		  Inputs		  "*/"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [4, 1]
		  Position		  [255, 54, 285, 151]
		  ShowName		  off
		  Inputs		  "++++"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Outport
		  Name			  "q"
		  Position		  [490, 93, 520, 107]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "q"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux2"
		  SrcPort		  1
		  Points		  [25, 0; 0, 55]
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Math\nFunction6"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum1"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Math\nFunction5"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Math\nFunction4"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  Points		  [0, 0; 10, 0]
		  Branch {
		    Points		    [0, -20]
		    DstBlock		    "Mux2"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Sum1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Math\nFunction7"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Math\nFunction7"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "q1-3"
		  SrcPort		  1
		  Points		  [0, 0; 40, 0]
		  Branch {
		    Points		    [0, -90]
		    DstBlock		    "Mux2"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Demux2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  3
		  DstBlock		  "Math\nFunction6"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  2
		  DstBlock		  "Math\nFunction5"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux2"
		  SrcPort		  1
		  DstBlock		  "Math\nFunction4"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "quaternion2euler"
	      Ports		      [1, 1]
	      Position		      [55, 234, 155, 276]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      Port {
		PortNumber		1
		Name			"Euler angles"
		PropagatedSignals	", , "
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
		ShowSigGenPortName	on
	      }
	      System {
		Name			"quaternion2euler"
		Location		[328, 199, 918, 397]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "quaternion"
		  Position		  [25, 88, 55, 102]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [3, 1]
		  Position		  [505, 76, 510, 114]
		  ShowName		  off
		  Inputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Fcn
		  Name			  "theta 1"
		  Position		  [115, 22, 435, 58]
		  Expr			  "-atan2((2*(u(2)*u(3) + u(1)*u(4))),"
"(1-2*(u(1)*u(1) + u(2)*u(2))))"
		}
		Block {
		  BlockType		  Fcn
		  Name			  "theta 2"
		  Position		  [155, 78, 400, 112]
		  Expr			  "-asin(2*(u(1)*u(3)-u(2)*u(4)))"
		}
		Block {
		  BlockType		  Fcn
		  Name			  "theta 3"
		  Position		  [120, 132, 440, 168]
		  Expr			  "-atan2((2*(u(1)*u(2) + u(3)*u(4))),"
"(1-2*(u(2)*u(2) + u(3)*u(3))))"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Euler angles"
		  Position		  [535, 88, 565, 102]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Euler angles"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "quaternion"
		  SrcPort		  1
		  Points		  [0, 0; 15, 0]
		  Branch {
		    Points		    [0, 55]
		    DstBlock		    "theta 3"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -55]
		    DstBlock		    "theta 1"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "theta 2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "theta 3"
		  SrcPort		  1
		  Points		  [20, 0; 0, -45]
		  DstBlock		  "Mux"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "theta 2"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "theta 1"
		  SrcPort		  1
		  Points		  [25, 0; 0, 45]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "w to q"
	      Ports		      [2, 1]
	      Position		      [305, 164, 405, 206]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"w to q"
		Location		[58, 84, 423, 161]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Angular velocity"
		  Position		  [35, 33, 65, 47]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Initial quaternion"
		  Position		  [35, 18, 65, 32]
		  NamePlacement		  "alternate"
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  "S-Function"
		  Ports			  [2, 1]
		  Position		  [95, 17, 155, 48]
		  FunctionName		  "qestimator"
		}
		Block {
		  BlockType		  Outport
		  Name			  "estimated quaternion"
		  Position		  [195, 28, 225, 42]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "S-Function"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "estimated quaternion"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Initial quaternion"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "S-Function"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Angular velocity"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "S-Function"
		  DstPort		  2
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "||q||"
	      Ports		      [1, 1]
	      Position		      [305, 24, 405, 66]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"||q||"
		Location		[307, 540, 805, 840]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "q_in"
		  Position		  [100, 103, 130, 117]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Reference
		  Name			  "quaternion composition"
		  Ports			  [2, 1]
		  Position		  [275, 89, 375, 131]
		  SourceBlock		  "components_lib/Math utilities/Quate"
"rnion operations/quaternion composition"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "quaternion decomposition"
		  Ports			  [1, 2]
		  Position		  [145, 89, 245, 131]
		  SourceBlock		  "components_lib/Math utilities/Quate"
"rnion operations/quaternion decomposition"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Outport
		  Name			  "q_out"
		  Position		  [415, 103, 445, 117]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "q_in"
		  SrcPort		  1
		  DstBlock		  "quaternion decomposition"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "quaternion decomposition"
		  SrcPort		  1
		  DstBlock		  "quaternion composition"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "quaternion decomposition"
		  SrcPort		  2
		  DstBlock		  "quaternion composition"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "quaternion composition"
		  SrcPort		  1
		  DstBlock		  "q_out"
		  DstPort		  1
		}
	      }
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Vector operations"
	  Ports			  []
	  Position		  [28, 24, 172, 93]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "Vector operations"
	    Location		    [250, 42, 964, 627]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "A4"
	    PaperUnits		    "centimeters"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      SubSystem
	      Name		      "Projection of a onto b"
	      Ports		      [2, 1]
	      Position		      [300, 29, 400, 71]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Projection of a onto b"
		Location		[437, 392, 935, 692]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "a"
		  Position		  [65, 53, 95, 67]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "b"
		  Position		  [65, 83, 95, 97]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [150, 165, 180, 195]
		  Value			  "-2"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product"
		  Ports			  [2, 1]
		  Position		  [140, 51, 170, 84]
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction"
		  Ports			  [2, 1]
		  Position		  [210, 117, 240, 148]
		  Operator		  "pow"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [3, 1]
		  Position		  [270, 64, 315, 106]
		  Inputs		  "3"
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  MATLABFcn
		  Name			  "||V||"
		  Position		  [130, 110, 190, 140]
		  MATLABFcn		  "norm"
		}
		Block {
		  BlockType		  Outport
		  Name			  "a_b"
		  Position		  [335, 78, 365, 92]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "a_b"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Math\nFunction"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Dot Product"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "||V||"
		  SrcPort		  1
		  DstBlock		  "Math\nFunction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Math\nFunction"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "b"
		  SrcPort		  1
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, 15]
		    Branch {
		    Points		    [0, -5]
		    DstBlock		    "Product"
		    DstPort		    3
		    }
		    Branch {
		    Points		    [0, 20]
		    DstBlock		    "||V||"
		    DstPort		    1
		    }
		  }
		  Branch {
		    Points		    [0, -15]
		    DstBlock		    "Dot Product"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "a"
		  SrcPort		  1
		  DstBlock		  "Dot Product"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Vector rotation by q"
	      Ports		      [2, 1]
	      Position		      [175, 29, 275, 71]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Vector rotation by q"
		Location		[176, 198, 982, 498]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "q"
		  Position		  [110, 63, 140, 77]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "V"
		  Position		  [110, 178, 140, 192]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [110, 215, 140, 245]
		  Value			  "0"
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux"
		  Ports			  [1, 3]
		  Position		  [165, 166, 170, 204]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "3"
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux1"
		  Ports			  [1, 4]
		  Position		  [575, 91, 580, 129]
		  BackgroundColor	  "black"
		  ShowName		  off
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [4, 1]
		  Position		  [210, 171, 215, 209]
		  ShowName		  off
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux1"
		  Ports			  [3, 1]
		  Position		  [620, 86, 625, 124]
		  ShowName		  off
		  Inputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Quaternion inverter"
		  Ports			  [1, 1]
		  Position		  [205, 49, 305, 91]
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  System {
		    Name		    "Quaternion inverter"
		    Location		    [386, 212, 884, 512]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "A4"
		    PaperUnits		    "centimeters"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "q"
		    Position		    [90, 48, 120, 62]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Demux
		    Name		    "Demux"
		    Ports		    [1, 4]
		    Position		    [145, 36, 150, 74]
		    BackgroundColor	    "black"
		    ShowName		    off
		    }
		    Block {
		    BlockType		    Demux
		    Name		    "Demux1"
		    Ports		    [1, 3]
		    Position		    [245, 31, 250, 69]
		    BackgroundColor	    "black"
		    ShowName		    off
		    Outputs		    "3"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain"
		    Position		    [195, 35, 225, 65]
		    NamePlacement	    "alternate"
		    Gain		    "-1"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [4, 1]
		    Position		    [275, 36, 280, 74]
		    ShowName		    off
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux1"
		    Ports		    [3, 1]
		    Position		    [175, 31, 180, 69]
		    ShowName		    off
		    Inputs		    "3"
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "q^-1"
		    Position		    [305, 48, 335, 62]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Gain"
		    SrcPort		    1
		    DstBlock		    "Demux1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    3
		    DstBlock		    "Mux"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    2
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    1
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux1"
		    SrcPort		    1
		    DstBlock		    "Gain"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    3
		    DstBlock		    "Mux1"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    2
		    DstBlock		    "Mux1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    1
		    DstBlock		    "Mux1"
		    DstPort		    1
		    }
		    Line {
		    Labels		    [1, 0]
		    SrcBlock		    "Demux"
		    SrcPort		    4
		    DstBlock		    "Mux"
		    DstPort		    4
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "q^-1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "q"
		    SrcPort		    1
		    DstBlock		    "Demux"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  "Quaternion mulitiplication"
		  Ports			  [2, 1]
		  Position		  [345, 69, 410, 111]
		  FunctionName		  "qmul"
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  "Quaternion mulitiplication1"
		  Ports			  [2, 1]
		  Position		  [470, 89, 535, 131]
		  FunctionName		  "qmul"
		}
		Block {
		  BlockType		  Terminator
		  Name			  "Terminator"
		  Position		  [610, 145, 630, 165]
		}
		Block {
		  BlockType		  Outport
		  Name			  "q'Vq"
		  Position		  [755, 98, 785, 112]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Mux1"
		  SrcPort		  1
		  DstBlock		  "q'Vq"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  4
		  Points		  [5, 0; 0, 30]
		  DstBlock		  "Terminator"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  3
		  DstBlock		  "Mux1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  2
		  DstBlock		  "Mux1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  1
		  DstBlock		  "Mux1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Quaternion mulitiplication1"
		  SrcPort		  1
		  DstBlock		  "Demux1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Quaternion mulitiplication"
		  SrcPort		  1
		  Points		  [40, 0]
		  DstBlock		  "Quaternion mulitiplication1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  Points		  [35, 0; 0, -80; 75, 0]
		  DstBlock		  "Quaternion mulitiplication"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [50, 0]
		  DstBlock		  "Mux"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  3
		  DstBlock		  "Mux"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  2
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "V"
		  SrcPort		  1
		  DstBlock		  "Demux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Quaternion inverter"
		  SrcPort		  1
		  Points		  [20, 0]
		  DstBlock		  "Quaternion mulitiplication"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "q"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, 85; 290, 0; 0, -35]
		    DstBlock		    "Quaternion mulitiplication1"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Quaternion inverter"
		    DstPort		    1
		  }
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "cross_product"
	      Ports		      [2, 1]
	      Position		      [50, 98, 150, 142]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"cross_product"
		Location		[579, 148, 824, 249]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "u"
		  Position		  [25, 28, 55, 42]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "v"
		  Position		  [25, 63, 55, 77]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  "S-Function"
		  Ports			  [2, 1]
		  Position		  [100, 37, 160, 68]
		  FunctionName		  "s_cross_product"
		}
		Block {
		  BlockType		  Outport
		  Name			  "y"
		  Position		  [190, 48, 220, 62]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "S-Function"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "y"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "v"
		  SrcPort		  1
		  Points		  [25, 0]
		  DstBlock		  "S-Function"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "u"
		  SrcPort		  1
		  Points		  [25, 0]
		  DstBlock		  "S-Function"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "cross_product_no_fnc"
	      Ports		      [2, 1]
	      Position		      [175, 173, 275, 217]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"cross_product_no_fnc"
		Location		[151, 192, 874, 512]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "v"
		  Position		  [25, 68, 55, 82]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "u"
		  Position		  [25, 198, 55, 212]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux"
		  Ports			  [1, 3]
		  Position		  [80, 178, 85, 232]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux1"
		  Ports			  [1, 3]
		  Position		  [80, 51, 85, 99]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [3, 1]
		  Position		  [390, 156, 395, 194]
		  ShowName		  off
		  Inputs		  "3"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  Ports			  [2, 1]
		  Position		  [275, 25, 290, 60]
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product2"
		  Ports			  [2, 1]
		  Position		  [270, 115, 285, 150]
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product3"
		  Ports			  [2, 1]
		  Position		  [230, 66, 245, 99]
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product4"
		  Ports			  [2, 1]
		  Position		  [225, 156, 240, 189]
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product5"
		  Ports			  [2, 1]
		  Position		  [270, 200, 285, 235]
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product6"
		  Ports			  [2, 1]
		  Position		  [225, 241, 240, 274]
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [330, 75, 350, 95]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "-+|"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [2, 1]
		  Position		  [325, 165, 345, 185]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "-+|"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum2"
		  Ports			  [2, 1]
		  Position		  [325, 250, 345, 270]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "-+|"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Outport
		  Name			  "v x u"
		  Position		  [440, 168, 470, 182]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "v x u"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum2"
		  SrcPort		  1
		  Points		  [25, 0]
		  DstBlock		  "Mux"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [20, 0]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  1
		  Points		  [15, 0; 0, 65]
		  Branch {
		    Points		    [0, 125]
		    DstBlock		    "Product6"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Product2"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  1
		  Points		  [5, 0; 0, -5; 30, 0]
		  Branch {
		    Points		    [0, 45]
		    DstBlock		    "Product5"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Product4"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  2
		  Points		  [10, 0]
		  Branch {
		    Points		    [0, 60]
		    DstBlock		    "Product6"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -155]
		    DstBlock		    "Product1"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  3
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, 75]
		    DstBlock		    "Product4"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -55]
		    DstBlock		    "Product1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Demux"
		  SrcPort		  3
		  Points		  [60, 0; 0, -85]
		  Branch {
		    DstBlock		    "Product2"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -50]
		    DstBlock		    "Product3"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  2
		  Points		  [25, 0]
		  Branch {
		    Points		    [0, 135]
		    DstBlock		    "Product5"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Product3"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Product5"
		  SrcPort		  1
		  Points		  [45, 0]
		  DstBlock		  "Sum2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product6"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product2"
		  SrcPort		  1
		  Points		  [45, 0]
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product4"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [45, 0]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product3"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "u"
		  SrcPort		  1
		  DstBlock		  "Demux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "v"
		  SrcPort		  1
		  DstBlock		  "Demux1"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "modulus"
	      Ports		      [2, 1]
	      Position		      [50, 173, 150, 217]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"modulus"
		Location		[433, 403, 931, 703]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "u"
		  Position		  [110, 93, 140, 107]
		  NamePlacement		  "alternate"
		  Port			  "1"
		  IconDisplay		  "Port number"
		  PortDimensions	  "1"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "v"
		  Position		  [110, 118, 140, 132]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  PortDimensions	  "1"
		  LatchInput		  off
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  "S-Function"
		  Ports			  [2, 1]
		  Position		  [175, 97, 235, 128]
		  FunctionName		  "s_modulus"
		}
		Block {
		  BlockType		  Outport
		  Name			  "y"
		  Position		  [265, 103, 295, 117]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		  PortDimensions	  "1"
		}
		Line {
		  SrcBlock		  "v"
		  SrcPort		  1
		  Points		  [0, -5]
		  DstBlock		  "S-Function"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "S-Function"
		  SrcPort		  1
		  Points		  [0, -5]
		  DstBlock		  "y"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "u"
		  SrcPort		  1
		  Points		  [0, 5]
		  DstBlock		  "S-Function"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "norm"
	      Ports		      [1, 1]
	      Position		      [300, 98, 400, 142]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"norm"
		Location		[490, 160, 730, 242]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "u"
		  Position		  [25, 33, 55, 47]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  PortDimensions	  "3"
		  LatchInput		  off
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  "S-Function"
		  Ports			  [1, 1]
		  Position		  [90, 25, 150, 55]
		  FunctionName		  "s_norm"
		}
		Block {
		  BlockType		  Outport
		  Name			  "y"
		  Position		  [185, 33, 215, 47]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		  PortDimensions	  "1"
		}
		Line {
		  SrcBlock		  "u"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "S-Function"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "S-Function"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "y"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "pow"
	      Description	      "u^v"
	      Ports		      [2, 1]
	      Position		      [175, 98, 275, 142]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"pow"
		Location		[600, 158, 840, 259]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "u"
		  Position		  [25, 28, 55, 42]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "v"
		  Position		  [25, 63, 55, 77]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  PortDimensions	  "1"
		  LatchInput		  off
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  "S-Function"
		  Ports			  [2, 1]
		  Position		  [95, 37, 155, 68]
		  FunctionName		  "s_pow"
		}
		Block {
		  BlockType		  Outport
		  Name			  "y"
		  Position		  [185, 48, 215, 62]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "S-Function"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "y"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "v"
		  SrcPort		  1
		  Points		  [15, 0; 0, -10]
		  DstBlock		  "S-Function"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "u"
		  SrcPort		  1
		  Points		  [15, 0; 0, 10]
		  DstBlock		  "S-Function"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "sign"
	      Ports		      [1, 1]
	      Position		      [425, 98, 525, 142]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"sign"
		Location		[500, 110, 720, 192]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "u"
		  Position		  [25, 33, 55, 47]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  "S-Function"
		  Ports			  [1, 1]
		  Position		  [80, 25, 140, 55]
		  FunctionName		  "s_sign"
		}
		Block {
		  BlockType		  Outport
		  Name			  "y"
		  Position		  [165, 33, 195, 47]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "S-Function"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "y"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "u"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "S-Function"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "to unit vector"
	      Ports		      [1, 1]
	      Position		      [50, 29, 150, 71]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"to unit vector"
		Location		[485, 393, 983, 693]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "v \n"
		  Position		  [15, 103, 45, 117]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [160, 135, 190, 165]
		}
		Block {
		  BlockType		  Reference
		  Name			  "Dot Product"
		  Ports			  [2, 1]
		  Position		  [80, 87, 110, 118]
		  SourceBlock		  "simulink/Math\nOperations/Dot Produ"
"ct"
		  SourceType		  "Dot Product"
		  InputSameDT		  "on"
		  OutputDataTypeScalingMode "Inherit via internal rule"
		  OutDataType		  "sfix(16)"
		  OutScaling		  "2^-10"
		  LockScale		  "off"
		  RndMeth		  "Floor"
		  DoSatur		  "off"
		}
		Block {
		  BlockType		  Math
		  Name			  "Math\nFunction"
		  Ports			  [1, 1]
		  Position		  [305, 75, 335, 105]
		  Operator		  "reciprocal"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [2, 1]
		  Position		  [365, 46, 410, 79]
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Switch
		  Name			  "Switch"
		  Position		  [225, 100, 255, 130]
		  Criteria		  "u2 ~= 0"
		  InputSameDT		  off
		}
		Block {
		  BlockType		  Math
		  Name			  "sqrt"
		  Ports			  [1, 1]
		  Position		  [135, 90, 165, 120]
		  Operator		  "sqrt"
		}
		Block {
		  BlockType		  Outport
		  Name			  "v_hat"
		  Position		  [450, 58, 480, 72]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  Points		  [0, -25]
		  DstBlock		  "Switch"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "sqrt"
		  SrcPort		  1
		  Points		  [0, 10; 25, 0]
		  Branch {
		    Points		    [0, -10]
		    DstBlock		    "Switch"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Switch"
		  SrcPort		  1
		  Points		  [15, 0; 0, -25]
		  DstBlock		  "Math\nFunction"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "v \n"
		  SrcPort		  1
		  Points		  [5, 0]
		  Branch {
		    Points		    [0, -55]
		    DstBlock		    "Product"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [10, 0]
		    Branch {
		    DstBlock		    "Dot Product"
		    DstPort		    1
		    }
		    Branch {
		    DstBlock		    "Dot Product"
		    DstPort		    2
		    }
		  }
		}
		Line {
		  SrcBlock		  "Math\nFunction"
		  SrcPort		  1
		  Points		  [5, 0; 0, -20]
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  DstBlock		  "v_hat"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Dot Product"
		  SrcPort		  1
		  DstBlock		  "sqrt"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "vector projection\nonto plane"
	      Ports		      [2, 1]
	      Position		      [300, 174, 400, 216]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"vector projection\nonto plane"
		Location		[479, 396, 965, 578]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "SC veloc"
		  Position		  [25, 28, 55, 42]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "v"
		  Position		  [25, 63, 55, 77]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  MATLABFcn
		  Name			  "MATLAB Fcn"
		  Position		  [140, 40, 200, 70]
		  MATLABFcn		  "vector_projection_onto_plane(u)"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [2, 1]
		  Position		  [105, 16, 110, 89]
		  ShowName		  off
		  Inputs		  "2"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Outport
		  Name			  "v'"
		  Position		  [225, 48, 255, 62]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  "MATLAB Fcn"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "v"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "MATLAB Fcn"
		  SrcPort		  1
		  DstBlock		  "v'"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "SC veloc"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      MATLABFcn
	      Name		      "||V||"
	      Position		      [425, 29, 525, 71]
	      MATLABFcn		      "norm"
	    }
	  }
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "NSO"
      Tag		      "AAUSAT-II Model"
      Description	      "AAUSAT-II Model"
      Ports		      [4, 4]
      Position		      [105, 38, 360, 297]
      TreatAsAtomicUnit	      off
      MinAlgLoopOccurrences   off
      RTWSystemCode	      "Auto"
      MaskPromptString	      "Center of mass (S)|Start temperature of satelli"
"te [K]|Center of mass (deployed)|Mass of spacecraft (kg)|Dimensions of the sa"
"tellite (m)|Folded inertia matrix(C)|Deployed inertia matrix(C)|Initial time "
"(JD)|Controller reference frame (S->C)|Initial attitude q_i(S->I)|Initial ang"
"ular rate W(S)|Drag Coefficient|Air Density|Enable sensor emulation?|Enable a"
"lbedo emulation?|Enable disturbances"
      MaskStyleString	      "edit,edit,edit,edit,edit,edit,edit,edit,edit,ed"
"it,edit,edit,edit,checkbox,checkbox,checkbox"
      MaskTunableValueString  "on,on,on,on,on,on,on,on,on,on,on,on,on,on,on,on"
      MaskCallbackString      "|||||||||||||||"
      MaskEnableString	      "on,on,on,on,on,on,on,on,on,on,on,on,on,on,on,on"
      MaskVisibilityString    "on,on,on,on,on,on,on,on,on,on,on,on,on,on,on,on"
      MaskToolTipString	      "on,on,on,on,on,on,on,on,on,on,on,on,on,on,on,on"
      MaskVarAliasString      ",,,,,,,,,,,,,,,"
      MaskVariables	      "r_com_s=@1;sat_temp_start=@2;r_com_s_deployed=@"
"3;mass_sc=@4;Dim=@5;inertia_c=@6;inertia_d=@7;init_jd=@8;q_s_c=@9;q_init_s_i="
"@10;w_init_s=@11;Cd=@12;rho=@13;enable_sensor_emulation=@14;alb_emu_enabled=@"
"15;enable_dist=@16;"
      MaskDisplay	      "image(imread('NSO.jpg'));\ncolor('r');\nport_la"
"bel('input', 1, 'N_mt(S)');\nport_label('input', 2, 'N_mw(S)');\nport_label('"
"input', 3, 'H_mw(S)');\nport_label('input', 4, 'Deployed solar array');\nport"
"_label('output', 1, 'Magnetometer(S) V_ADC [mV]');\nport_label('output', 2, '"
"Gyros(S) V_ADC [mV]');\nport_label('output', 3, 'Sun sensors(S) [mA]');\nport"
"_label('output', 4, 'Temperature(S) V_ADC [mV]');"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      MaskValueString	      "[0.05 0.05 0.15]|0|[0.05 0.05 0.125]|3|[0.1 0.1"
" 0.3]|[25 25 5]/1e3|[42.3 42.3 28.4]/1e3|2452315.56|[0 0 0 1]|[sqrt(0.5) 0 0 "
"sqrt(0.5)] |[0.1 0.1 0.1]*0|2|9.25e-13|off|off|off"
      MaskTabNameString	      ",,,,,,,,,,,,,,,"
      System {
	Name			"NSO"
	Location		[225, 80, 1245, 942]
	Open			off
	ModelBrowserVisibility	on
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"A4"
	PaperUnits		"centimeters"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "Magnetorquer N_mt(S)"
	  Position		  [550, 478, 580, 492]
	  BackgroundColor	  "green"
	  Port			  "1"
	  IconDisplay		  "Port number"
	  LatchInput		  off
	}
	Block {
	  BlockType		  Inport
	  Name			  "Momentum wheel N_mw(S)"
	  Position		  [550, 513, 580, 527]
	  BackgroundColor	  "green"
	  Port			  "2"
	  IconDisplay		  "Port number"
	  LatchInput		  off
	}
	Block {
	  BlockType		  Inport
	  Name			  "Momentum wheel H_mw(S)"
	  Position		  [550, 548, 580, 562]
	  BackgroundColor	  "green"
	  Port			  "3"
	  IconDisplay		  "Port number"
	  LatchInput		  off
	}
	Block {
	  BlockType		  Inport
	  Name			  "deployed solar array"
	  Position		  [670, 698, 700, 712]
	  BackgroundColor	  "green"
	  Port			  "4"
	  IconDisplay		  "Port number"
	  LatchInput		  off
	}
	Block {
	  BlockType		  Constant
	  Name			  "Center of mass R_com(S)"
	  Position		  [25, 560, 95, 580]
	  ShowName		  off
	  Value			  "r_com_s"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Center of mass R_com(S)1"
	  Position		  [15, 737, 110, 763]
	  ShowName		  off
	  Value			  "r_com_s_deployed"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  Position		  [520, 26, 645, 44]
	  NamePlacement		  "alternate"
	  ShowName		  off
	  Value			  "enable_sensor_emulation"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Controller frame (S->C)"
	  Position		  [530, 408, 590, 422]
	  NamePlacement		  "alternate"
	  Value			  "q_s_c"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Controller frame (S->C)1"
	  Position		  [25, 620, 95, 640]
	  ShowName		  off
	  Value			  "q_s_c"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Disturbances"
	  Ports			  [13, 2]
	  Position		  [130, 383, 370, 757]
	  AncestorBlock		  "components_lib/Disturbances/Disturbances"
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "Disturbances"
	    Location		    [215, 141, 1009, 878]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "A4"
	    PaperUnits		    "centimeters"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Moon positon R_m(I)"
	      Position		      [85, 393, 115, 407]
	      NamePlacement	      "alternate"
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	      Port {
		PortNumber		1
		Name			"R_m(I)\n"
		PropagatedSignals	"R_m(I)\n\n"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Sun position R_s(I)"
	      Position		      [85, 58, 115, 72]
	      NamePlacement	      "alternate"
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	      Port {
		PortNumber		1
		Name			"R_s(I)\n"
		PropagatedSignals	"R_s(I)\n"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Inertia folded I_f(C)"
	      Position		      [85, 508, 115, 522]
	      NamePlacement	      "alternate"
	      Port		      "3"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Orbit position R_sc(I)"
	      Position		      [85, 78, 115, 92]
	      Port		      "4"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Attitude q(I -> SC)"
	      Position		      [85, 263, 115, 277]
	      Port		      "5"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Orbit velocity V_sc(I)"
	      Position		      [85, 293, 115, 307]
	      Port		      "6"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Center of mass  R_com(SC)"
	      Position		      [85, 233, 115, 247]
	      Port		      "7"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Mass of Spacecraft\n"
	      Position		      [85, 573, 115, 587]
	      Port		      "8"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "q(SC->C)"
	      Position		      [85, 543, 115, 557]
	      NamePlacement	      "alternate"
	      Port		      "9"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "eclipse"
	      Position		      [85, 123, 115, 137]
	      Port		      "10"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Inertia deployed I_d(C)"
	      Position		      [85, 473, 115, 487]
	      NamePlacement	      "alternate"
	      Port		      "11"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "deployed"
	      Position		      [85, 158, 115, 172]
	      Port		      "12"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "R_com_deployed"
	      Position		      [85, 198, 115, 212]
	      Port		      "13"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Atmospheric"
	      Ports		      [4, 2]
	      Position		      [335, 261, 435, 364]
	      SourceBlock	      "components_lib/Disturbances/Atmospheric"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [580, 275, 640, 295]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Value		      "enable_dist"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Gravity"
	      Ports		      [7, 2]
	      Position		      [330, 389, 450, 591]
	      SourceBlock	      "components_lib/Disturbances/Gravity"
	      SourceType	      "Unknown"
	      ShowPortLabels	      "on"
	      G			      "6.673e-11"
	      M_sun		      "1.98892e30"
	      M_moon		      " 7.36e22"
	      M_earth		      "5.9742e24"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Inertia deployed2"
	      Position		      [580, 303, 640, 317]
	      NamePlacement	      "alternate"
	      ShowName		      off
	      Value		      "[0 0 0]"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Quaternion inverter"
	      Ports		      [1, 1]
	      Position		      [230, 542, 275, 558]
	      SourceBlock	      "components_lib/Math utilities/Quaternio"
"n operations/Quaternion inverter"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Radiation (I)"
	      Ports		      [6, 2]
	      Position		      [335, 60, 440, 170]
	      SourceBlock	      "components_lib/Disturbances/Radiation ("
"I)"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum1"
	      Ports		      [3, 1]
	      Position		      [485, 18, 500, 522]
	      ShowName		      off
	      Inputs		      "+++"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum2"
	      Ports		      [3, 1]
	      Position		      [540, 61, 555, 619]
	      ShowName		      off
	      Inputs		      "+++"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [220, 475, 250, 505]
	      ShowName		      off
	      Criteria		      "u2 > Threshold"
	      InputSameDT	      off
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch1"
	      Position		      [200, 200, 230, 230]
	      ShowName		      off
	      Criteria		      "u2 > Threshold"
	      InputSameDT	      off
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch2"
	      Position		      [660, 260, 690, 310]
	      Criteria		      "u2 ~= 0"
	      InputSameDT	      off
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Disturbance tourque N_dist(sc)"
	      Position		      [775, 278, 805, 292]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Disturbance Force F_dist(I)"
	      Position		      [615, 333, 645, 347]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      Labels		      [0, 0]
	      SrcBlock		      "deployed"
	      SrcPort		      1
	      Points		      [0, 0; 55, 0]
	      Branch {
		Points			[0, 50]
		Branch {
		  Points		  [0, -50]
		  DstBlock		  "Radiation (I)"
		  DstPort		  6
		}
		Branch {
		  Points		  [0, 135]
		  Branch {
		    DstBlock		    "Atmospheric"
		    DstPort		    4
		  }
		  Branch {
		    Points		    [0, 140]
		    DstBlock		    "Switch"
		    DstPort		    2
		  }
		}
	      }
	      Branch {
		Points			[0, 50]
		DstBlock		"Switch1"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Gravity"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "Inertia deployed I_d(C)"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Inertia folded I_f(C)"
	      SrcPort		      1
	      Points		      [55, 0; 0, -15]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "eclipse"
	      SrcPort		      1
	      Points		      [45, 0; 0, 15]
	      DstBlock		      "Radiation (I)"
	      DstPort		      5
	    }
	    Line {
	      SrcBlock		      "Sum2"
	      SrcPort		      1
	      DstBlock		      "Disturbance Force F_dist(I)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum1"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gravity"
	      SrcPort		      2
	      Points		      [70, 0]
	      DstBlock		      "Sum2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Atmospheric"
	      SrcPort		      2
	      DstBlock		      "Sum2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Radiation (I)"
	      SrcPort		      2
	      Points		      [80, 0]
	      DstBlock		      "Sum2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gravity"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Atmospheric"
	      SrcPort		      1
	      Points		      [30, 0]
	      DstBlock		      "Sum1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Radiation (I)"
	      SrcPort		      1
	      Points		      [25, 0]
	      DstBlock		      "Sum1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Orbit velocity V_sc(I)"
	      SrcPort		      1
	      DstBlock		      "Atmospheric"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Orbit position R_sc(I)"
	      SrcPort		      1
	      Points		      [5, 0; 150, 0]
	      Branch {
		DstBlock		"Radiation (I)"
		DstPort			2
	      }
	      Branch {
		Points			[0, 375]
		DstBlock		"Gravity"
		DstPort			3
	      }
	    }
	    Line {
	      Labels		      [1, 0]
	      SrcBlock		      "Attitude q(I -> SC)"
	      SrcPort		      1
	      Points		      [170, 0]
	      Branch {
		Points			[0, 0; 0, 250]
		DstBlock		"Gravity"
		DstPort			5
	      }
	      Branch {
		Points			[0, 0]
		Branch {
		  Points		  [0, 0; 0, -165]
		  DstBlock		  "Radiation (I)"
		  DstPort		  3
		}
		Branch {
		  Points		  [30, 0]
		  DstBlock		  "Atmospheric"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      Name		      "R_s(I)\n"
	      Labels		      [0, 0]
	      SrcBlock		      "Sun position R_s(I)"
	      SrcPort		      1
	      Points		      [5, 0; 135, 0]
	      Branch {
		DstBlock		"Radiation (I)"
		DstPort			1
	      }
	      Branch {
		Points			[0, 365]
		DstBlock		"Gravity"
		DstPort			2
	      }
	    }
	    Line {
	      Name		      "R_m(I)\n"
	      Labels		      [0, 0]
	      SrcBlock		      "Moon positon R_m(I)"
	      SrcPort		      1
	      DstBlock		      "Gravity"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Mass of Spacecraft\n"
	      SrcPort		      1
	      DstBlock		      "Gravity"
	      DstPort		      7
	    }
	    Line {
	      SrcBlock		      "Quaternion inverter"
	      SrcPort		      1
	      DstBlock		      "Gravity"
	      DstPort		      6
	    }
	    Line {
	      SrcBlock		      "q(SC->C)"
	      SrcPort		      1
	      DstBlock		      "Quaternion inverter"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Center of mass  R_com(SC)"
	      SrcPort		      1
	      Points		      [65, 0]
	      DstBlock		      "Switch1"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "R_com_deployed"
	      SrcPort		      1
	      DstBlock		      "Switch1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch1"
	      SrcPort		      1
	      Points		      [70, 0]
	      Branch {
		Points			[0, -90]
		DstBlock		"Radiation (I)"
		DstPort			4
	      }
	      Branch {
		Points			[0, 110]
		DstBlock		"Atmospheric"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "Inertia deployed2"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Switch2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch2"
	      SrcPort		      1
	      DstBlock		      "Disturbance tourque N_dist(sc)"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  Reference
	  Name			  "Ephemeris"
	  Ports			  [1, 3]
	  Position		  [135, 253, 370, 357]
	  SourceBlock		  "components_lib/Orbit and Ephemeris/Ephemeri"
"s"
	  SourceType		  "SubSystem"
	  ShowPortLabels	  "on"
	}
	Block {
	  BlockType		  From
	  Name			  "From1"
	  Position		  [25, 120, 115, 140]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "Pos_Sun_I"
	}
	Block {
	  BlockType		  From
	  Name			  "From10"
	  Position		  [520, 125, 610, 145]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "Pos_Sun_I"
	}
	Block {
	  BlockType		  From
	  Name			  "From11"
	  Position		  [520, 185, 610, 205]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "Omega_S"
	}
	Block {
	  BlockType		  From
	  Name			  "From12"
	  Position		  [520, 215, 610, 235]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "Pos_SC_I"
	}
	Block {
	  BlockType		  From
	  Name			  "From13"
	  Position		  [520, 245, 610, 265]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "Reflectivity"
	}
	Block {
	  BlockType		  From
	  Name			  "From14"
	  Position		  [520, 275, 610, 295]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "Eclipse"
	}
	Block {
	  BlockType		  From
	  Name			  "From15"
	  Position		  [25, 500, 115, 520]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "q_I_S"
	}
	Block {
	  BlockType		  From
	  Name			  "From16"
	  Position		  [650, 735, 740, 755]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "F_dist_S"
	}
	Block {
	  BlockType		  From
	  Name			  "From18"
	  Position		  [25, 410, 115, 430]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "Pos_Sun_I"
	}
	Block {
	  BlockType		  From
	  Name			  "From19"
	  Position		  [25, 470, 115, 490]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "Pos_SC_I"
	}
	Block {
	  BlockType		  From
	  Name			  "From2"
	  Position		  [520, 580, 610, 600]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "N_dist_S"
	}
	Block {
	  BlockType		  From
	  Name			  "From20"
	  Position		  [25, 710, 115, 730]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "deployed"
	}
	Block {
	  BlockType		  From
	  Name			  "From22"
	  Position		  [25, 530, 115, 550]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "Vel_SC_I"
	}
	Block {
	  BlockType		  From
	  Name			  "From23"
	  Position		  [25, 650, 115, 670]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "Eclipse"
	}
	Block {
	  BlockType		  From
	  Name			  "From3"
	  Position		  [25, 55, 115, 75]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "q_I_E"
	}
	Block {
	  BlockType		  From
	  Name			  "From4"
	  Position		  [520, 95, 610, 115]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "Mag_I"
	}
	Block {
	  BlockType		  From
	  Name			  "From5"
	  Position		  [25, 295, 115, 315]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "Sim_time_JD"
	}
	Block {
	  BlockType		  From
	  Name			  "From6"
	  Position		  [25, 380, 115, 400]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "Pos_Moon_I"
	}
	Block {
	  BlockType		  From
	  Name			  "From7"
	  Position		  [520, 65, 610, 85]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "q_I_S"
	}
	Block {
	  BlockType		  From
	  Name			  "From8"
	  Position		  [520, 615, 610, 635]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "deployed"
	}
	Block {
	  BlockType		  From
	  Name			  "From9"
	  Position		  [520, 155, 610, 175]
	  ShowName		  off
	  CloseFcn		  "tagdialog Close"
	  GotoTag		  "q_I_E"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto"
	  Position		  [390, 30, 480, 50]
	  ShowName		  off
	  GotoTag		  "Mag_I"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto1"
	  Position		  [390, 65, 480, 85]
	  ShowName		  off
	  GotoTag		  "Vel_SC_I"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto10"
	  Position		  [865, 410, 955, 430]
	  ShowName		  off
	  GotoTag		  "q_I_S"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto11"
	  Position		  [865, 575, 955, 595]
	  ShowName		  off
	  GotoTag		  "Omega_S"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto12"
	  Position		  [390, 655, 480, 675]
	  ShowName		  off
	  GotoTag		  "F_dist_S"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto13"
	  Position		  [750, 695, 840, 715]
	  ShowName		  off
	  GotoTag		  "deployed"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto2"
	  Position		  [390, 295, 480, 315]
	  ShowName		  off
	  GotoTag		  "Pos_Sun_I"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto3"
	  Position		  [390, 100, 480, 120]
	  ShowName		  off
	  GotoTag		  "Pos_SC_I"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto4"
	  Position		  [390, 260, 480, 280]
	  ShowName		  off
	  GotoTag		  "Pos_Moon_I"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto5"
	  Position		  [390, 135, 480, 155]
	  ShowName		  off
	  GotoTag		  "Sim_time_JD"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto6"
	  Position		  [390, 205, 480, 225]
	  ShowName		  off
	  GotoTag		  "Eclipse"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto7"
	  Position		  [390, 170, 480, 190]
	  ShowName		  off
	  GotoTag		  "Reflectivity"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto8"
	  Position		  [390, 330, 480, 350]
	  ShowName		  off
	  GotoTag		  "q_I_E"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Goto
	  Name			  "Goto9"
	  Position		  [390, 470, 480, 490]
	  ShowName		  off
	  GotoTag		  "N_dist_S"
	  TagVisibility		  "global"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Inertia deployed"
	  Position		  [530, 653, 590, 667]
	  NamePlacement		  "alternate"
	  Value			  "inertia_d"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Inertia deployed1"
	  Position		  [25, 679, 95, 701]
	  NamePlacement		  "alternate"
	  ShowName		  off
	  Value			  "inertia_d"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Initial angular rate W_i(S)"
	  Position		  [530, 337, 590, 353]
	  NamePlacement		  "alternate"
	  Value			  "w_init_s"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Initial attitude q_i(SC->I)"
	  Position		  [530, 373, 590, 387]
	  NamePlacement		  "alternate"
	  Value			  "q_init_s_i"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Initial time (JD)"
	  Position		  [35, 188, 95, 202]
	  NamePlacement		  "alternate"
	  Value			  "init_jd"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Mass of spaccraft"
	  Position		  [25, 589, 95, 611]
	  ShowName		  off
	  Value			  "mass_sc"
	}
	Block {
	  BlockType		  Reference
	  Name			  "Orbit and Magnetic field models"
	  Ports			  [3, 6]
	  Position		  [135, 28, 365, 227]
	  SourceBlock		  "components_lib/Orbit and Ephemeris/Orbit an"
"d Magnetic field models"
	  SourceType		  "Unknown"
	  ShowPortLabels	  "on"
	  data_type		  "SGP4/IGRF models"
	  tle_type		  "Oersted TLE"
	  reflectivity_enabled	  "0"
	}
	Block {
	  BlockType		  Reference
	  Name			  "Sensor Emulation"
	  Ports			  [8, 4, 1]
	  Position		  [630, 51, 845, 309]
	  SourceBlock		  "components_lib/Sensor Emulation/Sensor Emul"
"ation"
	  SourceType		  "SubSystem"
	  ShowPortLabels	  "on"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Spacecraft Dynamics"
	  Ports			  [10, 2]
	  Position		  [635, 337, 845, 668]
	  AncestorBlock		  "components_lib/Dynamics and Kinematics/Spac"
"ecraft Dynamics"
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "Spacecraft Dynamics"
	    Location		    [246, 74, 1022, 706]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "A4"
	    PaperUnits		    "centimeters"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Initial angular velocity W_i(S)"
	      Position		      [55, 38, 85, 52]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Initial attitude q(I->S)"
	      Position		      [55, 78, 85, 92]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Controller frame  q(S->C)"
	      Position		      [55, 148, 85, 162]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Spacecraft Inertia I(C)"
	      Position		      [55, 418, 85, 432]
	      Port		      "4"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "N_mt(S)"
	      Position		      [55, 218, 85, 232]
	      Port		      "5"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "N_mw(S)"
	      Position		      [55, 188, 85, 202]
	      Port		      "6"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "H_mw(S)"
	      Position		      [55, 283, 85, 297]
	      Port		      "7"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Disturbance N_dist(S)"
	      Position		      [55, 253, 85, 267]
	      Port		      "8"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "deployed"
	      Position		      [55, 373, 85, 387]
	      Port		      "9"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Inertia deployed I_d(C)"
	      Position		      [55, 333, 85, 347]
	      Port		      "10"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Reverse quaternion rotation"
	      Ports		      [1, 1]
	      Position		      [215, 134, 315, 176]
	      SourceBlock	      "components_lib/Math utilities/Quaternio"
"n operations/Reverse quaternion rotation"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Rotation of q1 by q1"
	      Ports		      [2, 1]
	      Position		      [610, 74, 670, 116]
	      SourceBlock	      "components_lib/Math utilities/Quaternio"
"n operations/Rotation of q1 by q2"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Rotation of q1 by q2"
	      Ports		      [2, 1]
	      Position		      [215, 74, 315, 116]
	      SourceBlock	      "components_lib/Math utilities/Quaternio"
"n operations/Rotation of q1 by q2"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [3, 1]
	      Position		      [135, 215, 155, 235]
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "-++"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [160, 365, 190, 395]
	      Criteria		      "u2 > Threshold"
	      InputSameDT	      off
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Vector rotation by q"
	      Ports		      [2, 1]
	      Position		      [215, 14, 315, 56]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/Vector rotation by q"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Vector rotation by q1"
	      Ports		      [2, 1]
	      Position		      [215, 194, 315, 236]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/Vector rotation by q"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Vector rotation by q2"
	      Ports		      [2, 1]
	      Position		      [215, 259, 315, 301]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/Vector rotation by q"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Vector rotation by q3"
	      Ports		      [2, 1]
	      Position		      [605, 194, 670, 236]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/Vector rotation by q"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      "S-Function"
	      Name		      "sc-dynamics"
	      Ports		      [4, 1]
	      Position		      [365, 189, 435, 261]
	      FunctionName	      "scdynamics"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "w to q"
	      Ports		      [2, 1]
	      Position		      [475, 64, 575, 106]
	      SourceBlock	      "components_lib/Math utilities/Quaternio"
"n operations/w to q"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Attitude q(I->S)"
	      Position		      [715, 88, 745, 102]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Angular velocity W(S)"
	      Position		      [715, 208, 745, 222]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "N_mw(S)"
	      SrcPort		      1
	      Points		      [55, 0]
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Disturbance N_dist(S)"
	      SrcPort		      1
	      Points		      [55, 0]
	      DstBlock		      "Sum"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "N_mt(S)"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Vector rotation by q1"
	      SrcPort		      1
	      DstBlock		      "sc-dynamics"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Rotation of q1 by q1"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Attitude q(I->S)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "sc-dynamics"
	      SrcPort		      1
	      Points		      [15, 0]
	      Branch {
		DstBlock		"Vector rotation by q3"
		DstPort			2
	      }
	      Branch {
		Points			[0, -150]
		DstBlock		"w to q"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "H_mw(S)"
	      SrcPort		      1
	      DstBlock		      "Vector rotation by q2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "w to q"
	      SrcPort		      1
	      DstBlock		      "Rotation of q1 by q1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Rotation of q1 by q2"
	      SrcPort		      1
	      DstBlock		      "w to q"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Vector rotation by q3"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Angular velocity W(S)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Reverse quaternion rotation"
	      SrcPort		      1
	      Points		      [265, 0]
	      Branch {
		Points			[0, 50]
		DstBlock		"Vector rotation by q3"
		DstPort			1
	      }
	      Branch {
		Points			[0, -50]
		DstBlock		"Rotation of q1 by q1"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Vector rotation by q2"
	      SrcPort		      1
	      Points		      [15, 0; 0, -45]
	      DstBlock		      "sc-dynamics"
	      DstPort		      3
	    }
	    Line {
	      Labels		      [2, 0]
	      SrcBlock		      "Vector rotation by q"
	      SrcPort		      1
	      Points		      [15, 0; 0, 160]
	      DstBlock		      "sc-dynamics"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Initial attitude q(I->S)"
	      SrcPort		      1
	      DstBlock		      "Rotation of q1 by q2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Controller frame  q(S->C)"
	      SrcPort		      1
	      Points		      [95, 0]
	      Branch {
		Points			[0, -50]
		Branch {
		  Points		  [0, -80]
		  DstBlock		  "Vector rotation by q"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "Rotation of q1 by q2"
		  DstPort		  2
		}
	      }
	      Branch {
		Points			[0, 0]
		Branch {
		  Points		  [0, 50]
		  DstBlock		  "Vector rotation by q1"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "Reverse quaternion rotation"
		  DstPort		  1
		}
	      }
	      Branch {
		Points			[0, 115]
		DstBlock		"Vector rotation by q2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Initial angular velocity W_i(S)"
	      SrcPort		      1
	      DstBlock		      "Vector rotation by q"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Vector rotation by q1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      Points		      [155, 0]
	      DstBlock		      "sc-dynamics"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "Inertia deployed I_d(C)"
	      SrcPort		      1
	      Points		      [55, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Spacecraft Inertia I(C)"
	      SrcPort		      1
	      Points		      [25, 0; 0, -35]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "deployed"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  Constant
	  Name			  "Spacecraft inertia (C)"
	  Position		  [530, 443, 590, 457]
	  NamePlacement		  "alternate"
	  Value			  "inertia_c"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Spacecraft inertia (C)1"
	  Position		  [25, 440, 100, 460]
	  ShowName		  off
	  Value			  "inertia_c"
	}
	Block {
	  BlockType		  Terminator
	  Name			  "Terminator"
	  Position		  [765, 735, 785, 755]
	}
	Block {
	  BlockType		  Outport
	  Name			  "Magnetometer(S) V_ADC [mV]"
	  Position		  [905, 78, 935, 92]
	  BackgroundColor	  "red"
	  IconDisplay		  "Port number"
	  BusOutputAsStruct	  off
	}
	Block {
	  BlockType		  Outport
	  Name			  "Gyros(S) V_ADC [mV]"
	  Position		  [905, 143, 935, 157]
	  BackgroundColor	  "red"
	  Port			  "2"
	  IconDisplay		  "Port number"
	  BusOutputAsStruct	  off
	}
	Block {
	  BlockType		  Outport
	  Name			  "Sun sensors(S) [mA]"
	  Position		  [905, 208, 935, 222]
	  BackgroundColor	  "red"
	  Port			  "3"
	  IconDisplay		  "Port number"
	  BusOutputAsStruct	  off
	}
	Block {
	  BlockType		  Outport
	  Name			  "Temperature(S) V_ADC [mV]"
	  Position		  [905, 273, 935, 287]
	  BackgroundColor	  "red"
	  Port			  "4"
	  IconDisplay		  "Port number"
	  BusOutputAsStruct	  off
	}
	Line {
	  SrcBlock		  "From2"
	  SrcPort		  1
	  DstBlock		  "Spacecraft Dynamics"
	  DstPort		  8
	}
	Line {
	  SrcBlock		  "Center of mass R_com(S)1"
	  SrcPort		  1
	  DstBlock		  "Disturbances"
	  DstPort		  13
	}
	Line {
	  SrcBlock		  "Momentum wheel N_mw(S)"
	  SrcPort		  1
	  DstBlock		  "Spacecraft Dynamics"
	  DstPort		  6
	}
	Line {
	  SrcBlock		  "From23"
	  SrcPort		  1
	  DstBlock		  "Disturbances"
	  DstPort		  10
	}
	Line {
	  SrcBlock		  "From13"
	  SrcPort		  1
	  DstBlock		  "Sensor Emulation"
	  DstPort		  7
	}
	Line {
	  SrcBlock		  "From12"
	  SrcPort		  1
	  DstBlock		  "Sensor Emulation"
	  DstPort		  6
	}
	Line {
	  SrcBlock		  "From11"
	  SrcPort		  1
	  DstBlock		  "Sensor Emulation"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "From9"
	  SrcPort		  1
	  DstBlock		  "Sensor Emulation"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "From4"
	  SrcPort		  1
	  DstBlock		  "Sensor Emulation"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From10"
	  SrcPort		  1
	  DstBlock		  "Sensor Emulation"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From7"
	  SrcPort		  1
	  DstBlock		  "Sensor Emulation"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From22"
	  SrcPort		  1
	  DstBlock		  "Disturbances"
	  DstPort		  6
	}
	Line {
	  SrcBlock		  "From15"
	  SrcPort		  1
	  DstBlock		  "Disturbances"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "From19"
	  SrcPort		  1
	  DstBlock		  "Disturbances"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "Initial time (JD)"
	  SrcPort		  1
	  DstBlock		  "Orbit and Magnetic field models"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "From18"
	  SrcPort		  1
	  DstBlock		  "Disturbances"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From6"
	  SrcPort		  1
	  DstBlock		  "Disturbances"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From1"
	  SrcPort		  1
	  DstBlock		  "Orbit and Magnetic field models"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "From5"
	  SrcPort		  1
	  DstBlock		  "Ephemeris"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Spacecraft Dynamics"
	  SrcPort		  2
	  DstBlock		  "Goto11"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Spacecraft Dynamics"
	  SrcPort		  1
	  DstBlock		  "Goto10"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Disturbances"
	  SrcPort		  2
	  DstBlock		  "Goto12"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Orbit and Magnetic field models"
	  SrcPort		  5
	  DstBlock		  "Goto7"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ephemeris"
	  SrcPort		  3
	  DstBlock		  "Goto8"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ephemeris"
	  SrcPort		  2
	  DstBlock		  "Goto2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Ephemeris"
	  SrcPort		  1
	  DstBlock		  "Goto4"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Orbit and Magnetic field models"
	  SrcPort		  4
	  DstBlock		  "Goto5"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Initial attitude q_i(SC->I)"
	  SrcPort		  1
	  DstBlock		  "Spacecraft Dynamics"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Initial angular rate W_i(S)"
	  SrcPort		  1
	  DstBlock		  "Spacecraft Dynamics"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Orbit and Magnetic field models"
	  SrcPort		  3
	  DstBlock		  "Goto3"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Controller frame (S->C)"
	  SrcPort		  1
	  DstBlock		  "Spacecraft Dynamics"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Spacecraft inertia (C)"
	  SrcPort		  1
	  DstBlock		  "Spacecraft Dynamics"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "Spacecraft inertia (C)1"
	  SrcPort		  1
	  DstBlock		  "Disturbances"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Center of mass R_com(S)"
	  SrcPort		  1
	  DstBlock		  "Disturbances"
	  DstPort		  7
	}
	Line {
	  SrcBlock		  "From3"
	  SrcPort		  1
	  DstBlock		  "Orbit and Magnetic field models"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Orbit and Magnetic field models"
	  SrcPort		  2
	  DstBlock		  "Goto1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sensor Emulation"
	  SrcPort		  3
	  DstBlock		  "Sun sensors(S) [mA]"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sensor Emulation"
	  SrcPort		  2
	  DstBlock		  "Gyros(S) V_ADC [mV]"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sensor Emulation"
	  SrcPort		  1
	  DstBlock		  "Magnetometer(S) V_ADC [mV]"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Orbit and Magnetic field models"
	  SrcPort		  1
	  DstBlock		  "Goto"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Mass of spaccraft"
	  SrcPort		  1
	  DstBlock		  "Disturbances"
	  DstPort		  8
	}
	Line {
	  SrcBlock		  "Controller frame (S->C)1"
	  SrcPort		  1
	  DstBlock		  "Disturbances"
	  DstPort		  9
	}
	Line {
	  SrcBlock		  "Momentum wheel H_mw(S)"
	  SrcPort		  1
	  DstBlock		  "Spacecraft Dynamics"
	  DstPort		  7
	}
	Line {
	  SrcBlock		  "Magnetorquer N_mt(S)"
	  SrcPort		  1
	  DstBlock		  "Spacecraft Dynamics"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "Sensor Emulation"
	  SrcPort		  4
	  DstBlock		  "Temperature(S) V_ADC [mV]"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Orbit and Magnetic field models"
	  SrcPort		  6
	  DstBlock		  "Goto6"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "From14"
	  SrcPort		  1
	  DstBlock		  "Sensor Emulation"
	  DstPort		  8
	}
	Line {
	  SrcBlock		  "From16"
	  SrcPort		  1
	  DstBlock		  "Terminator"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "deployed solar array"
	  SrcPort		  1
	  DstBlock		  "Goto13"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Inertia deployed"
	  SrcPort		  1
	  DstBlock		  "Spacecraft Dynamics"
	  DstPort		  10
	}
	Line {
	  SrcBlock		  "From8"
	  SrcPort		  1
	  DstBlock		  "Spacecraft Dynamics"
	  DstPort		  9
	}
	Line {
	  SrcBlock		  "From20"
	  SrcPort		  1
	  DstBlock		  "Disturbances"
	  DstPort		  12
	}
	Line {
	  SrcBlock		  "Inertia deployed1"
	  SrcPort		  1
	  DstBlock		  "Disturbances"
	  DstPort		  11
	}
	Line {
	  SrcBlock		  "Disturbances"
	  SrcPort		  1
	  DstBlock		  "Goto9"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  Points		  [85, 0]
	  DstBlock		  "Sensor Emulation"
	  DstPort		  enable
	}
	Annotation {
	  Position		  [418, 45]
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "Orbit and Ephemeris"
      Ports		      []
      Position		      [582, 39, 722, 111]
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      MinAlgLoopOccurrences   off
      RTWSystemCode	      "Auto"
      System {
	Name			"Orbit and Ephemeris"
	Location		[70, 81, 880, 743]
	Open			off
	ModelBrowserVisibility	on
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  SubSystem
	  Name			  "(IGRF) Magnetic field"
	  Ports			  [2, 1, 1]
	  Position		  [295, 305, 495, 420]
	  TreatAsAtomicUnit	  on
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "(IGRF) Magnetic field"
	    Location		    [580, 551, 1119, 773]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "portrait"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Spacecraft position R_sc(I)"
	      Position		      [50, 123, 80, 137]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Earth rotation q(I->E)"
	      Position		      [50, 103, 80, 117]
	      NamePlacement	      "alternate"
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      EnablePort
	      Name		      "Enable"
	      Ports		      []
	      Position		      [235, 20, 255, 40]
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Magnetic field model"
	      Ports		      [1, 1]
	      Position		      [250, 100, 320, 140]
	      SourceBlock	      "components_lib/Orbit and Ephemeris/Magn"
"etic field model"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	      Port {
		PortNumber		1
		Name			"B(I / E)"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "T->Gauss"
	      Position		      [365, 104, 390, 136]
	      Gain		      "1e4"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Vector rotation by q"
	      Ports		      [2, 1]
	      Position		      [150, 99, 215, 141]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/Vector rotation by q"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Magnetic field vector B(E)"
	      Position		      [430, 113, 460, 127]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "T->Gauss"
	      SrcPort		      1
	      DstBlock		      "Magnetic field vector B(E)"
	      DstPort		      1
	    }
	    Line {
	      Name		      "B(I / E)"
	      Labels		      [0, 0]
	      SrcBlock		      "Magnetic field model"
	      SrcPort		      1
	      DstBlock		      "T->Gauss"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Vector rotation by q"
	      SrcPort		      1
	      DstBlock		      "Magnetic field model"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Earth rotation q(I->E)"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Vector rotation by q"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Spacecraft position R_sc(I)"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Vector rotation by q"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Albedo"
	  Ports			  [3, 1, 1]
	  Position		  [295, 22, 495, 138]
	  TreatAsAtomicUnit	  on
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "Albedo"
	    Location		    [276, 158, 944, 362]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "portrait"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Sunlight vector(I)"
	      Position		      [120, 143, 150, 157]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Nadir vector (I)"
	      Position		      [120, 68, 150, 82]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "q(I>E)"
	      Position		      [20, 123, 50, 137]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      EnablePort
	      Name		      "Enable"
	      Ports		      []
	      Position		      [500, 30, 520, 50]
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Earth Albedo\nModel"
	      Ports		      [2, 1]
	      Position		      [380, 76, 470, 129]
	      SourceBlock	      "albedo_lib/Earth Albedo\nModel"
	      SourceType	      "Earth Albedo Model"
	      ShowPortLabels	      "on"
	      eprdata		      "load('lib/space_environment_emulation/a"
"lbedo/toolbox/epr_data/2003/ga030101-031231')"
	      redfac		      "1"
	      Ts		      "10"
	      enable		      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Vector rotation by q1"
	      Ports		      [2, 1]
	      Position		      [215, 44, 280, 86]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/Vector rotation by q"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Vector rotation by q2"
	      Ports		      [2, 1]
	      Position		      [215, 119, 280, 161]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/Vector rotation by q"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Reflectivity matrix"
	      Position		      [575, 98, 605, 112]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "Sunlight vector(I)"
	      SrcPort		      1
	      DstBlock		      "Vector rotation by q2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "q(I>E)"
	      SrcPort		      1
	      Points		      [0, 0; 20, 0]
	      Branch {
		DstBlock		"Vector rotation by q2"
		DstPort			1
	      }
	      Branch {
		Points			[0, -75]
		DstBlock		"Vector rotation by q1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Nadir vector (I)"
	      SrcPort		      1
	      DstBlock		      "Vector rotation by q1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Earth Albedo\nModel"
	      SrcPort		      1
	      DstBlock		      "Reflectivity matrix"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Vector rotation by q2"
	      SrcPort		      1
	      Points		      [40, 0; 0, -25]
	      DstBlock		      "Earth Albedo\nModel"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Vector rotation by q1"
	      SrcPort		      1
	      Points		      [40, 0; 0, 25]
	      DstBlock		      "Earth Albedo\nModel"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Albedo emulation model"
	  Ports			  [3, 1]
	  Position		  [65, 23, 265, 137]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "Albedo emulation model"
	    Location		    [42, 80, 1243, 761]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "portrait"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Sunlight vector(I)"
	      Position		      [125, 163, 155, 177]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Nadir vector (I)"
	      Position		      [125, 88, 155, 102]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "q(I>E)"
	      Position		      [25, 143, 55, 157]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Earth Albedo\nModel1"
	      Ports		      [2, 1]
	      Position		      [385, 96, 475, 149]
	      SourceBlock	      "albedo_lib/Earth Albedo\nModel"
	      SourceType	      "Earth Albedo Model"
	      ShowPortLabels	      "on"
	      eprdata		      "mean_epr"
	      redfac		      "1"
	      Ts		      "60"
	      enable		      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Vector rotation by q1"
	      Ports		      [2, 1]
	      Position		      [220, 64, 285, 106]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/Vector rotation by q"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Vector rotation by q2"
	      Ports		      [2, 1]
	      Position		      [220, 139, 285, 181]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/Vector rotation by q"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Reflectivity matrix"
	      Position		      [580, 118, 610, 132]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "Vector rotation by q1"
	      SrcPort		      1
	      Points		      [40, 0; 0, 25]
	      DstBlock		      "Earth Albedo\nModel1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Vector rotation by q2"
	      SrcPort		      1
	      Points		      [40, 0; 0, -25]
	      DstBlock		      "Earth Albedo\nModel1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Earth Albedo\nModel1"
	      SrcPort		      1
	      DstBlock		      "Reflectivity matrix"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Nadir vector (I)"
	      SrcPort		      1
	      DstBlock		      "Vector rotation by q1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "q(I>E)"
	      SrcPort		      1
	      Points		      [0, 0; 20, 0]
	      Branch {
		Points			[0, -75]
		DstBlock		"Vector rotation by q1"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Vector rotation by q2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Sunlight vector(I)"
	      SrcPort		      1
	      DstBlock		      "Vector rotation by q2"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Eclipse model"
	  Ports			  [2, 1]
	  Position		  [65, 445, 265, 560]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  MaskPromptString	  "Radius of Earth [m]|Max. angle of theta [de"
"g] (eclipse: theta > r_earth/norm(R_SA))"
	  MaskStyleString	  "edit,edit"
	  MaskTunableValueString  "on,on"
	  MaskCallbackString	  "|"
	  MaskEnableString	  "on,on"
	  MaskVisibilityString	  "on,on"
	  MaskToolTipString	  "on,on"
	  MaskVarAliasString	  ","
	  MaskVariables		  "r_e=@1;theta_e=@2;"
	  MaskDisplay		  "image(imread('eclipse.jpg'));\ncolor('white"
"'); \nport_label('input', 1, 'Sun vector (I)');\nport_label('input', 2, 'Sate"
"llite vector (I)');\nport_label('output', 1, 'Eclipse');\nfprintf('1=true,\\n"
" 0=false')\n\n"
	  MaskIconFrame		  on
	  MaskIconOpaque	  off
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "6371010|65"
	  MaskTabNameString	  ","
	  System {
	    Name		    "Eclipse model"
	    Location		    [215, 80, 977, 660]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "portrait"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Sun vector (I)"
	      Position		      [25, 43, 55, 57]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Satellite (I)"
	      Position		      [25, 143, 55, 157]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [365, 25, 395, 55]
	      Value		      "pi"
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Divide"
	      Ports		      [2, 1]
	      Position		      [200, 242, 215, 353]
	      Inputs		      "*/"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      OutScaling	      "2^-10"
	      RndMeth		      "Floor"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Dot Product"
	      Ports		      [2, 1]
	      Position		      [275, 82, 305, 113]
	      SourceBlock	      "simulink/Math\nOperations/Dot Product"
	      SourceType	      "Dot Product"
	      InputSameDT	      "on"
	      OutputDataTypeScalingMode	"Inherit via internal rule"
	      OutDataType	      "sfix(16)"
	      OutScaling	      "2^-10"
	      LockScale		      "off"
	      RndMeth		      "Floor"
	      DoSatur		      "off"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Dot Product1"
	      Ports		      [2, 1]
	      Position		      [90, 307, 120, 338]
	      SourceBlock	      "simulink/Math\nOperations/Dot Product"
	      SourceType	      "Dot Product"
	      InputSameDT	      "on"
	      OutputDataTypeScalingMode	"Inherit via internal rule"
	      OutDataType	      "sfix(16)"
	      OutScaling	      "2^-10"
	      LockScale		      "off"
	      RndMeth		      "Floor"
	      DoSatur		      "off"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Earth radius"
	      Position		      [115, 255, 175, 285]
	      Value		      "r_e"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "False"
	      Position		      [475, 170, 505, 200]
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Manual Switch"
	      Ports		      [2, 1]
	      Position		      [355, 212, 385, 248]
	      ShowName		      off
	      SourceBlock	      "simulink/Signal\nRouting/Manual Switch"
	      SourceType	      "Manual Switch"
	      ShowPortLabels	      "on"
	      sw		      "0"
	      action		      "0"
	    }
	    Block {
	      BlockType		      Math
	      Name		      "Math\nFunction"
	      Ports		      [1, 1]
	      Position		      [145, 310, 175, 340]
	      Operator		      "sqrt"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Max angle"
	      Position		      [215, 206, 300, 234]
	      Value		      "theta_e/180*pi"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Satellite unit vector"
	      Ports		      [1, 1]
	      Position		      [100, 129, 200, 171]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/to unit vector"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [445, 90, 465, 110]
	      Orientation	      "down"
	      NamePlacement	      "alternate"
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "-+|"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	      Port {
		PortNumber		1
		Name			"theta"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum1"
	      Ports		      [2, 1]
	      Position		      [445, 220, 465, 240]
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "+-|"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Sun unit vector"
	      Ports		      [1, 1]
	      Position		      [100, 29, 200, 71]
	      SourceBlock	      "components_lib/Math utilities/Vector op"
"erations/to unit vector"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [535, 203, 560, 257]
	      InputSameDT	      off
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Trigonometry
	      Name		      "Trigonometric\nFunction"
	      Ports		      [1, 1]
	      Position		      [275, 285, 305, 315]
	      Operator		      "asin"
	    }
	    Block {
	      BlockType		      Trigonometry
	      Name		      "Trigonometric\nFunction1"
	      Ports		      [1, 1]
	      Position		      [365, 85, 395, 115]
	      Operator		      "acos"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "True"
	      Position		      [475, 260, 505, 290]
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Eclipse:\n1 = true,\n0 = false"
	      Position		      [615, 223, 645, 237]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	      PortDimensions	      "1"
	    }
	    Line {
	      SrcBlock		      "Sun vector (I)"
	      SrcPort		      1
	      DstBlock		      "Sun unit vector"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Satellite (I)"
	      SrcPort		      1
	      Points		      [0, 0; 15, 0]
	      Branch {
		DstBlock		"Satellite unit vector"
		DstPort			1
	      }
	      Branch {
		Points			[0, 175]
		Branch {
		  DstBlock		  "Dot Product1"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "Dot Product1"
		  DstPort		  2
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Sun unit vector"
	      SrcPort		      1
	      Points		      [30, 0; 0, 40]
	      DstBlock		      "Dot Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Satellite unit vector"
	      SrcPort		      1
	      Points		      [30, 0; 0, -45]
	      DstBlock		      "Dot Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Dot Product"
	      SrcPort		      1
	      DstBlock		      "Trigonometric\nFunction1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Earth radius"
	      SrcPort		      1
	      DstBlock		      "Divide"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Math\nFunction"
	      SrcPort		      1
	      DstBlock		      "Divide"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Divide"
	      SrcPort		      1
	      DstBlock		      "Trigonometric\nFunction"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Trigonometric\nFunction1"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [55, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      Name		      "theta"
	      Labels		      [0, 1]
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum1"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "True"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Switch"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "False"
	      SrcPort		      1
	      Points		      [10, 0]
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Eclipse:\n1 = true,\n0 = false"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Manual Switch"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Trigonometric\nFunction"
	      SrcPort		      1
	      Points		      [20, 0; 0, -60]
	      DstBlock		      "Manual Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Max angle"
	      SrcPort		      1
	      DstBlock		      "Manual Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Dot Product1"
	      SrcPort		      1
	      DstBlock		      "Math\nFunction"
	      DstPort		      1
	    }
	    Annotation {
	      Name		      "theta_e"
	      Position		      [402, 221]
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Ephemeris"
	  Ports			  [1, 3]
	  Position		  [65, 163, 265, 277]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "Ephemeris"
	    Location		    [109, 106, 920, 582]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "portrait"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Time t(JD)"
	      Position		      [80, 138, 110, 152]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	      Port {
		PortNumber		1
		Name			"t"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "ECEF"
	      Ports		      [1, 1]
	      Position		      [215, 209, 315, 251]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      Port {
		PortNumber		1
		Name			"q(I -> E)\n"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
		ShowSigGenPortName	on
	      }
	      System {
		Name			"ECEF"
		Location		[425, 283, 923, 583]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "t(JD)"
		  Position		  [110, 103, 140, 117]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  MATLABFcn
		  Name			  "eci2ecef"
		  Position		  [210, 95, 270, 125]
		  MATLABFcn		  "eci2ecef"
		  OutputDimensions	  "4"
		}
		Block {
		  BlockType		  Outport
		  Name			  "q(I->E)"
		  Position		  [360, 103, 390, 117]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "eci2ecef"
		  SrcPort		  1
		  DstBlock		  "q(I->E)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "t(JD)"
		  SrcPort		  1
		  DstBlock		  "eci2ecef"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Moon Position"
	      Ports		      [1, 1]
	      Position		      [215, 44, 315, 86]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      Port {
		PortNumber		1
		Name			"R_m(I)\n\n"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
		ShowSigGenPortName	on
	      }
	      System {
		Name			"Moon Position"
		Location		[428, 283, 926, 583]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "t(JD)1"
		  Position		  [125, 93, 155, 107]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  MATLABFcn
		  Name			  "Moon R in ECI"
		  Position		  [215, 85, 275, 115]
		  MATLABFcn		  "moon"
		  OutputDimensions	  "3"
		}
		Block {
		  BlockType		  Outport
		  Name			  "R_m(I)"
		  Position		  [310, 93, 340, 107]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "t(JD)1"
		  SrcPort		  1
		  DstBlock		  "Moon R in ECI"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Moon R in ECI"
		  SrcPort		  1
		  DstBlock		  "R_m(I)"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Sun Position"
	      Ports		      [1, 1]
	      Position		      [215, 124, 315, 166]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      Port {
		PortNumber		1
		Name			"R_s(I)\n"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
		ShowSigGenPortName	on
	      }
	      System {
		Name			"Sun Position"
		Location		[237, 511, 735, 811]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "t(JD)"
		  Position		  [130, 133, 160, 147]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  MATLABFcn
		  Name			  "Sun R in ECI"
		  Position		  [235, 125, 295, 155]
		  MATLABFcn		  "sun"
		  OutputDimensions	  "3"
		}
		Block {
		  BlockType		  Outport
		  Name			  "R_s(I)"
		  Position		  [375, 133, 405, 147]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "t(JD)"
		  SrcPort		  1
		  DstBlock		  "Sun R in ECI"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sun R in ECI"
		  SrcPort		  1
		  DstBlock		  "R_s(I)"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Moon position R_m(I)"
	      Position		      [440, 58, 470, 72]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Sun Position R_s(I)"
	      Position		      [430, 138, 460, 152]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Earth Rotation q(I->E)"
	      Position		      [440, 223, 470, 237]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      Name		      "q(I -> E)\n"
	      Labels		      [0, 0]
	      SrcBlock		      "ECEF"
	      SrcPort		      1
	      DstBlock		      "Earth Rotation q(I->E)"
	      DstPort		      1
	    }
	    Line {
	      Name		      "t"
	      Labels		      [0, 0]
	      SrcBlock		      "Time t(JD)"
	      SrcPort		      1
	      Points		      [35, 0; -5, 0]
	      Branch {
		Points			[0, -80]
		DstBlock		"Moon Position"
		DstPort			1
	      }
	      Branch {
		Labels			[1, 0]
		Points			[0, 0]
		Branch {
		  DstBlock		  "Sun Position"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 85]
		  DstBlock		  "ECEF"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      Name		      "R_m(I)\n\n"
	      Labels		      [0, 0]
	      SrcBlock		      "Moon Position"
	      SrcPort		      1
	      DstBlock		      "Moon position R_m(I)"
	      DstPort		      1
	    }
	    Line {
	      Name		      "R_s(I)\n"
	      Labels		      [0, 0]
	      SrcBlock		      "Sun Position"
	      SrcPort		      1
	      DstBlock		      "Sun Position R_s(I)"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Magnetic field model"
	  Ports			  [1, 1]
	  Position		  [295, 164, 495, 276]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "Magnetic field model"
	    Location		    [433, 403, 931, 703]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "portrait"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "R_sc(E)"
	      Position		      [110, 103, 140, 117]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      "S-Function"
	      Name		      "S-Function"
	      Ports		      [1, 1]
	      Position		      [205, 95, 265, 125]
	      FunctionName	      "igrfS"
	      Parameters	      "2002,10"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "B(E)"
	      Position		      [360, 103, 390, 117]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "R_sc(E)"
	      SrcPort		      1
	      DstBlock		      "S-Function"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "S-Function"
	      SrcPort		      1
	      DstBlock		      "B(E)"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Orbit and Magnetic field models"
	  Ports			  [3, 6]
	  Position		  [65, 303, 265, 417]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  MaskDescription	  "When you want to use \"Other\" make sure to"
" define the TLE in the SGP4 subsystem. "
	  MaskPromptString	  "Data to use for Pos. and mag. field|Choose "
"which TLE to use for SGP4|Calculate reflectivity matrix"
	  MaskStyleString	  "popup(Oersted meas data|SGP4/IGRF models),p"
"opup(Oersted TLE|Other TLE),edit"
	  MaskTunableValueString  "on,on,on"
	  MaskCallbackString	  "||"
	  MaskEnableString	  "on,on,on"
	  MaskVisibilityString	  "on,on,on"
	  MaskToolTipString	  "on,on,on"
	  MaskVarAliasString	  ",,"
	  MaskVariables		  "data_type=@1;tle_type=@2;reflectivity_enabl"
"ed=@3;"
	  MaskInitialization	  "% if oersted data -> data_type=1\n% if SGP4"
"/IGRF model -> data_type=2\n\ndisp('Using Oersted data for Pos./mag field. Lo"
"ading measurement data...');\nload('oersted_data.mat')\n\nif data_type==1\n  "
"  disp('Done loading Oersted data...');\n    enable_oersted=1;\n    enable_sg"
"p4 = 0;\n    enable_IGRF = 0;\n    enable_custom_time = 0;\nelse\n    disp('U"
"sing SGP4/IGRF model for Pos./mag field.');\n    enable_oersted = 0;\n    ena"
"ble_sgp4 = 1;\n    enable_IGRF = 1;\n    enable_custom_time = 1;\nend\n\nif t"
"le_type==1 %Choose which TLE to use\n    enable_oersted_tle=1;\n    enable_ot"
"her_tle=0;\nelse\n    enable_oersted_tle=0;\n    enable_other_tle=1;\nend"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "SGP4/IGRF models|Oersted TLE|0"
	  MaskTabNameString	  ",,"
	  System {
	    Name		    "Orbit and Magnetic field models"
	    Location		    [225, 71, 1002, 676]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "A4"
	    PaperUnits		    "centimeters"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Earth rotation q(I->E)"
	      Position		      [115, 693, 145, 707]
	      BackgroundColor	      "green"
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Sun position R_s(I)"
	      Position		      [115, 653, 145, 667]
	      BackgroundColor	      "green"
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Initial time ti(JD)"
	      Position		      [115, 128, 145, 142]
	      BackgroundColor	      "green"
	      Port		      "3"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "(IGRF) Magnetic field"
	      Ports		      [2, 1, 1]
	      Position		      [655, 459, 820, 546]
	      SourceBlock	      "components_lib/Orbit and Ephemeris/(IGR"
"F) Magnetic field"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Albedo"
	      Ports		      [3, 1, 1]
	      Position		      [675, 649, 850, 711]
	      AncestorBlock	      "components_lib/Orbit and Ephemeris/Albe"
"do"
	      TreatAsAtomicUnit	      on
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Albedo"
		Location		[276, 158, 944, 362]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Sunlight vector(I)"
		  Position		  [120, 143, 150, 157]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Nadir vector (I)"
		  Position		  [120, 68, 150, 82]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "q(I>E)"
		  Position		  [20, 123, 50, 137]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  EnablePort
		  Name			  "Enable"
		  Ports			  []
		  Position		  [500, 30, 520, 50]
		}
		Block {
		  BlockType		  Reference
		  Name			  "Earth Albedo\nModel"
		  Ports			  [2, 1]
		  Position		  [380, 76, 470, 129]
		  SourceBlock		  "albedo_lib/Earth Albedo\nModel"
		  SourceType		  "Earth Albedo Model"
		  ShowPortLabels	  "on"
		  eprdata		  "load('lib/albedo_toolbox/epr_data/2"
"003/ga030101-031231')"
		  redfac		  "1"
		  Ts			  "10"
		  enable		  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Vector rotation by q1"
		  Ports			  [2, 1]
		  Position		  [215, 44, 280, 86]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/Vector rotation by q"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Vector rotation by q2"
		  Ports			  [2, 1]
		  Position		  [215, 119, 280, 161]
		  SourceBlock		  "components_lib/Math utilities/Vecto"
"r operations/Vector rotation by q"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Reflectivity matrix"
		  Position		  [575, 98, 605, 112]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Sunlight vector(I)"
		  SrcPort		  1
		  DstBlock		  "Vector rotation by q2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "q(I>E)"
		  SrcPort		  1
		  Points		  [0, 0; 20, 0]
		  Branch {
		    DstBlock		    "Vector rotation by q2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -75]
		    DstBlock		    "Vector rotation by q1"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Nadir vector (I)"
		  SrcPort		  1
		  DstBlock		  "Vector rotation by q1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Earth Albedo\nModel"
		  SrcPort		  1
		  DstBlock		  "Reflectivity matrix"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Vector rotation by q2"
		  SrcPort		  1
		  Points		  [40, 0; 0, -25]
		  DstBlock		  "Earth Albedo\nModel"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Vector rotation by q1"
		  SrcPort		  1
		  Points		  [40, 0; 0, 25]
		  DstBlock		  "Earth Albedo\nModel"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Custom time"
	      Ports		      [1, 1, 1]
	      Position		      [190, 93, 350, 177]
	      TreatAsAtomicUnit	      on
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Custom time"
		Location		[421, 301, 919, 601]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Initial time ti(JD)"
		  Position		  [85, 103, 115, 117]
		  BackgroundColor	  "green"
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  EnablePort
		  Name			  "Enable"
		  Ports			  []
		  Position		  [235, 20, 255, 40]
		}
		Block {
		  BlockType		  Clock
		  Name			  "Clock"
		  Position		  [75, 160, 95, 180]
		  Decimation		  "10"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Sec2Day"
		  Position		  [135, 152, 165, 188]
		  Gain			  "1/86400"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [210, 100, 230, 120]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|++"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Simulation time t(JD)"
		  Position		  [280, 103, 310, 117]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Initial time ti(JD)"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sec2Day"
		  SrcPort		  1
		  Points		  [50, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Clock"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sec2Day"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Simulation time t(JD)"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Eclipse model"
	      Ports		      [2, 1]
	      Position		      [660, 50, 845, 185]
	      SourceBlock	      "components_lib/Orbit and Ephemeris/Ecli"
"pse model"
	      SourceType	      "Unknown"
	      ShowPortLabels	      "on"
	      r_e		      "6371010"
	      theta_e		      "65"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [1005, 410, 1035, 440]
	      Gain		      "1/10000"
	      ParameterDataTypeMode   "Inherit via internal rule"
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Oersted Magnetic field"
	      Ports		      [0, 1, 1]
	      Position		      [655, 326, 820, 404]
	      TreatAsAtomicUnit	      on
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Oersted Magnetic field"
		Location		[694, 784, 1192, 1084]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  EnablePort
		  Name			  "Enable"
		  Ports			  []
		  Position		  [235, 20, 255, 40]
		}
		Block {
		  BlockType		  FromWorkspace
		  Name			  "Oersted magnetic field (E)"
		  Position		  [90, 98, 155, 122]
		  VariableName		  "[oersted_data.time.sample_number oe"
"rsted_data.mag.ECEFRF(:,1) oersted_data.mag.ECEFRF(:,2) oersted_data.mag.ECEF"
"RF(:,3)]"
		  SampleTime		  "1"
		}
		Block {
		  BlockType		  Gain
		  Name			  "nT->Gauss"
		  Position		  [245, 94, 270, 126]
		  Gain			  "1e-5"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Magnetic field vector B(E)"
		  Position		  [355, 103, 385, 117]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Oersted magnetic field (E)"
		  SrcPort		  1
		  DstBlock		  "nT->Gauss"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "nT->Gauss"
		  SrcPort		  1
		  DstBlock		  "Magnetic field vector B(E)"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Oersted position"
	      Ports		      [0, 2, 1]
	      Position		      [185, 376, 350, 454]
	      TreatAsAtomicUnit	      on
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Oersted position"
		Location		[534, 525, 869, 681]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  EnablePort
		  Name			  "Enable"
		  Ports			  []
		  Position		  [40, 20, 60, 40]
		}
		Block {
		  BlockType		  FromWorkspace
		  Name			  "Oersted Velocity (I)"
		  Position		  [80, 83, 145, 107]
		  VariableName		  "[oersted_data.time.sample_number oe"
"rsted_data.vel.ECIRF(:,1) oersted_data.vel.ECIRF(:,2) oersted_data.vel.ECIRF("
":,3) ]"
		  SampleTime		  "1"
		}
		Block {
		  BlockType		  FromWorkspace
		  Name			  "Oersted position (I)"
		  Position		  [80, 23, 145, 47]
		  VariableName		  "[oersted_data.time.sample_number oe"
"rsted_data.pos.ECIRF(:,1) oersted_data.pos.ECIRF(:,2) oersted_data.pos.ECIRF("
":,3) ]"
		  SampleTime		  "1"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Position R(I)"
		  Position		  [215, 28, 245, 42]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Velocity V(I)"
		  Position		  [215, 88, 245, 102]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Oersted Velocity (I)"
		  SrcPort		  1
		  DstBlock		  "Velocity V(I)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Oersted position (I)"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Position R(I)"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Oersted time"
	      Ports		      [0, 1, 1]
	      Position		      [185, 236, 350, 314]
	      TreatAsAtomicUnit	      on
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Oersted time"
		Location		[421, 301, 861, 496]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  EnablePort
		  Name			  "Enable"
		  Ports			  []
		  Position		  [360, 15, 380, 35]
		}
		Block {
		  BlockType		  Constant
		  Name			  "Day of Oersted-Data  (JD)"
		  Position		  [25, 91, 145, 119]
		  FontSize		  12
		  Value			  "2452315.5"
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "JD and sec. to Julian Date"
		  Ports			  [2, 1]
		  Position		  [175, 31, 300, 129]
		  FontSize		  12
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  System {
		    Name		    "JD and sec. to Julian Date"
		    Location		    [202, 423, 700, 723]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "A4"
		    PaperUnits		    "centimeters"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Second of Day"
		    Position		    [45, 63, 75, 77]
		    BackgroundColor	    "darkGreen"
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Day as Julian Date"
		    Position		    [45, 113, 75, 127]
		    BackgroundColor	    "darkGreen"
		    Port		    "2"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    "S-Function"
		    Name		    "Calc. TimeString"
		    Ports		    [1, 1]
		    Position		    [130, 58, 200, 82]
		    FunctionName	    "Qcontinuum"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Sec2Day"
		    Position		    [250, 52, 280, 88]
		    Gain		    "1/86400"
		    }
		    Block {
		    BlockType		    Sum
		    Name		    "Sum"
		    Ports		    [2, 1]
		    Position		    [305, 110, 325, 130]
		    ShowName		    off
		    IconShape		    "round"
		    Inputs		    "++|"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Julian Date (Day)"
		    Position		    [395, 113, 425, 127]
		    BackgroundColor	    "yellow"
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Calc. TimeString"
		    SrcPort		    1
		    DstBlock		    "Sec2Day"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sec2Day"
		    SrcPort		    1
		    Points		    [30, 0]
		    DstBlock		    "Sum"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Day as Julian Date"
		    SrcPort		    1
		    DstBlock		    "Sum"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Second of Day"
		    SrcPort		    1
		    DstBlock		    "Calc. TimeString"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Sum"
		    SrcPort		    1
		    DstBlock		    "Julian Date (Day)"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  FromWorkspace
		  Name			  "Seconds of Day (Orsted data)"
		  Position		  [25, 39, 145, 71]
		  FontSize		  12
		  VariableName		  "[oersted_data.time.sample_number oe"
"rsted_data.time.second oersted_data.time.day]"
		  SampleTime		  "1"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Simulation time t(JD)"
		  Position		  [355, 73, 385, 87]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "JD and sec. to Julian Date"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Simulation time t(JD)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Day of Oersted-Data  (JD)"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "JD and sec. to Julian Date"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Seconds of Day (Orsted data)"
		  SrcPort		  1
		  DstBlock		  "JD and sec. to Julian Date"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Quaternion inverter"
	      Ports		      [1, 1]
	      Position		      [660, 565, 790, 595]
	      SourceBlock	      "components_lib/Math utilities/Quaternio"
"n operations/Quaternion inverter"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "SGP4 position"
	      Ports		      [1, 2, 1]
	      Position		      [185, 513, 350, 597]
	      TreatAsAtomicUnit	      on
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"SGP4 position"
		Location		[199, 514, 1096, 933]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"A4"
		PaperUnits		"centimeters"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "JD"
		  Position		  [320, 13, 350, 27]
		  BackgroundColor	  "darkGreen"
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  EnablePort
		  Name			  "Enable"
		  Ports			  []
		  Position		  [605, 20, 625, 40]
		}
		Block {
		  BlockType		  "S-Function"
		  Name			  " S-Function"
		  Ports			  [1, 1]
		  Position		  [630, 185, 680, 215]
		  FunctionName		  "sgp4S"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant"
		  Position		  [15, 65, 120, 85]
		  Value			  "enable_oersted_tle"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Constant1"
		  Position		  [15, 215, 120, 235]
		  Value			  "enable_other_tle"
		}
		Block {
		  BlockType		  Demux
		  Name			  "Demux1"
		  Ports			  [1, 2]
		  Position		  [705, 153, 710, 242]
		  BackgroundColor	  "black"
		  ShowName		  off
		  Outputs		  "[3 3]"
		}
		Block {
		  BlockType		  From
		  Name			  "From1"
		  Position		  [375, 184, 470, 206]
		  BackgroundColor	  "gray"
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  FontSize		  12
		  GotoTag		  "Oersted_TLE"
		}
		Block {
		  BlockType		  From
		  Name			  "From10"
		  Position		  [345, 53, 440, 77]
		  BackgroundColor	  "gray"
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  FontSize		  12
		  GotoTag		  "Oersted_InitJD"
		}
		Block {
		  BlockType		  From
		  Name			  "From2"
		  Position		  [345, 78, 440, 102]
		  BackgroundColor	  "gray"
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  FontSize		  12
		  GotoTag		  "Other_InitJD"
		}
		Block {
		  BlockType		  From
		  Name			  "From3"
		  Position		  [375, 209, 470, 231]
		  BackgroundColor	  "gray"
		  ShowName		  off
		  CloseFcn		  "tagdialog Close"
		  FontSize		  12
		  GotoTag		  "Other_TLE"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Gain\n1440"
		  Position		  [508, 120, 542, 170]
		  Orientation		  "down"
		  NamePlacement		  "alternate"
		  Gain			  "1440"
		}
		Block {
		  BlockType		  Mux
		  Name			  "Mux"
		  Ports			  [2, 1]
		  Position		  [600, 181, 605, 219]
		  ShowName		  off
		  Inputs		  "2"
		  DisplayOption		  "bar"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [515, 70, 535, 90]
		  Orientation		  "down"
		  NamePlacement		  "alternate"
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "-+|"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [2, 1]
		  Position		  [495, 183, 510, 232]
		  ShowName		  off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum2"
		  Ports			  [2, 1]
		  Position		  [465, 53, 480, 102]
		  ShowName		  off
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "TLE and time\ninitialization1"
		  Ports			  [1]
		  Position		  [145, 14, 240, 136]
		  ShowName		  off
		  FontSize		  12
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  MaskDescription	  "Input TLE from the standard Two-Lin"
"e Orbital Element Set Format\nSatellite Name, Line 1 and 2."
		  MaskPromptString	  "Satellite Name:|Epoch [YYDDD]:|Epoc"
"h [JD]:|MM dot:|MM dot dot:|Drag:|Inclination [deg]:|Right Ascension of Ascen"
"ding Node [deg]:|Eccentricity [-]:|Argument of Perigee [deg]:|Mean Anomaly [d"
"eg]:|Mean Motion [rev/day]:|Sampling Time [sec]:"
		  MaskStyleString	  "edit,edit,edit,edit,edit,edit,edit,"
"edit,edit,edit,edit,edit,edit"
		  MaskTunableValueString  "on,on,on,on,on,on,on,on,on,on,on,on"
",on"
		  MaskCallbackString	  "||||||||||||"
		  MaskEnableString	  "on,on,on,on,on,on,on,on,on,on,on,on"
",on"
		  MaskVisibilityString	  "on,on,on,on,on,on,on,on,on,on,on,on"
",on"
		  MaskToolTipString	  "on,on,on,on,on,on,on,on,on,on,on,on"
",on"
		  MaskVarAliasString	  ",,,,,,,,,,,,"
		  MaskVariables		  "satname=@1;YYDDD=@2;JulianDay=@3;xn"
"dt2o=@4;xndd6o=@5;bstar=@6;xincl=@7;xnodeo=@8;eo=@9;omegao=@10;xmo=@11;xno=@1"
"2;ts=@13;"
		  MaskDisplay		  "text(0.35,0.6,'Orbit');\ntext(0.33,"
"0.5,'Model');\ntext(0.3,0.4,'Config');"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "normalized"
		  MaskValueString	  "'Orsted'|02039|2452275.5+40.6925505"
"7|0.00002748*0|0|0.00071190|96.4788|112.1945|0.0148615|71.6037|290.1241|14.43"
"891950|1"
		  MaskTabNameString	  ",,,,,,,,,,,,"
		  System {
		    Name		    "TLE and time\ninitialization1"
		    Location		    [668, 448, 1158, 655]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "A4"
		    PaperUnits		    "centimeters"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Enable?"
		    Position		    [20, 28, 50, 42]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Create TLE and JD"
		    Ports		    [0, 2, 1]
		    Position		    [75, 62, 210, 138]
		    FontSize		    12
		    TreatAsAtomicUnit	    on
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    System {
		    Name		    "Create TLE and JD"
		    Location		    [254, 918, 838, 1127]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "A4"
		    PaperUnits		    "centimeters"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [515, 40, 535, 60]
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    Position		    [365, 85, 460, 115]
		    Value		    "JulianDay"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant "
		    Position		    [45, 135, 460, 165]
		    Value		    "[JulianDay,xndt2o,xndd6o,0,bstar,"
"0,xincl,xnodeo,eo,omegao,xmo,xno]"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Init JD"
		    Position		    [510, 93, 540, 107]
		    BackgroundColor	    "yellow"
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "TLE "
		    Position		    [510, 143, 540, 157]
		    BackgroundColor	    "yellow"
		    Port		    "2"
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    DstBlock		    "Init JD"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant "
		    SrcPort		    1
		    DstBlock		    "TLE "
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto"
		    Position		    [360, 65, 455, 95]
		    BackgroundColor	    "gray"
		    ShowName		    off
		    GotoTag		    "Oersted_InitJD"
		    TagVisibility	    "global"
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto1"
		    Position		    [360, 105, 455, 135]
		    BackgroundColor	    "gray"
		    GotoTag		    "Oersted_TLE"
		    TagVisibility	    "global"
		    }
		    Line {
		    SrcBlock		    "Enable?"
		    SrcPort		    1
		    Points		    [85, 0]
		    DstBlock		    "Create TLE and JD"
		    DstPort		    enable
		    }
		    Line {
		    SrcBlock		    "Create TLE and JD"
		    SrcPort		    2
		    Points		    [30, 0; 0, 15; 100, 0]
		    DstBlock		    "Goto1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Create TLE and JD"
		    SrcPort		    1
		    Points		    [25, 0; 0, -35; 105, 0]
		    DstBlock		    "Goto"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "TLE and time\ninitialization2"
		  Ports			  [1]
		  Position		  [145, 164, 240, 286]
		  ShowName		  off
		  FontSize		  12
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  MaskDescription	  "Input TLE from the standard Two-Lin"
"e Orbital Element Set Format\nSatellite Name, Line 1 and 2."
		  MaskPromptString	  "Satellite Name:|Epoch [YYDDD]:|Epoc"
"h [JD]:|MM dot:|MM dot dot:|Drag:|Inclination [deg]:|Right Ascension of Ascen"
"ding Node [deg]:|Eccentricity [-]:|Argument of Perigee [deg]:|Mean Anomaly [d"
"eg]:|Mean Motion [rev/day]:|Sampling Time [sec]:"
		  MaskStyleString	  "edit,edit,edit,edit,edit,edit,edit,"
"edit,edit,edit,edit,edit,edit"
		  MaskTunableValueString  "on,on,on,on,on,on,on,on,on,on,on,on"
",on"
		  MaskCallbackString	  "||||||||||||"
		  MaskEnableString	  "on,on,on,on,on,on,on,on,on,on,on,on"
",on"
		  MaskVisibilityString	  "on,on,on,on,on,on,on,on,on,on,on,on"
",on"
		  MaskToolTipString	  "on,on,on,on,on,on,on,on,on,on,on,on"
",on"
		  MaskVarAliasString	  ",,,,,,,,,,,,"
		  MaskVariables		  "satname=@1;YYDDD=@2;JulianDay=@3;xn"
"dt2o=@4;xndd6o=@5;bstar=@6;xincl=@7;xnodeo=@8;eo=@9;omegao=@10;xmo=@11;xno=@1"
"2;ts=@13;"
		  MaskDisplay		  "text(0.35,0.6,'Orbit');\ntext(0.33,"
"0.5,'Model');\ntext(0.3,0.4,'Config');"
		  MaskIconFrame		  on
		  MaskIconOpaque	  on
		  MaskIconRotate	  "none"
		  MaskIconUnits		  "normalized"
		  MaskValueString	  "'Orsted'|02039|2452275.5+40.6925505"
"7|0.00002748*0|0|0.00071190|96.4788|112.1945|0.0148615|71.6037|290.1241|14.43"
"891950|1"
		  MaskTabNameString	  ",,,,,,,,,,,,"
		  System {
		    Name		    "TLE and time\ninitialization2"
		    Location		    [487, 225, 977, 432]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "A4"
		    PaperUnits		    "centimeters"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Enable?"
		    Position		    [20, 28, 50, 42]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Create TLE and JD"
		    Ports		    [0, 2, 1]
		    Position		    [75, 62, 210, 138]
		    FontSize		    12
		    TreatAsAtomicUnit	    on
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    System {
		    Name		    "Create TLE and JD"
		    Location		    [254, 918, 838, 1127]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "A4"
		    PaperUnits		    "centimeters"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    EnablePort
		    Name		    "Enable"
		    Ports		    []
		    Position		    [515, 40, 535, 60]
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    Position		    [365, 85, 460, 115]
		    Value		    "JulianDay"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant "
		    Position		    [45, 135, 460, 165]
		    Value		    "[JulianDay,xndt2o,xndd6o,0,bstar,"
"0,xincl,xnodeo,eo,omegao,xmo,xno]"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Init JD"
		    Position		    [510, 93, 540, 107]
		    BackgroundColor	    "yellow"
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "TLE "
		    Position		    [510, 143, 540, 157]
		    BackgroundColor	    "yellow"
		    Port		    "2"
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Constant "
		    SrcPort		    1
		    DstBlock		    "TLE "
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    DstBlock		    "Init JD"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto"
		    Position		    [360, 65, 455, 95]
		    BackgroundColor	    "gray"
		    ShowName		    off
		    GotoTag		    "Other_InitJD"
		    TagVisibility	    "global"
		    }
		    Block {
		    BlockType		    Goto
		    Name		    "Goto1"
		    Position		    [360, 105, 455, 135]
		    BackgroundColor	    "gray"
		    GotoTag		    "Other_TLE"
		    TagVisibility	    "global"
		    }
		    Line {
		    SrcBlock		    "Create TLE and JD"
		    SrcPort		    1
		    DstBlock		    "Goto"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Create TLE and JD"
		    SrcPort		    2
		    DstBlock		    "Goto1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Enable?"
		    SrcPort		    1
		    Points		    [85, 0]
		    DstBlock		    "Create TLE and JD"
		    DstPort		    enable
		    }
		  }
		}
		Block {
		  BlockType		  Gain
		  Name			  "km -> m"
		  Position		  [745, 158, 815, 192]
		  Gain			  "1000"
		}
		Block {
		  BlockType		  Gain
		  Name			  "km/s -> m/s"
		  Position		  [745, 204, 820, 236]
		  Gain			  "1000"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Position (I)"
		  Position		  [845, 167, 875, 183]
		  BackgroundColor	  "yellow"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		  InitialOutput		  "0"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Velocity (I)"
		  Position		  [845, 212, 875, 228]
		  BackgroundColor	  "yellow"
		  Port			  "2"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		  InitialOutput		  "0"
		}
		Line {
		  SrcBlock		  "From2"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From10"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Mux"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From3"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "From1"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant1"
		  SrcPort		  1
		  DstBlock		  "TLE and time\ninitialization2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Constant"
		  SrcPort		  1
		  DstBlock		  "TLE and time\ninitialization1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Gain\n1440"
		  SrcPort		  1
		  Points		  [0, 15]
		  DstBlock		  "Mux"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Gain\n1440"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum2"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "km -> m"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Demux1"
		  SrcPort		  2
		  Points		  [0, 0]
		  DstBlock		  "km/s -> m/s"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  " S-Function"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Demux1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Mux"
		  SrcPort		  1
		  DstBlock		  " S-Function"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "km/s -> m/s"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Velocity (I)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "km -> m"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Position (I)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "JD"
		  SrcPort		  1
		  Points		  [170, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Annotation {
		  Name			  "Other TLE"
		  Position		  [191, 297]
		}
		Annotation {
		  Name			  "Oersted TLE"
		  Position		  [191, 147]
		}
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum1"
	      Ports		      [2, 1]
	      Position		      [395, 324, 415, 606]
	      ShowName		      off
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum2"
	      Ports		      [2, 1]
	      Position		      [440, 364, 460, 646]
	      ShowName		      off
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum3"
	      Ports		      [2, 1]
	      Position		      [845, 294, 865, 576]
	      ShowName		      off
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum4"
	      Ports		      [2, 1]
	      Position		      [440, 64, 460, 346]
	      ShowName		      off
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Vector rotation by q"
	      Ports		      [2, 1]
	      Position		      [915, 406, 975, 444]
	      NamePlacement	      "alternate"
	      SourceBlock	      "components_lib/Math utilities/Quaternio"
"n operations/Vector rotation by q"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "enable?"
	      Position		      [155, 486, 240, 504]
	      NamePlacement	      "alternate"
	      Value		      "enable_sgp4"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "enable?1"
	      Position		      [625, 431, 710, 449]
	      NamePlacement	      "alternate"
	      Value		      "enable_IGRF"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "enable?2"
	      Position		      [640, 301, 725, 319]
	      NamePlacement	      "alternate"
	      Value		      "enable_oersted"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "enable?3"
	      Position		      [165, 351, 250, 369]
	      NamePlacement	      "alternate"
	      Value		      "enable_oersted"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "enable?4"
	      Position		      [170, 211, 255, 229]
	      NamePlacement	      "alternate"
	      Value		      "enable_oersted"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "enable?5"
	      Position		      [630, 621, 735, 639]
	      NamePlacement	      "alternate"
	      Value		      "reflectivity_enabled"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "enable?6"
	      Position		      [150, 65, 260, 85]
	      NamePlacement	      "alternate"
	      Value		      "enable_custom_time"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Mag [Tesla] B(I)"
	      Position		      [1060, 418, 1090, 432]
	      BackgroundColor	      "red"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Spacecraft velocity V (I)"
	      Position		      [535, 498, 565, 512]
	      BackgroundColor	      "red"
	      Port		      "2"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Spacecraft position R (I)"
	      Position		      [535, 458, 565, 472]
	      BackgroundColor	      "red"
	      NamePlacement	      "alternate"
	      Port		      "3"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Simulation time t(JD)"
	      Position		      [520, 198, 550, 212]
	      BackgroundColor	      "red"
	      Port		      "4"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Reflectivity matrix"
	      Position		      [920, 673, 950, 687]
	      BackgroundColor	      "red"
	      Port		      "5"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Eclipse: 1=true, 0=false"
	      Position		      [935, 113, 965, 127]
	      BackgroundColor	      "red"
	      Port		      "6"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	      PortDimensions	      "1"
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "Mag [Tesla] B(I)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum3"
	      SrcPort		      1
	      DstBlock		      "Vector rotation by q"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "(IGRF) Magnetic field"
	      SrcPort		      1
	      DstBlock		      "Sum3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Oersted Magnetic field"
	      SrcPort		      1
	      DstBlock		      "Sum3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum2"
	      SrcPort		      1
	      DstBlock		      "Spacecraft velocity V (I)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum1"
	      SrcPort		      1
	      Points		      [0, 0; 65, 0]
	      Branch {
		Points			[15, 0]
		Branch {
		  DstBlock		  "Spacecraft position R (I)"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 15; 115, 0]
		  Branch {
		    Points		    [0, -330]
		    DstBlock		    "Eclipse model"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "(IGRF) Magnetic field"
		    DstPort		    1
		  }
		}
	      }
	      Branch {
		Points			[0, 215]
		DstBlock		"Albedo"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "SGP4 position"
	      SrcPort		      2
	      DstBlock		      "Sum2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Oersted position"
	      SrcPort		      2
	      DstBlock		      "Sum2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "SGP4 position"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Oersted position"
	      SrcPort		      1
	      DstBlock		      "Sum1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "enable?4"
	      SrcPort		      1
	      DstBlock		      "Oersted time"
	      DstPort		      enable
	    }
	    Line {
	      SrcBlock		      "enable?"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "SGP4 position"
	      DstPort		      enable
	    }
	    Line {
	      SrcBlock		      "Earth rotation q(I->E)"
	      SrcPort		      1
	      Points		      [0, 0; 465, 0]
	      Branch {
		Points			[0, -120]
		Branch {
		  DstBlock		  "Quaternion inverter"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, -55]
		  DstBlock		  "(IGRF) Magnetic field"
		  DstPort		  2
		}
	      }
	      Branch {
		DstBlock		"Albedo"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "Sun position R_s(I)"
	      SrcPort		      1
	      Points		      [110, 0]
	      Branch {
		Points			"[0, -30; -205, 0; 0, -615; 435, 0; 0,"
" 70]"
		DstBlock		"Eclipse model"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Albedo"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Albedo"
	      SrcPort		      1
	      DstBlock		      "Reflectivity matrix"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "enable?3"
	      SrcPort		      1
	      DstBlock		      "Oersted position"
	      DstPort		      enable
	    }
	    Line {
	      SrcBlock		      "Initial time ti(JD)"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Custom time"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Oersted time"
	      SrcPort		      1
	      DstBlock		      "Sum4"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Custom time"
	      SrcPort		      1
	      Points		      [0, 0; 40, 0]
	      Branch {
		DstBlock		"Sum4"
		DstPort			1
	      }
	      Branch {
		Points			[0, -100; -310, 0; 0, 520]
		DstBlock		"SGP4 position"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Sum4"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Simulation time t(JD)"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "enable?6"
	      SrcPort		      1
	      Points		      [5, 0]
	      DstBlock		      "Custom time"
	      DstPort		      enable
	    }
	    Line {
	      SrcBlock		      "Quaternion inverter"
	      SrcPort		      1
	      Points		      [105, 0]
	      DstBlock		      "Vector rotation by q"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Vector rotation by q"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "enable?1"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "(IGRF) Magnetic field"
	      DstPort		      enable
	    }
	    Line {
	      SrcBlock		      "enable?2"
	      SrcPort		      1
	      DstBlock		      "Oersted Magnetic field"
	      DstPort		      enable
	    }
	    Line {
	      SrcBlock		      "enable?5"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Albedo"
	      DstPort		      enable
	    }
	    Line {
	      SrcBlock		      "Eclipse model"
	      SrcPort		      1
	      DstBlock		      "Eclipse: 1=true, 0=false"
	      DstPort		      1
	    }
	  }
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "Other model utilities"
      Ports		      []
      Position		      [582, 324, 722, 394]
      TreatAsAtomicUnit	      off
      MinAlgLoopOccurrences   off
      RTWSystemCode	      "Auto"
      System {
	Name			"Other model utilities"
	Location		[517, 463, 920, 654]
	Open			off
	ModelBrowserVisibility	on
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"A4"
	PaperUnits		"centimeters"
	ZoomFactor		"100"
	Block {
	  BlockType		  SubSystem
	  Name			  "AAUSAT-II Animation"
	  Ports			  [5]
	  Position		  [15, 16, 90, 94]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  MaskType		  "AAUSAT-II Animation"
	  MaskDescription	  "Create a 3-D animated view of the AAUSAT-II"
", where X, Y, and Z craft position (Position) and craft quaternion (Attitude)"
" are inputs.  \n\nDisplay parameters are in the same units of length as the i"
"nput parameters. \n\nCreated by Karl Laursen"
	  MaskHelp		  "web(asbhelp('6dofanimation'));"
	  MaskPromptString	  "Axes limits [xmin xmax ymin ymax zmin zmax]"
":|Time interval between updates:|Size of spacecraft displayed:|Use spacecraft"
" image map|Spacecraft drawing slices|Planet radius:|Planet drawing slices|Use"
" planet map|Planet map image file|Pre-rotate image map (deg)|Enter view:|Posi"
"tion of camera [xc yc zc]:|View angle:|Show SC coordinate system|Show orbit c"
"oordinate system|Show Earth Centered Earth Fixed coordinate system|Show inert"
"ial coordinate system|Show trajectory|Enable animation|Make movie (use with c"
"are!)"
	  MaskStyleString	  "edit,edit,edit,checkbox,edit,edit,edit,chec"
"kbox,edit,edit,popup(Fixed position|Fly alongside),edit,edit,checkbox,checkbo"
"x,checkbox,checkbox,checkbox,checkbox,checkbox"
	  MaskTunableValueString  "on,on,on,on,on,on,on,on,on,on,on,on,on,on,o"
"n,on,on,on,on,on"
	  MaskCallbackString	  "|||||||||||||||||||"
	  MaskEnableString	  "on,on,on,on,on,on,on,on,on,on,on,on,on,on,o"
"n,on,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on,on,on,on,on,on,on,on,on,on,o"
"n,on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on,on,on,on,on,on,on,on,on,on,o"
"n,on,on,on,on,on"
	  MaskVarAliasString	  ",,,,,,,,,,,,,,,,,,,"
	  MaskVariables		  "u1=@1;u2=@2;u3=@3;u20=@4;u18=@5;u4=@6;u11=@"
"7;u12=@8;u13=@9;u17=@10;u5=@11;u6=@12;u7=@13;u9=@14;u10=@15;u16=@16;u14=@17;u"
"15=@18;u8=@19;u19=@20;"
	  MaskInitialization	  "Config.axes = u1;\nConfig.update = u2;\nCon"
"fig.craft = u3;\nConfig.radius = u4;\nConfig.camera_view = u5;\nConfig.camera"
"_pos = u6;\nConfig.view = u7;\nConfig.Animenable = u8;\nConfig.ShowSCFrame = "
"u9;\nConfig.ShowOrbitFrame = u10;\nConfig.ShowECEF = u16;\nConfig.ShowInertia"
"l = u14;\nConfig.PlanetSlices = u11;\nConfig.UseMap = u12;\nConfig.PlanetMapF"
"ile = u13;\nConfig.Trajectory = u15;\nConfig.PreRotation = u17;\nConfig.Craft"
"Slices = u18;\nConfig.MakeMovie = u19;\nConfig.UseSCMap = u20;"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "port"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "[-20000000 20000000 -20000000 20000000 -200"
"00000 20000000]|50|1000000|on|15|6378000|80|on|'earth280.jpg'|180|Fixed posit"
"ion|[70000000 70000000 70000000]|8|off|on|off|on|on|on|off"
	  MaskTabNameString	  ",,,,,,,,,,,,,,,,,,,"
	  System {
	    Name		    "AAUSAT-II Animation"
	    Location		    [44, 426, 606, 733]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "SC position"
	      Position		      [25, 48, 55, 62]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "SC quaternion"
	      Position		      [25, 88, 55, 102]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "SC veloc"
	      Position		      [25, 128, 55, 142]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "sun vector(I)"
	      Position		      [25, 168, 55, 182]
	      Port		      "4"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Earth rotation"
	      Position		      [25, 208, 55, 222]
	      Port		      "5"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux3"
	      Ports		      [5, 1]
	      Position		      [270, 38, 275, 232]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Inputs		      "5"
	    }
	    Block {
	      BlockType		      "S-Function"
	      Name		      "S-Function"
	      Ports		      [1]
	      Position		      [380, 75, 445, 195]
	      FunctionName	      "aausatanim"
	      Parameters	      "Config"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	    }
	    Line {
	      SrcBlock		      "Mux3"
	      SrcPort		      1
	      DstBlock		      "S-Function"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "SC position"
	      SrcPort		      1
	      DstBlock		      "Mux3"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "SC quaternion"
	      SrcPort		      1
	      DstBlock		      "Mux3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "sun vector(I)"
	      SrcPort		      1
	      DstBlock		      "Mux3"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "Earth rotation"
	      SrcPort		      1
	      DstBlock		      "Mux3"
	      DstPort		      5
	    }
	    Line {
	      SrcBlock		      "SC veloc"
	      SrcPort		      1
	      DstBlock		      "Mux3"
	      DstPort		      3
	    }
	  }
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "Sensor Emulation"
      Ports		      []
      Position		      [418, 134, 562, 204]
      ShowPortLabels	      off
      TreatAsAtomicUnit	      off
      MinAlgLoopOccurrences   off
      RTWSystemCode	      "Auto"
      System {
	Name			"Sensor Emulation"
	Location		[21, 80, 735, 742]
	Open			off
	ModelBrowserVisibility	on
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  SubSystem
	  Name			  "Emulation of gyros"
	  Ports			  [2, 1]
	  Position		  [400, 139, 610, 221]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  MaskType		  "Parameters for the gyro sensor block"
	  MaskDescription	  "Fill out the parameters for use in the simu"
"lation.\nformat of the parameter field: (gyro1 gyro2 gyro3 gyro4 gyro5 gyro6)"
"\ngyro 1 and gyro 4 are situated on the same axis, but in opposite directions"
" etc."
	  MaskPromptString	  "Gyro model: Scale factor (mV/rad/s)|Gyro mo"
"del: Offset (mV)|Gyro model: Bias (rad/s)|Gyro model: Misalignment (degree)|G"
"yro model: Scale error (%)|Gyro model: Standard deviation|Gyro model: Noise r"
"andomizer seed|Gyro model: Scale factor drift (%/K)|Gyro model: Offset drift "
"(rad/s/K)|Amplification HW: Op-amp gain () |Amplification HW: Op-amp offset ("
"mV)"
	  MaskStyleString	  "edit,edit,edit,edit,edit,edit,edit,edit,edi"
"t,edit,edit"
	  MaskTunableValueString  "on,on,on,on,on,on,on,on,on,on,on"
	  MaskCallbackString	  "||||||||||"
	  MaskEnableString	  "on,on,on,on,on,on,on,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on,on,on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on,on,on,on,on,on,on"
	  MaskVarAliasString	  ",,,,,,,,,,"
	  MaskVariables		  "scale_model=@1;offset_model=@2;e_bias=@3;e_"
"align=@4;e_scale=@5;e_noise=@6;e_noise_seed=@7;e_drift_scale_model=@8;e_drift"
"_offset_model=@9;op_amp_gain=@10;op_amp_offset=@11;"
	  MaskInitialization	  "e_align_coor_factor=gyroalign(e_align);"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "[859.4 859.4 859.4 859.4 859.4 859.4]|[2500"
" 2500 2500 2500 2500 2500]|[0.0012 0.0012 0.0012 0.0012 0.0012 0.0012]|[1 1 1"
" 1 1 1]|[0.1 0.1 0.1 0.1 0.1 0.1]|[0.0035 0.0035 0.0035 0.0035 0.0035 0.0035]"
"*1e-6|[23341 43534 43433 22299 32478 21932]|[0.075 0.075 0.075 0.075 0.075 0."
"075]|[0.012 0.012 0.012 0.012 0.012 0.012]|[10 10 10 10 10 10]|[2500 2500 250"
"0 2500 2500 2500]"
	  MaskTabNameString	  ",,,,,,,,,,"
	  System {
	    Name		    "Emulation of gyros"
	    Location		    [311, 422, 1100, 765]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "portrait"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "W(S) [rad/s]"
	      Position		      [30, 78, 60, 92]
	      NamePlacement	      "alternate"
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Temperature [K]"
	      Position		      [25, 138, 55, 152]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Amplification and ADC"
	      Ports		      [1, 1]
	      Position		      [420, 71, 505, 139]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      MaskIconFrame	      on
	      MaskIconOpaque	      on
	      MaskIconRotate	      "none"
	      MaskIconUnits	      "autoscale"
	      System {
		Name			"Amplification and ADC"
		Location		[796, 263, 1277, 474]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "V_cont"
		  Position		  [15, 38, 45, 52]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Op amp gain []"
		  Position		  [110, 16, 245, 74]
		  Gain			  "op_amp_gain"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Quantizer
		  Name			  "Quantizer"
		  Position		  [320, 30, 350, 60]
		  QuantizationInterval	  "1/(2^12)"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [75, 35, 95, 55]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [2, 1]
		  Position		  [275, 35, 295, 55]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|++"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Constant
		  Name			  "op_amp offset [mV]"
		  Position		  [55, 112, 170, 138]
		  Value			  "op_amp_offset"
		}
		Block {
		  BlockType		  Outport
		  Name			  "V_discrete"
		  Position		  [385, 38, 415, 52]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Op amp gain []"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Op amp gain []"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "op_amp offset [mV]"
		  SrcPort		  1
		  Points		  [0, -25; -5, 0]
		  Branch {
		    Points		    [-85, 0]
		    DstBlock		    "Sum"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [115, 0]
		    DstBlock		    "Sum1"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "V_cont"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Quantizer"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Quantizer"
		  SrcPort		  1
		  DstBlock		  "V_discrete"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux"
	      Ports		      [1, 3]
	      Position		      [165, 63, 170, 107]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "3"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Demux
	      Name		      "Demux1"
	      Ports		      [1, 3]
	      Position		      [165, 15, 170, 65]
	      BackgroundColor	      "black"
	      ShowName		      off
	      Outputs		      "3"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [120, 70, 150, 100]
	      Gain		      "-1"
	      ParameterDataTypeMode   "Inherit via internal rule"
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Gyro sensor block"
	      Ports		      [2, 1]
	      Position		      [245, 25, 365, 185]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Gyro sensor block"
		Location		[39, 237, 1274, 1089]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "W(S) [rad/s]"
		  Position		  [35, 168, 65, 182]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Temperature [K]"
		  Position		  [140, 518, 170, 532]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Bias [degree/s]"
		  Position		  [385, 232, 425, 268]
		  Value			  "e_bias"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Drift(offset) [rad/s/K]"
		  Position		  [245, 533, 350, 557]
		  Value			  "e_drift_offset_model"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Drift(scale factor) [%/K]"
		  Position		  [45, 428, 155, 452]
		  Value			  "e_drift_scale_model"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Missalignment correction factor\nCa"
"culated in mask \"initialization commands\"\nbased on the data supplied in th"
"e \nmissalignment parameter field"
		  Position		  [45, 25, 175, 55]
		  Value			  "e_align_coor_factor"
		}
		Block {
		  BlockType		  RandomNumber
		  Name			  "Noise"
		  Position		  [395, 330, 425, 360]
		  Variance		  "e_noise"
		  Seed			  "e_noise_seed"
		  SampleTime		  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Offset \n[mV]"
		  Position		  [741, 350, 869, 380]
		  Orientation		  "up"
		  Value			  "offset_model"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product1"
		  Ports			  [2, 1]
		  Position		  [410, 22, 425, 98]
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product2"
		  Ports			  [3, 1]
		  Position		  [375, 422, 420, 458]
		  Inputs		  "3"
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product3"
		  Ports			  [2, 1]
		  Position		  [410, 117, 425, 193]
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product4"
		  Ports			  [2, 1]
		  Position		  [375, 514, 420, 556]
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Scale error\n[%]"
		  Position		  [245, 120, 290, 150]
		  Value			  "e_scale"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [795, 290, 815, 310]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|++"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [6, 1]
		  Position		  [455, 13, 470, 582]
		  ShowName		  off
		  Inputs		  "++++++"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum2"
		  Ports			  [2, 1]
		  Position		  [200, 515, 220, 535]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Used for proper \nadding of disturb"
"ances"
		  Position		  [90, 154, 195, 196]
		  Gain			  "[1 1 1 -1 -1 -1]"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Used for proper \nadding of disturb"
"ances1"
		  Position		  [500, 279, 605, 321]
		  Gain			  "[1 1 1 -1 -1 -1]"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "convert percent\nto scale factor"
		  Position		  [325, 119, 365, 151]
		  Gain			  "0.01"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "convert percent\nto scale factor1"
		  Position		  [175, 424, 215, 456]
		  Gain			  "0.01"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "scale factor"
		  Position		  [630, 275, 765, 325]
		  Gain			  "scale_model"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Constant
		  Name			  "temp must be deviation\nfrom 25 deg"
"ree C"
		  Position		  [186, 560, 234, 580]
		  Orientation		  "up"
		  NamePlacement		  "alternate"
		  Value			  "298.15"
		}
		Block {
		  BlockType		  Outport
		  Name			  "W_sens(S) [mV]"
		  Position		  [840, 293, 870, 307]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Noise"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum1"
		  DstPort		  4
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Used for proper \nadding of disturb"
"ances1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "W(S) [rad/s]"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Used for proper \nadding of disturb"
"ances"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product1"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product4"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum1"
		  DstPort		  6
		}
		Line {
		  SrcBlock		  "Temperature [K]"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "temp must be deviation\nfrom 25 deg"
"ree C"
		  SrcPort		  1
		  DstBlock		  "Sum2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Drift(scale factor) [%/K]"
		  SrcPort		  1
		  DstBlock		  "convert percent\nto scale factor1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Drift(offset) [rad/s/K]"
		  SrcPort		  1
		  DstBlock		  "Product4"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "convert percent\nto scale factor1"
		  SrcPort		  1
		  DstBlock		  "Product2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Product2"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum1"
		  DstPort		  5
		}
		Line {
		  SrcBlock		  "Bias [degree/s]"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "convert percent\nto scale factor"
		  SrcPort		  1
		  DstBlock		  "Product3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Product3"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Scale error\n[%]"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "convert percent\nto scale factor"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Used for proper \nadding of disturb"
"ances"
		  SrcPort		  1
		  Points		  [0, 0; 20, 0]
		  Branch {
		    Points		    [0, 255]
		    DstBlock		    "Product2"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, 0]
		    Branch {
		    Points		    [0, -95]
		    DstBlock		    "Product1"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Product3"
		    DstPort		    2
		    }
		  }
		}
		Line {
		  SrcBlock		  "Missalignment correction factor\nCa"
"culated in mask \"initialization commands\"\nbased on the data supplied in th"
"e \nmissalignment parameter field"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Product1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum2"
		  SrcPort		  1
		  Points		  [0, 0; 125, 0]
		  Branch {
		    DstBlock		    "Product4"
		    DstPort		    1
		  }
		  Branch {
		    Points		    [0, -75]
		    DstBlock		    "Product2"
		    DstPort		    3
		  }
		}
		Line {
		  SrcBlock		  "Offset \n[mV]"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "W_sens(S) [mV]"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "scale factor"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Used for proper \nadding of disturb"
"ances1"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "scale factor"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Mux
	      Name		      "Mux"
	      Ports		      [6, 1]
	      Position		      [205, 21, 210, 104]
	      ShowName		      off
	      Inputs		      "6"
	      DisplayOption	      "bar"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "V_ADC\n[mV]"
	      Position		      [540, 98, 570, 112]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "Amplification and ADC"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "V_ADC\n[mV]"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      3
	      DstBlock		      "Mux"
	      DstPort		      6
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      2
	      DstBlock		      "Mux"
	      DstPort		      5
	    }
	    Line {
	      SrcBlock		      "Demux"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "Demux1"
	      SrcPort		      3
	      DstBlock		      "Mux"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Demux1"
	      SrcPort		      2
	      DstBlock		      "Mux"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Demux1"
	      SrcPort		      1
	      DstBlock		      "Mux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "Demux"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "W(S) [rad/s]"
	      SrcPort		      1
	      Points		      [40, 0]
	      Branch {
		DstBlock		"Gain"
		DstPort			1
	      }
	      Branch {
		Points			[0, -45]
		DstBlock		"Demux1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Mux"
	      SrcPort		      1
	      DstBlock		      "Gyro sensor block"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Temperature [K]"
	      SrcPort		      1
	      DstBlock		      "Gyro sensor block"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Gyro sensor block"
	      SrcPort		      1
	      DstBlock		      "Amplification and ADC"
	      DstPort		      1
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Emulation of magnetometer"
	  Ports			  [3, 1]
	  Position		  [400, 242, 610, 358]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  MaskPromptString	  "Magnetometer model: Supply voltage (V)|Magn"
"etometer model: Sensitivity (mV/V/gauss)|Magnetometer model: Sensitivity drif"
"t due to temperature (ppm/K)|Magnetometer model: Scale error (%)|Magnetometer"
" model: Missalignment (degree) - Only one value!|Magnetometer model: Orthogon"
"ality error (degree) - Only one value!|Magnetometer model: Noise,standard dev"
"iation|Magnetometer model: Noise randomizer seed ()|Amplification HW: Op-amp "
"gain () |Amplification HW: Op-amp offset (mV)"
	  MaskStyleString	  "edit,edit,edit,edit,edit,edit,edit,edit,edi"
"t,edit"
	  MaskTunableValueString  "on,on,on,on,on,off,on,on,on,on"
	  MaskCallbackString	  "|||||||||"
	  MaskEnableString	  "on,on,on,on,on,on,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on,on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on,on,on,on,on,on"
	  MaskVarAliasString	  ",,,,,,,,,"
	  MaskVariables		  "v_supply_model=@1;sens_model=@2;e_drift_sen"
"s_model=@3;e_scale=@4;e_align=@5;e_orth=@6;e_noise=@7;e_noise_seed=@8;op_amp_"
"gain=@9;op_amp_offset=@10;"
	  MaskInitialization	  "e_align_coor_factor=magalign(e_align+e_orth"
");"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "5|[1 1 1]|[-3000 -3000 -3000]|[0.05 0.05 0."
"05]|1*0|1*0|[32 32 32]*1e-6*0|[23341 43534 43433]|[500 500 500]|[2500 2500 25"
"00]"
	  MaskTabNameString	  ",,,,,,,,,"
	  System {
	    Name		    "Emulation of magnetometer"
	    Location		    [370, 49, 1070, 719]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "B(I)"
	      Position		      [20, 58, 50, 72]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "q(I->S)"
	      Position		      [20, 108, 50, 122]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Temperature \n[K]"
	      Position		      [20, 158, 50, 172]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Amplification and ADC"
	      Ports		      [1, 1]
	      Position		      [220, 81, 305, 149]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Amplification and ADC"
		Location		[276, 74, 1076, 744]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "V_cont"
		  Position		  [20, 38, 50, 52]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Op amp gain []"
		  Position		  [70, 16, 205, 74]
		  Gain			  "op_amp_gain"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Quantizer
		  Name			  "Quantizer"
		  Position		  [280, 30, 310, 60]
		  QuantizationInterval	  "1/(2^12)"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [2, 1]
		  Position		  [235, 35, 255, 55]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|++"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Constant
		  Name			  "op_amp offset [mV]"
		  Position		  [125, 112, 240, 138]
		  Value			  "op_amp_offset"
		}
		Block {
		  BlockType		  Outport
		  Name			  "V_discrete"
		  Position		  [340, 38, 370, 52]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Quantizer"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "V_discrete"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Op amp gain []"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "op_amp offset [mV]"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "V_cont"
		  SrcPort		  1
		  DstBlock		  "Op amp gain []"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Quantizer"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "magnetometer sensor block"
	      Ports		      [3, 1]
	      Position		      [75, 37, 195, 193]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"magnetometer sensor block"
		Location		[276, 74, 1076, 728]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "B(I)"
		  Position		  [20, 218, 50, 232]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "q(I->S)"
		  Position		  [20, 203, 50, 217]
		  NamePlacement		  "alternate"
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Temperature \n[K]"
		  Position		  [15, 353, 45, 367]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Drift(sensitivity) [ppm/K]"
		  Position		  [175, 313, 285, 337]
		  NamePlacement		  "alternate"
		  Value			  "e_drift_sens_model"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Misalignment correction factor\nCac"
"ulated in mask \"initialization commands\"\nbased on the data supplied in the"
" \nmisalignment parameter field"
		  Position		  [135, 160, 265, 190]
		  NamePlacement		  "alternate"
		  Value			  "e_align_coor_factor"
		}
		Block {
		  BlockType		  RandomNumber
		  Name			  "Noise"
		  Position		  [380, 435, 410, 465]
		  NamePlacement		  "alternate"
		  Variance		  "e_noise"
		  Seed			  "e_noise_seed"
		  SampleTime		  "0"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Offset \n[mV]"
		  Position		  [799, 310, 851, 340]
		  Orientation		  "up"
		  Value			  "0"
		}
		Block {
		  BlockType		  Product
		  Name			  "Scale error"
		  Ports			  [2, 1]
		  Position		  [465, 37, 480, 113]
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Scale error\n[%]"
		  Position		  [245, 40, 290, 70]
		  Value			  "e_scale"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Sensitivity"
		  Position		  [565, 241, 645, 289]
		  Gain			  "sens_model"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [815, 255, 835, 275]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|++"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [4, 1]
		  Position		  [530, 14, 550, 511]
		  ShowName		  off
		  Inputs		  "++++"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum2"
		  Ports			  [2, 1]
		  Position		  [140, 350, 160, 370]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "V*Gauss->Gauss"
		  Position		  [665, 243, 785, 287]
		  Gain			  "v_supply_model"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Vector rotation by q1"
		  Ports			  [2, 1]
		  Position		  [110, 200, 150, 235]
		  AncestorBlock		  "components_lib/Math utilities/Vecto"
"r operations/Vector rotation by q"
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  Port {
		    PortNumber		    1
		    Name		    "B(S)"
		    PropagatedSignals	    ", , "
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		  }
		  System {
		    Name		    "Vector rotation by q1"
		    Location		    [276, 74, 1076, 744]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "q"
		    Position		    [110, 63, 140, 77]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "V"
		    Position		    [110, 178, 140, 192]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "Constant"
		    Position		    [110, 215, 140, 245]
		    Value		    "0"
		    }
		    Block {
		    BlockType		    Demux
		    Name		    "Demux"
		    Ports		    [1, 3]
		    Position		    [165, 166, 170, 204]
		    BackgroundColor	    "black"
		    ShowName		    off
		    Outputs		    "3"
		    }
		    Block {
		    BlockType		    Demux
		    Name		    "Demux1"
		    Ports		    [1, 4]
		    Position		    [575, 91, 580, 129]
		    BackgroundColor	    "black"
		    ShowName		    off
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [4, 1]
		    Position		    [210, 171, 215, 209]
		    ShowName		    off
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux1"
		    Ports		    [3, 1]
		    Position		    [620, 86, 625, 124]
		    ShowName		    off
		    Inputs		    "3"
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    SubSystem
		    Name		    "Quaternion inverter"
		    Ports		    [1, 1]
		    Position		    [205, 49, 305, 91]
		    TreatAsAtomicUnit	    off
		    MinAlgLoopOccurrences   off
		    RTWSystemCode	    "Auto"
		    System {
		    Name		    "Quaternion inverter"
		    Location		    [386, 212, 884, 512]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "q"
		    Position		    [90, 48, 120, 62]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Demux
		    Name		    "Demux"
		    Ports		    [1, 4]
		    Position		    [145, 36, 150, 74]
		    BackgroundColor	    "black"
		    ShowName		    off
		    }
		    Block {
		    BlockType		    Demux
		    Name		    "Demux1"
		    Ports		    [1, 3]
		    Position		    [245, 31, 250, 69]
		    BackgroundColor	    "black"
		    ShowName		    off
		    Outputs		    "3"
		    }
		    Block {
		    BlockType		    Gain
		    Name		    "Gain"
		    Position		    [195, 35, 225, 65]
		    NamePlacement	    "alternate"
		    Gain		    "-1"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux"
		    Ports		    [4, 1]
		    Position		    [275, 36, 280, 74]
		    ShowName		    off
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux1"
		    Ports		    [3, 1]
		    Position		    [175, 31, 180, 69]
		    ShowName		    off
		    Inputs		    "3"
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "q^-1"
		    Position		    [305, 48, 335, 62]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Gain"
		    SrcPort		    1
		    DstBlock		    "Demux1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    3
		    DstBlock		    "Mux"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    2
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    1
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux1"
		    SrcPort		    1
		    DstBlock		    "Gain"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    3
		    DstBlock		    "Mux1"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    2
		    DstBlock		    "Mux1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    1
		    DstBlock		    "Mux1"
		    DstPort		    1
		    }
		    Line {
		    Labels		    [1, 0]
		    SrcBlock		    "Demux"
		    SrcPort		    4
		    DstBlock		    "Mux"
		    DstPort		    4
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    DstBlock		    "q^-1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "q"
		    SrcPort		    1
		    DstBlock		    "Demux"
		    DstPort		    1
		    }
		    }
		    }
		    Block {
		    BlockType		    "S-Function"
		    Name		    "Quaternion mulitiplication"
		    Ports		    [2, 1]
		    Position		    [345, 69, 410, 111]
		    FunctionName	    "qmul"
		    }
		    Block {
		    BlockType		    "S-Function"
		    Name		    "Quaternion mulitiplication1"
		    Ports		    [2, 1]
		    Position		    [470, 89, 535, 131]
		    FunctionName	    "qmul"
		    }
		    Block {
		    BlockType		    Terminator
		    Name		    "Terminator"
		    Position		    [615, 140, 635, 160]
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "q'Vq"
		    Position		    [755, 98, 785, 112]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "Mux1"
		    SrcPort		    1
		    DstBlock		    "q'Vq"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    4
		    Points		    [5, 0; 0, 25]
		    DstBlock		    "Terminator"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    3
		    DstBlock		    "Mux1"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    2
		    DstBlock		    "Mux1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Demux1"
		    SrcPort		    1
		    DstBlock		    "Mux1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Quaternion mulitiplication1"
		    SrcPort		    1
		    DstBlock		    "Demux1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Quaternion mulitiplication"
		    SrcPort		    1
		    Points		    [40, 0]
		    DstBlock		    "Quaternion mulitiplication1"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux"
		    SrcPort		    1
		    Points		    [35, 0; 0, -80; 75, 0]
		    DstBlock		    "Quaternion mulitiplication"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Constant"
		    SrcPort		    1
		    Points		    [50, 0]
		    DstBlock		    "Mux"
		    DstPort		    4
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    3
		    DstBlock		    "Mux"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    2
		    DstBlock		    "Mux"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Demux"
		    SrcPort		    1
		    DstBlock		    "Mux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "V"
		    SrcPort		    1
		    DstBlock		    "Demux"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Quaternion inverter"
		    SrcPort		    1
		    Points		    [20, 0]
		    DstBlock		    "Quaternion mulitiplication"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "q"
		    SrcPort		    1
		    Points		    [5, 0]
		    Branch {
		    Points		    [0, 85; 290, 0; 0, -35]
		    DstBlock		    "Quaternion mulitiplication1"
		    DstPort		    2
		    }
		    Branch {
		    DstBlock		    "Quaternion inverter"
		    DstPort		    1
		    }
		    }
		  }
		}
		Block {
		  BlockType		  Product
		  Name			  "alignment corection \n(both orthogo"
"nality and \nmisalignment)"
		  Ports			  [2, 1]
		  Position		  [350, 154, 400, 241]
		  NamePlacement		  "alternate"
		  Multiplication	  "Matrix(*)"
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Gain
		  Name			  "convert percent\nto scale factor"
		  Position		  [325, 39, 365, 71]
		  Gain			  "0.01"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Gain
		  Name			  "convert ppm\nto scale factor"
		  Position		  [315, 304, 370, 346]
		  NamePlacement		  "alternate"
		  Gain			  "10e-6"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Product
		  Name			  "sensitivity \ntemperature \ndrift ["
"Gauss]"
		  Ports			  [3, 1]
		  Position		  [455, 275, 500, 375]
		  NamePlacement		  "alternate"
		  Inputs		  "3"
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  Constant
		  Name			  "temp must be deviation\nfrom 25 deg"
"ree C"
		  Position		  [126, 400, 174, 420]
		  Orientation		  "up"
		  NamePlacement		  "alternate"
		  Value			  "298.15"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Voltage \n[mV]"
		  Position		  [870, 258, 900, 272]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Sensitivity"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Temperature \n[K]"
		  SrcPort		  1
		  DstBlock		  "Sum2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "temp must be deviation\nfrom 25 deg"
"ree C"
		  SrcPort		  1
		  DstBlock		  "Sum2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "q(I->S)"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Vector rotation by q1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Misalignment correction factor\nCac"
"ulated in mask \"initialization commands\"\nbased on the data supplied in the"
" \nmisalignment parameter field"
		  SrcPort		  1
		  DstBlock		  "alignment corection \n(both orthogo"
"nality and \nmisalignment)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "alignment corection \n(both orthogo"
"nality and \nmisalignment)"
		  SrcPort		  1
		  Points		  [30, 0]
		  Branch {
		    Points		    [0, 90]
		    DstBlock		    "sensitivity \ntemperature \ndrift"
" [Gauss]"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Sum1"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -105]
		    DstBlock		    "Scale error"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Drift(sensitivity) [ppm/K]"
		  SrcPort		  1
		  DstBlock		  "convert ppm\nto scale factor"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "convert ppm\nto scale factor"
		  SrcPort		  1
		  DstBlock		  "sensitivity \ntemperature \ndrift ["
"Gauss]"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum2"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "sensitivity \ntemperature \ndrift ["
"Gauss]"
		  DstPort		  3
		}
		Line {
		  Name			  "B(S)"
		  Labels		  [0, 0]
		  SrcBlock		  "Vector rotation by q1"
		  SrcPort		  1
		  DstBlock		  "alignment corection \n(both orthogo"
"nality and \nmisalignment)"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Voltage \n[mV]"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sensitivity"
		  SrcPort		  1
		  DstBlock		  "V*Gauss->Gauss"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Offset \n[mV]"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "V*Gauss->Gauss"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "B(I)"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Vector rotation by q1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "sensitivity \ntemperature \ndrift ["
"Gauss]"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "convert percent\nto scale factor"
		  SrcPort		  1
		  DstBlock		  "Scale error"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Scale error"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Scale error\n[%]"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "convert percent\nto scale factor"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Noise"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  4
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "V_ADC\n[mV]"
	      Position		      [340, 108, 370, 122]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "magnetometer sensor block"
	      SrcPort		      1
	      DstBlock		      "Amplification and ADC"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Amplification and ADC"
	      SrcPort		      1
	      DstBlock		      "V_ADC\n[mV]"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "B(I)"
	      SrcPort		      1
	      DstBlock		      "magnetometer sensor block"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "q(I->S)"
	      SrcPort		      1
	      DstBlock		      "magnetometer sensor block"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Temperature \n[K]"
	      SrcPort		      1
	      DstBlock		      "magnetometer sensor block"
	      DstPort		      3
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Emulation of temperature sensors"
	  Ports			  [0, 2]
	  Position		  [400, 40, 615, 115]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "Emulation of temperature sensors"
	    Location		    [476, 218, 946, 473]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Reference
	      Name		      "Band-Limited\nWhite Noise"
	      Ports		      [0, 1]
	      Position		      [165, 200, 195, 230]
	      NamePlacement	      "alternate"
	      SourceBlock	      "simulink/Sources/Band-Limited\nWhite No"
"ise"
	      SourceType	      "Band-Limited White Noise."
	      ShowPortLabels	      "on"
	      Cov		      "1e-9"
	      Ts		      "1"
	      seed		      "33232"
	      VectorParams1D	      "on"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [190, 71, 260, 89]
	      Value		      "sat_temp_start"
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [350, 155, 370, 175]
	      ShowName		      off
	      IconShape		      "round"
	      Inputs		      "|++"
	      InputSameDT	      off
	      OutDataTypeMode	      "Inherit via internal rule"
	      SaturateOnIntegerOverflow	off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Temperature_meas\n[mV]"
	      Position		      [415, 158, 445, 172]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Temperature\n[K]"
	      Position		      [410, 73, 440, 87]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      DstBlock		      "Temperature_meas\n[mV]"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      Points		      [0, 0; 70, 0]
	      Branch {
		Points			[0, 85]
		DstBlock		"Sum"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Temperature\n[K]"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Band-Limited\nWhite Noise"
	      SrcPort		      1
	      Points		      [160, 0]
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Sensor Emulation"
	  Ports			  [8, 4, 1]
	  Position		  [70, 37, 315, 318]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  System {
	    Name		    "Sensor Emulation"
	    Location		    [152, 55, 898, 725]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "portrait"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Attitude q(I->S)"
	      Position		      [40, 278, 70, 292]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Mag. field B(I)"
	      Position		      [40, 238, 70, 252]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Sun pos. R_s(I)"
	      Position		      [45, 388, 75, 402]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Earth rot. q(I->E)"
	      Position		      [45, 508, 75, 522]
	      Port		      "4"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Ang. vel. W(S)"
	      Position		      [40, 138, 70, 152]
	      NamePlacement	      "alternate"
	      Port		      "5"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "S/C pos. R_sa(I)"
	      Position		      [45, 418, 75, 432]
	      Port		      "6"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Reflectivity matrix"
	      Position		      [45, 448, 75, 462]
	      Port		      "7"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Eclipse sim"
	      Position		      [45, 568, 75, 582]
	      Port		      "8"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      EnablePort
	      Name		      "Enable"
	      Ports		      []
	      Position		      [65, 15, 85, 35]
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Emulation of gyros"
	      Ports		      [2, 1]
	      Position		      [205, 124, 415, 206]
	      SourceBlock	      "components_lib/Sensor Emulation/Emulati"
"on of gyros"
	      SourceType	      "Parameters for the gyro sensor block"
	      ShowPortLabels	      "on"
	      scale_model	      "[859.4 859.4 859.4 859.4 859.4 859.4]"
	      offset_model	      "[2500 2500 2500 2500 2500 2500]"
	      e_bias		      "[0.0012 0.0012 0.0012 0.0012 0.0012 0.0"
"012]"
	      e_align		      "[1 1 1 1 1 1]"
	      e_scale		      "[0.1 0.1 0.1 0.1 0.1 0.1]"
	      e_noise		      "[0.0035 0.0035 0.0035 0.0035 0.0035 0.0"
"035]*1e-6"
	      e_noise_seed	      "[23341 43534 43433 22299 32478 21932]"
	      e_drift_scale_model     "[0.075 0.075 0.075 0.075 0.075 0.075]"
	      e_drift_offset_model    "[0.012 0.012 0.012 0.012 0.012 0.012]"
	      op_amp_gain	      "[10 10 10 10 10 10]"
	      op_amp_offset	      "[2500 2500 2500 2500 2500 2500]"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Emulation of magnetometer"
	      Ports		      [3, 1]
	      Position		      [210, 227, 420, 343]
	      SourceBlock	      "components_lib/Sensor Emulation/Emulati"
"on of magnetometer"
	      SourceType	      "Unknown"
	      ShowPortLabels	      "on"
	      v_supply_model	      "5"
	      sens_model	      "[1 1 1]"
	      e_drift_sens_model      "[-3000 -3000 -3000]"
	      e_scale		      "[0.05 0.05 0.05]"
	      e_align		      "1*0"
	      e_orth		      "1*0"
	      e_noise		      "[32 32 32]*1e-6*0"
	      e_noise_seed	      "[23341 43534 43433]"
	      op_amp_gain	      "[500 500 500]"
	      op_amp_offset	      "[2500 2500 2500]"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Emulation of temperature sensors"
	      Ports		      [0, 2]
	      Position		      [205, 15, 420, 90]
	      SourceBlock	      "components_lib/Sensor Emulation/Emulati"
"on of temperature sensors"
	      SourceType	      "SubSystem"
	      ShowPortLabels	      "on"
	    }
	    Block {
	      BlockType		      Reference
	      Name		      "Sun sensors"
	      Ports		      [7, 1]
	      Position		      [210, 385, 420, 585]
	      SourceBlock	      "components_lib/Sensor Emulation/Sun sen"
"sors"
	      SourceType	      "Unknown"
	      ShowPortLabels	      "on"
	      sun_flux		      "1366.9"
	      alpha_align	      "[1 1 1 1 2 2]*0"
	      temp_drift	      "0.00233"
	      sigma_noise	      "0.0000014*0"
	      noise_seed	      "[0.0000008 0.0000011 0.0000004 0.000000"
"5 0.0000000 0.0000002]*0"
	      op_amp_gain	      "1"
	      op_amp_offset	      "0"
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Magnotometer (S) \nV_ADC [mV]"
	      Position		      [485, 278, 515, 292]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Gyros  (S)\nV_ADC [mV]"
	      Position		      [485, 158, 515, 172]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Sun sensors (S) \n[mA]"
	      Position		      [485, 478, 515, 492]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Temperature (S)\nV_ADC [mV]"
	      Position		      [485, 28, 515, 42]
	      Port		      "4"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "Mag. field B(I)"
	      SrcPort		      1
	      DstBlock		      "Emulation of magnetometer"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Attitude q(I->S)"
	      SrcPort		      1
	      Points		      [0, 0; 70, 0]
	      Branch {
		DstBlock		"Emulation of magnetometer"
		DstPort			2
	      }
	      Branch {
		Points			[0, 200]
		DstBlock		"Sun sensors"
		DstPort			4
	      }
	    }
	    Line {
	      SrcBlock		      "Earth rot. q(I->E)"
	      SrcPort		      1
	      DstBlock		      "Sun sensors"
	      DstPort		      5
	    }
	    Line {
	      SrcBlock		      "Emulation of magnetometer"
	      SrcPort		      1
	      DstBlock		      "Magnotometer (S) \nV_ADC [mV]"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Ang. vel. W(S)"
	      SrcPort		      1
	      DstBlock		      "Emulation of gyros"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Emulation of gyros"
	      SrcPort		      1
	      DstBlock		      "Gyros  (S)\nV_ADC [mV]"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "S/C pos. R_sa(I)"
	      SrcPort		      1
	      DstBlock		      "Sun sensors"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sun pos. R_s(I)"
	      SrcPort		      1
	      DstBlock		      "Sun sensors"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sun sensors"
	      SrcPort		      1
	      DstBlock		      "Sun sensors (S) \n[mA]"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Reflectivity matrix"
	      SrcPort		      1
	      DstBlock		      "Sun sensors"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Emulation of temperature sensors"
	      SrcPort		      1
	      DstBlock		      "Temperature (S)\nV_ADC [mV]"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Emulation of temperature sensors"
	      SrcPort		      2
	      Points		      [15, 0; 0, 40; -265, 0; 0, 75]
	      Branch {
		Points			[0, 140]
		Branch {
		  DstBlock		  "Emulation of magnetometer"
		  DstPort		  3
		}
		Branch {
		  Points		  [0, 220]
		  DstBlock		  "Sun sensors"
		  DstPort		  6
		}
	      }
	      Branch {
		DstBlock		"Emulation of gyros"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "Eclipse sim"
	      SrcPort		      1
	      DstBlock		      "Sun sensors"
	      DstPort		      7
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Sun sensors"
	  Ports			  [7, 1]
	  Position		  [400, 380, 610, 580]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  MaskPromptString	  "Sun sensor model: Solar Flux|Sun sensor mod"
"el: Alignment error vector (x+,y+,z+,x-,y-,z-)|Sun sensor model: Temperature "
"dependence|Sun sensor model: Noise standard deviation|Sun sensor model: Noise"
" seed|Sensor signal amplification: Gain|Sensor signal amplification: Offset"
	  MaskStyleString	  "edit,edit,edit,edit,edit,edit,edit"
	  MaskTunableValueString  "on,on,on,on,on,on,on"
	  MaskCallbackString	  "||||||"
	  MaskEnableString	  "on,on,on,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on,on,on"
	  MaskVarAliasString	  ",,,,,,"
	  MaskVariables		  "sun_flux=@1;alpha_align=@2;temp_drift=@3;si"
"gma_noise=@4;noise_seed=@5;op_amp_gain=@6;op_amp_offset=@7;"
	  MaskInitialization	  "angle2current_model = sun_emu_model();\ni_d"
"ark = polyval(angle2current_model, 90);\ni_max = polyval(angle2current_model,"
" 0);"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "1366.9|[1 1 1 1 2 2]*0|0.00233|0.0000014*0|"
"[0.0000008 0.0000011 0.0000004 0.0000005 0.0000000 0.0000002]*0|1|0"
	  MaskTabNameString	  ",,,,,,"
	  System {
	    Name		    "Sun sensors"
	    Location		    [330, 80, 1076, 734]
	    Open		    off
	    ModelBrowserVisibility  on
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "portrait"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "Sun pos. R_s(I)"
	      Position		      [45, 38, 75, 52]
	      Port		      "1"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "S/C pos. R_sa(I)"
	      Position		      [45, 78, 75, 92]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Reflectivity matrix"
	      Position		      [45, 198, 75, 212]
	      Port		      "3"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "q(I->S)"
	      Position		      [45, 118, 75, 132]
	      Port		      "4"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "q(I->E)"
	      Position		      [45, 158, 75, 172]
	      Port		      "5"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Temperature \n[K]"
	      Position		      [45, 248, 75, 262]
	      Port		      "6"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "Eclipse sim"
	      Position		      [45, 298, 75, 312]
	      Port		      "7"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Amplification and ADC"
	      Ports		      [1, 1]
	      Position		      [580, 129, 715, 231]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      System {
		Name			"Amplification and ADC"
		Location		[376, 74, 1076, 744]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Currents [mA]"
		  Position		  [20, 53, 50, 67]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Gain
		  Name			  "Op amp gain"
		  Position		  [105, 31, 240, 89]
		  Gain			  "op_amp_gain"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Quantizer
		  Name			  "Quantizer"
		  Position		  [325, 45, 355, 75]
		  QuantizationInterval	  "1/(2^12)"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum1"
		  Ports			  [2, 1]
		  Position		  [270, 50, 290, 70]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|++"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Constant
		  Name			  "op_amp offset [mV]"
		  Position		  [145, 127, 260, 153]
		  Value			  "op_amp_offset"
		}
		Block {
		  BlockType		  Outport
		  Name			  "I_ADC [mA]"
		  Position		  [415, 53, 445, 67]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Sum1"
		  SrcPort		  1
		  DstBlock		  "Quantizer"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Quantizer"
		  SrcPort		  1
		  DstBlock		  "I_ADC [mA]"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Op amp gain"
		  SrcPort		  1
		  DstBlock		  "Sum1"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "op_amp offset [mV]"
		  SrcPort		  1
		  Points		  [15, 0]
		  DstBlock		  "Sum1"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Currents [mA]"
		  SrcPort		  1
		  DstBlock		  "Op amp gain"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "Frame conversion"
	      Ports		      [4, 3]
	      Position		      [125, 27, 245, 183]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      Port {
		PortNumber		2
		Name			"nadir (E)"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
		ShowSigGenPortName	on
	      }
	      System {
		Name			"Frame conversion"
		Location		[115, 94, 861, 764]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Sun pos. R_s(I)"
		  Position		  [145, 48, 175, 62]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "S/C pos. R_sa(I)"
		  Position		  [130, 323, 160, 337]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "q(I->S)"
		  Position		  [30, 28, 60, 42]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "q(I->E)"
		  Position		  [35, 273, 65, 287]
		  Port			  "4"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Reference
		  Name			  "Quaternion inverter"
		  Ports			  [1, 1]
		  Position		  [150, 134, 250, 176]
		  SourceBlock		  "components_lib/Math utilities/Quate"
"rnion operations/Quaternion inverter"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Rotation of q1 by q2"
		  Ports			  [2, 1]
		  Position		  [310, 144, 410, 186]
		  SourceBlock		  "components_lib/Math utilities/Quate"
"rnion operations/Rotation of q1 by q2"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [200, 45, 220, 65]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Reference
		  Name			  "Vector rotation by q"
		  Ports			  [2, 1]
		  Position		  [245, 269, 345, 311]
		  SourceBlock		  "components_lib/Math utilities/Quate"
"rnion operations/Vector rotation by q"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Reference
		  Name			  "Vector rotation by q3"
		  Ports			  [2, 1]
		  Position		  [330, 24, 430, 66]
		  SourceBlock		  "components_lib/Math utilities/Quate"
"rnion operations/Vector rotation by q"
		  SourceType		  "SubSystem"
		  ShowPortLabels	  "on"
		}
		Block {
		  BlockType		  Gain
		  Name			  "Zenith to nadir "
		  Position		  [415, 275, 445, 305]
		  Gain			  "-1"
		  ParameterDataTypeMode	  "Inherit via internal rule"
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Sun pos. R_s(S)"
		  Position		  [525, 38, 555, 52]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "Nadir(E)"
		  Position		  [525, 283, 555, 297]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Block {
		  BlockType		  Outport
		  Name			  "q(S->E)"
		  Position		  [520, 158, 550, 172]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  DstBlock		  "Vector rotation by q3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sun pos. R_s(I)"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Rotation of q1 by q2"
		  SrcPort		  1
		  DstBlock		  "q(S->E)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Quaternion inverter"
		  SrcPort		  1
		  DstBlock		  "Rotation of q1 by q2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "q(I->S)"
		  SrcPort		  1
		  Points		  [45, 0]
		  Branch {
		    Points		    [0, 120]
		    DstBlock		    "Quaternion inverter"
		    DstPort		    1
		  }
		  Branch {
		    DstBlock		    "Vector rotation by q3"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "q(I->E)"
		  SrcPort		  1
		  Points		  [0, 0; 100, 0]
		  Branch {
		    Points		    [0, -60; 125, 0]
		    DstBlock		    "Rotation of q1 by q2"
		    DstPort		    2
		  }
		  Branch {
		    DstBlock		    "Vector rotation by q"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Zenith to nadir "
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Nadir(E)"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "S/C pos. R_sa(I)"
		  SrcPort		  1
		  Points		  [40, 0]
		  Branch {
		    Points		    [365, 0; 0, -205; -360, 0]
		    DstBlock		    "Sum"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, -30]
		    DstBlock		    "Vector rotation by q"
		    DstPort		    2
		  }
		}
		Line {
		  SrcBlock		  "Vector rotation by q"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Zenith to nadir "
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Vector rotation by q3"
		  SrcPort		  1
		  DstBlock		  "Sun pos. R_s(S)"
		  DstPort		  1
		}
		Annotation {
		  Name			  "Sun vector \nfrom sun to sat \nin E"
"CI"
		  Position		  [270, 81]
		}
	      }
	    }
	    Block {
	      BlockType		      Scope
	      Name		      "q rot"
	      Ports		      [3]
	      Position		      [345, 348, 375, 382]
	      Location		      [368, 49, 1019, 775]
	      Open		      off
	      NumInputPorts	      "3"
	      ZoomMode		      "yonly"
	      List {
		ListType		AxesTitles
		axes1			"%<SignalLabel>"
		axes2			"%<SignalLabel>"
		axes3			"%<SignalLabel>"
	      }
	      YMin		      "-3e+10~-5~-5"
	      YMax		      "1.5e+11~5~5"
	      SaveName		      "ScopeData5"
	      DataFormat	      "StructureWithTime"
	    }
	    Block {
	      BlockType		      SubSystem
	      Name		      "sun sensor model"
	      Ports		      [6, 1]
	      Position		      [350, 31, 525, 329]
	      TreatAsAtomicUnit	      off
	      MinAlgLoopOccurrences   off
	      RTWSystemCode	      "Auto"
	      Port {
		PortNumber		1
		Name			"currents"
		RTWStorageClass		"Auto"
		DataLoggingNameMode	"SignalName"
		ShowSigGenPortName	on
	      }
	      System {
		Name			"sun sensor model"
		Location		[330, 74, 1076, 744]
		Open			off
		ModelBrowserVisibility	on
		ModelBrowserWidth	200
		ScreenColor		"white"
		PaperOrientation	"landscape"
		PaperPositionMode	"auto"
		PaperType		"usletter"
		PaperUnits		"inches"
		ZoomFactor		"100"
		Block {
		  BlockType		  Inport
		  Name			  "Sun position R_s(S)"
		  Position		  [35, 413, 65, 427]
		  Port			  "1"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Nadir(E)"
		  Position		  [30, 118, 60, 132]
		  Port			  "2"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "q(S->E)"
		  Position		  [30, 153, 60, 167]
		  Port			  "3"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Reflectivity matrix"
		  Position		  [30, 83, 60, 97]
		  Port			  "4"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Temperature \n[K]"
		  Position		  [30, 523, 60, 537]
		  Port			  "5"
		  IconDisplay		  "Port number"
		  LatchInput		  off
		}
		Block {
		  BlockType		  Inport
		  Name			  "Eclipse sim"
		  Position		  [30, 303, 60, 317]
		  Port			  "6"
		  IconDisplay		  "Port number"
		  PortDimensions	  "1"
		  LatchInput		  off
		}
		Block {
		  BlockType		  SubSystem
		  Name			  "Albedo projection"
		  Ports			  [3, 1]
		  Position		  [115, 71, 265, 179]
		  TreatAsAtomicUnit	  off
		  MinAlgLoopOccurrences	  off
		  RTWSystemCode		  "Auto"
		  System {
		    Name		    "Albedo projection"
		    Location		    [376, 74, 1076, 728]
		    Open		    off
		    ModelBrowserVisibility  on
		    ModelBrowserWidth	    200
		    ScreenColor		    "white"
		    PaperOrientation	    "landscape"
		    PaperPositionMode	    "auto"
		    PaperType		    "usletter"
		    PaperUnits		    "inches"
		    ZoomFactor		    "100"
		    Block {
		    BlockType		    Inport
		    Name		    "Reflectivity matrix"
		    Position		    [370, 33, 400, 47]
		    Port		    "1"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "Nadir (E)"
		    Position		    [515, 63, 545, 77]
		    Port		    "2"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    Port {
		    PortNumber		    1
		    Name		    "nadir"
		    PropagatedSignals	    "nadir (E)"
		    RTWStorageClass	    "Auto"
		    DataLoggingNameMode	    "SignalName"
		    ShowSigGenPortName	    on
		    }
		    }
		    Block {
		    BlockType		    Inport
		    Name		    "q(S->E)"
		    Position		    [40, 108, 70, 122]
		    Port		    "3"
		    IconDisplay		    "Port number"
		    LatchInput		    off
		    }
		    Block {
		    BlockType		    Mux
		    Name		    "Mux7"
		    Ports		    [4, 1]
		    Position		    [600, 25, 605, 145]
		    ShowName		    off
		    DisplayOption	    "bar"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Reshape"
		    Ports		    [1, 1]
		    Position		    [465, 28, 495, 52]
		    SourceBlock		    "simulink/Math\nOperations/Reshape"
		    SourceType		    "Reshape"
		    OutputDimensionality    "1-D array"
		    OutputDimensions	    "[1,1]"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Vector rotation by q"
		    Ports		    [2, 1]
		    Position		    [230, 64, 330, 131]
		    SourceBlock		    "components_lib/Math utilities/Qua"
"ternion operations/Vector rotation by q"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    Reference
		    Name		    "Vector rotation by q1"
		    Ports		    [2, 1]
		    Position		    [230, 159, 330, 226]
		    SourceBlock		    "components_lib/Math utilities/Qua"
"ternion operations/Vector rotation by q"
		    SourceType		    "SubSystem"
		    ShowPortLabels	    "on"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "X+ vector (SC)"
		    Position		    [150, 96, 185, 134]
		    Value		    "[1 0 0]"
		    }
		    Block {
		    BlockType		    MATLABFcn
		    Name		    "ss_proj"
		    Position		    [645, 70, 705, 100]
		    MATLABFcn		    "ss_proj3(u(length(u)-8:length(u)-"
"6),u(length(u)-5:length(u)-3),u(length(u)-2:length(u)),reshape(u(1:length(u)-"
"9),round([180,288]/sqrt(51840/(length(u)-9)))))"
		    }
		    Block {
		    BlockType		    Constant
		    Name		    "y+ vector (SC)"
		    Position		    [155, 191, 190, 229]
		    Value		    "[0 1 0]"
		    }
		    Block {
		    BlockType		    Outport
		    Name		    "Albedo flux [W/m^2]"
		    Position		    [760, 78, 790, 92]
		    IconDisplay		    "Port number"
		    BusOutputAsStruct	    off
		    }
		    Line {
		    SrcBlock		    "ss_proj"
		    SrcPort		    1
		    DstBlock		    "Albedo flux [W/m^2]"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Mux7"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "ss_proj"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Reshape"
		    SrcPort		    1
		    DstBlock		    "Mux7"
		    DstPort		    1
		    }
		    Line {
		    SrcBlock		    "Vector rotation by q"
		    SrcPort		    1
		    DstBlock		    "Mux7"
		    DstPort		    3
		    }
		    Line {
		    SrcBlock		    "Vector rotation by q1"
		    SrcPort		    1
		    Points		    [175, 0; 0, -65]
		    DstBlock		    "Mux7"
		    DstPort		    4
		    }
		    Line {
		    SrcBlock		    "y+ vector (SC)"
		    SrcPort		    1
		    DstBlock		    "Vector rotation by q1"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "X+ vector (SC)"
		    SrcPort		    1
		    DstBlock		    "Vector rotation by q"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "q(S->E)"
		    SrcPort		    1
		    Points		    [0, 0; 25, 0]
		    Branch {
		    Points		    [0, 60]
		    DstBlock		    "Vector rotation by q1"
		    DstPort		    1
		    }
		    Branch {
		    Points		    [0, -35]
		    DstBlock		    "Vector rotation by q"
		    DstPort		    1
		    }
		    }
		    Line {
		    Name		    "nadir"
		    Labels		    [0, 0]
		    SrcBlock		    "Nadir (E)"
		    SrcPort		    1
		    Points		    [0, 0]
		    DstBlock		    "Mux7"
		    DstPort		    2
		    }
		    Line {
		    SrcBlock		    "Reflectivity matrix"
		    SrcPort		    1
		    DstBlock		    "Reshape"
		    DstPort		    1
		    }
		  }
		}
		Block {
		  BlockType		  Constant
		  Name			  "Dark currents"
		  Position		  [375, 250, 405, 280]
		  Value			  "[i_dark i_dark i_dark i_dark i_dark"
" i_dark]"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Darkcurrent"
		  Position		  [360, 182, 450, 208]
		  Value			  "i_max - i_dark"
		}
		Block {
		  BlockType		  Product
		  Name			  "Divide"
		  Ports			  [2, 1]
		  Position		  [325, 80, 340, 260]
		  Inputs		  "*/"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  OutScaling		  "2^-10"
		  RndMeth		  "Floor"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Drift [%/degreesC]"
		  Position		  [185, 483, 295, 507]
		  NamePlacement		  "alternate"
		  Value			  "temp_drift"
		}
		Block {
		  BlockType		  Switch
		  Name			  "If eclipse sim\nthen dark currents"
		  Position		  [455, 295, 485, 325]
		  Criteria		  "u2 ~= 0"
		  InputSameDT		  off
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Misalignment on alpha"
		  Position		  [60, 355, 190, 385]
		  NamePlacement		  "alternate"
		  Value			  "alpha_align"
		}
		Block {
		  BlockType		  RandomNumber
		  Name			  "Noise"
		  Position		  [530, 90, 560, 120]
		  Variance		  "sigma_noise^2"
		  Seed			  "noise_seed"
		  SampleTime		  "0"
		}
		Block {
		  BlockType		  Product
		  Name			  "Product"
		  Ports			  [2, 1]
		  Position		  [475, 157, 505, 208]
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum"
		  Ports			  [2, 1]
		  Position		  [245, 360, 265, 380]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|++"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum2"
		  Ports			  [2, 1]
		  Position		  [285, 520, 305, 540]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "|+-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum3"
		  Ports			  [2, 1]
		  Position		  [510, 300, 530, 320]
		  NamePlacement		  "alternate"
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "++|"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Sum
		  Name			  "Sum4"
		  Ports			  [3, 1]
		  Position		  [575, 300, 595, 320]
		  ShowName		  off
		  IconShape		  "round"
		  Inputs		  "++-"
		  InputSameDT		  off
		  OutDataTypeMode	  "Inherit via internal rule"
		  SaturateOnIntegerOverflow off
		}
		Block {
		  BlockType		  Constant
		  Name			  "Sun flux"
		  Position		  [135, 200, 265, 230]
		  Value			  "sun_flux"
		}
		Block {
		  BlockType		  Constant
		  Name			  "Temp is deviation\nfrom 25 degree C"
		  Position		  [271, 565, 319, 585]
		  Orientation		  "up"
		  NamePlacement		  "alternate"
		  Value			  "298.15"
		}
		Block {
		  BlockType		  Product
		  Name			  "Temperature \ndrift [mA]"
		  Ports			  [3, 1]
		  Position		  [480, 445, 525, 545]
		  NamePlacement		  "alternate"
		  Inputs		  "3"
		  InputSameDT		  off
		  RndMeth		  "Floor"
		}
		Block {
		  BlockType		  MATLABFcn
		  Name			  "angle2currents on sun"
		  Position		  [300, 355, 360, 385]
		  MATLABFcn		  "sun_emu_angles2currents(u,angle2cur"
"rent_model, i_dark)"
		}
		Block {
		  BlockType		  MATLABFcn
		  Name			  "vec2angles sun"
		  Position		  [160, 405, 220, 435]
		  MATLABFcn		  "sun_emu_vec2angles(u,'Sun')"
		}
		Block {
		  BlockType		  Outport
		  Name			  "Currents [mA]"
		  Position		  [630, 303, 660, 317]
		  IconDisplay		  "Port number"
		  BusOutputAsStruct	  off
		}
		Line {
		  SrcBlock		  "If eclipse sim\nthen dark currents"
		  SrcPort		  1
		  DstBlock		  "Sum3"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "angle2currents on sun"
		  SrcPort		  1
		  Points		  [35, 0; 0, -50]
		  DstBlock		  "If eclipse sim\nthen dark currents"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Eclipse sim"
		  SrcPort		  1
		  DstBlock		  "If eclipse sim\nthen dark currents"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Dark currents"
		  SrcPort		  1
		  Points		  [15, 0; 0, 35]
		  DstBlock		  "If eclipse sim\nthen dark currents"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum4"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "Currents [mA]"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Temperature \ndrift [mA]"
		  SrcPort		  1
		  Points		  [55, 0]
		  DstBlock		  "Sum4"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Sum3"
		  SrcPort		  1
		  Points		  [0, 0; 5, 0]
		  Branch {
		    DstBlock		    "Sum4"
		    DstPort		    2
		  }
		  Branch {
		    Points		    [0, 80; -105, 0; 0, 70]
		    DstBlock		    "Temperature \ndrift [mA]"
		    DstPort		    1
		  }
		}
		Line {
		  SrcBlock		  "Product"
		  SrcPort		  1
		  Points		  [10, 0]
		  DstBlock		  "Sum3"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Temperature \n[K]"
		  SrcPort		  1
		  DstBlock		  "Sum2"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Noise"
		  SrcPort		  1
		  Points		  [20, 0]
		  DstBlock		  "Sum4"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Albedo projection"
		  SrcPort		  1
		  DstBlock		  "Divide"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Nadir(E)"
		  SrcPort		  1
		  DstBlock		  "Albedo projection"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "q(S->E)"
		  SrcPort		  1
		  DstBlock		  "Albedo projection"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Reflectivity matrix"
		  SrcPort		  1
		  DstBlock		  "Albedo projection"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Darkcurrent"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Temp is deviation\nfrom 25 degree C"
		  SrcPort		  1
		  DstBlock		  "Sum2"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Misalignment on alpha"
		  SrcPort		  1
		  DstBlock		  "Sum"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "vec2angles sun"
		  SrcPort		  1
		  Points		  [30, 0]
		  DstBlock		  "Sum"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sum"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "angle2currents on sun"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sum2"
		  SrcPort		  1
		  DstBlock		  "Temperature \ndrift [mA]"
		  DstPort		  3
		}
		Line {
		  SrcBlock		  "Drift [%/degreesC]"
		  SrcPort		  1
		  DstBlock		  "Temperature \ndrift [mA]"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Sun position R_s(S)"
		  SrcPort		  1
		  Points		  [0, 0]
		  DstBlock		  "vec2angles sun"
		  DstPort		  1
		}
		Line {
		  SrcBlock		  "Sun flux"
		  SrcPort		  1
		  DstBlock		  "Divide"
		  DstPort		  2
		}
		Line {
		  SrcBlock		  "Divide"
		  SrcPort		  1
		  DstBlock		  "Product"
		  DstPort		  1
		}
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "Sun_currents [mA]"
	      Position		      [760, 173, 790, 187]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	    }
	    Line {
	      SrcBlock		      "Eclipse sim"
	      SrcPort		      1
	      DstBlock		      "sun sensor model"
	      DstPort		      6
	    }
	    Line {
	      SrcBlock		      "Frame conversion"
	      SrcPort		      3
	      DstBlock		      "sun sensor model"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "q(I->E)"
	      SrcPort		      1
	      DstBlock		      "Frame conversion"
	      DstPort		      4
	    }
	    Line {
	      Name		      "currents"
	      Labels		      [0, 0]
	      SrcBlock		      "sun sensor model"
	      SrcPort		      1
	      Points		      [10, 0]
	      Branch {
		Labels			[2, 0]
		Points			[0, 240; -235, 0; 0, -45]
		DstBlock		"q rot"
		DstPort			3
	      }
	      Branch {
		DstBlock		"Amplification and ADC"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Reflectivity matrix"
	      SrcPort		      1
	      DstBlock		      "sun sensor model"
	      DstPort		      4
	    }
	    Line {
	      SrcBlock		      "Temperature \n[K]"
	      SrcPort		      1
	      DstBlock		      "sun sensor model"
	      DstPort		      5
	    }
	    Line {
	      SrcBlock		      "Frame conversion"
	      SrcPort		      1
	      Points		      [40, 0; 15, 0]
	      Branch {
		Points			[0, 310]
		DstBlock		"q rot"
		DstPort			2
	      }
	      Branch {
		DstBlock		"sun sensor model"
		DstPort			1
	      }
	    }
	    Line {
	      Name		      "nadir (E)"
	      Labels		      [0, 0]
	      SrcBlock		      "Frame conversion"
	      SrcPort		      2
	      Points		      [30, 0; 35, 0]
	      Branch {
		Points			[0, 250]
		DstBlock		"q rot"
		DstPort			1
	      }
	      Branch {
		DstBlock		"sun sensor model"
		DstPort			2
	      }
	    }
	    Line {
	      SrcBlock		      "S/C pos. R_sa(I)"
	      SrcPort		      1
	      DstBlock		      "Frame conversion"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sun pos. R_s(I)"
	      SrcPort		      1
	      DstBlock		      "Frame conversion"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "q(I->S)"
	      SrcPort		      1
	      DstBlock		      "Frame conversion"
	      DstPort		      3
	    }
	    Line {
	      SrcBlock		      "Amplification and ADC"
	      SrcPort		      1
	      Points		      [0, 0]
	      DstBlock		      "Sun_currents [mA]"
	      DstPort		      1
	    }
	  }
	}
      }
    }
  }
}

# Finite State Machines
#
#    Stateflow Version 6.2 (R14SP2) dated Jan 27 2005, 19:24:42
#
#

Stateflow {

	machine {
		id                   		1
		name                 		"components_lib"
		created              		"01-May-2005 12:43:46"
		isLibrary            		1
		firstTarget          		31
		sfVersion            		62014000
	}

	chart {
		id                                        		2
		name                                      		"Disturbances/Magnetic residual disturbance/cross product"
		windowPosition                            		[315.45 258.75 200.25 189.75]
		viewLimits                                		[0 156.75 0 153.75]
		screen                                    		[1 1 1400 1050 1.040496254681648]
		treeNode                                  		[0 3 0 0]
		firstTransition                           		5
		firstJunction                             		4
		viewObj                                   		2
		machine                                   		1
		decomposition                             		CLUSTER_CHART
		type                                      		EML_CHART
		firstData                                 		6
		chartFileNumber                           		1
		disableImplicitCasting                    		1
		eml {
			name		"crossproduct"
		}
	}

	state {
		id                  		3
		labelString         		"eML_blk_kernel()"
		position            		[18 64.5 118 66]
		fontSize            		12
		chart               		2
		treeNode            		[2 0 0 0]
		superState          		SUBCHART
		subviewer           		2
		type                		FUNC_STATE
		decomposition       		CLUSTER_STATE
		eml {
			isEML       		1
			script      		"function y = crossproduct(u,v)\n"
						"% This block supports an embeddable subset of the MATLAB la"
						"nguage.\n"
						"% See the help menu for details. \n"
						"\n"
						"y = [u(2)*v(3)-u(3)*v(2);u(3)*v(1)-u(1)*v(3);u(1)*v(2)-u(2)"
						"*v(1)];"
			editorLayout		"100 M4x1[48 27 671 364]"
		}
	}

	junction {
		id         		4
		position   		[23.5747 49.5747 7]
		chart      		2
		linkNode   		[2 0 0]
		subviewer  		2
		type       		CONNECTIVE_JUNCTION
	}

	transition {
		id             		5
		labelString    		"{eML_blk_kernel();}"
		labelPosition  		[32.125 19.875 102.544 14.964]
		fontSize       		12
		src {
			intersection		[0 0 1 0 23.5747 14.625 0 0]
		}
		dst {
			id          		4
			intersection		[7 0 -1 -1 23.5747 42.5747 0 0]
		}
		midPoint       		[23.5747 24.9468]
		chart          		2
		linkNode       		[2 0 0]
		dataLimits     		[21.175 25.975 14.625 42.575]
		subviewer      		2
		drawStyle      		SMART
		executionOrder 		1
	}

	data {
		id                            		6
		name                          		"u"
		linkNode                      		[2 0 7]
		scope                         		INPUT_DATA
		machine                       		1
		dataType                      		"inherited"
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		complexity                    		SF_COMPLEX_INHERITED
		props {
			range {
				minimum		""
				maximum		""
			}
			array {
				size      		"-1"
				firstIndex		"1"
			}
		}
	}

	data {
		id                            		7
		name                          		"y"
		linkNode                      		[2 6 8]
		scope                         		OUTPUT_DATA
		machine                       		1
		dataType                      		"inherited"
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		complexity                    		SF_COMPLEX_INHERITED
		props {
			range {
				minimum		""
				maximum		""
			}
			array {
				size      		"-1"
				firstIndex		"1"
			}
		}
	}

	data {
		id                            		8
		name                          		"v"
		linkNode                      		[2 7 0]
		scope                         		INPUT_DATA
		machine                       		1
		dataType                      		"inherited"
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		complexity                    		SF_COMPLEX_INHERITED
		props {
			range {
				minimum		""
				maximum		""
			}
			array {
				size      		"-1"
				firstIndex		"1"
			}
		}
	}

	instance {
		id     		9
		name   		"Disturbances/Magnetic residual disturbance/cross product"
		machine		1
		chart  		2
	}

	chart {
		id                                        		10
		name                                      		"ACS/magnetorquer driver/Embedded\n"
					"MATLAB Function"
		windowPosition                            		[300.45 273.75 200.25 189.75]
		viewLimits                                		[0 156.75 0 153.75]
		screen                                    		[1 1 1400 1050 1.040496254681648]
		treeNode                                  		[0 11 0 0]
		firstTransition                           		13
		firstJunction                             		12
		viewObj                                   		10
		machine                                   		1
		toolbarMode                               		LIBRARY_TOOLBAR
		decomposition                             		CLUSTER_CHART
		type                                      		EML_CHART
		firstData                                 		14
		chartFileNumber                           		2
		disableImplicitCasting                    		1
		eml {
			name		"fcn"
		}
	}

	state {
		id                  		11
		labelString         		"eML_blk_kernel()"
		position            		[18 64.5 118 66]
		fontSize            		12
		chart               		10
		treeNode            		[10 0 0 0]
		superState          		SUBCHART
		subviewer           		10
		type                		FUNC_STATE
		decomposition       		CLUSTER_STATE
		eml {
			isEML       		1
			script      		"function y = fcn(u)\n"
						"% This block supports an embeddable subset of the MATLAB la"
						"nguage.\n"
						"% See the help menu for details. \n"
						"if u>1000000000000\n"
						"    y = 0;\n"
						"else\n"
						"    y=u;\n"
						"end"
			editorLayout		"100 M4x1[195 69 671 364]"
		}
	}

	junction {
		id         		12
		position   		[23.5747 49.5747 7]
		chart      		10
		linkNode   		[10 0 0]
		subviewer  		10
		type       		CONNECTIVE_JUNCTION
	}

	transition {
		id             		13
		labelString    		"{eML_blk_kernel();}"
		labelPosition  		[32.125 19.875 102.544 14.964]
		fontSize       		12
		src {
			intersection		[0 0 1 0 23.5747 14.625 0 0]
		}
		dst {
			id          		12
			intersection		[7 0 -1 -1 23.5747 42.5747 0 0]
		}
		midPoint       		[23.5747 24.9468]
		chart          		10
		linkNode       		[10 0 0]
		dataLimits     		[21.175 25.975 14.625 42.575]
		subviewer      		10
		drawStyle      		SMART
		executionOrder 		1
	}

	data {
		id                            		14
		name                          		"u"
		linkNode                      		[10 0 15]
		scope                         		INPUT_DATA
		machine                       		1
		dataType                      		"inherited"
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		complexity                    		SF_COMPLEX_INHERITED
		props {
			range {
				minimum		""
				maximum		""
			}
			array {
				size      		"-1"
			}
		}
	}

	data {
		id                            		15
		name                          		"y"
		linkNode                      		[10 14 0]
		scope                         		OUTPUT_DATA
		machine                       		1
		dataType                      		"inherited"
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		complexity                    		SF_COMPLEX_INHERITED
		props {
			range {
				minimum		""
				maximum		""
			}
			array {
				size      		"-1"
			}
		}
	}

	instance {
		id     		16
		name   		"ACS/magnetorquer driver/Embedded\n"
					"MATLAB Function"
		machine		1
		chart  		10
	}

	chart {
		id                                        		17
		name                                      		"ACS/magnetorquer driver/Embedded\n"
					"MATLAB Function1"
		windowPosition                            		[315.45 258.75 200.25 189.75]
		viewLimits                                		[0 156.75 0 153.75]
		screen                                    		[1 1 1400 1050 1.040496254681648]
		treeNode                                  		[0 18 0 0]
		firstTransition                           		20
		firstJunction                             		19
		viewObj                                   		17
		machine                                   		1
		decomposition                             		CLUSTER_CHART
		type                                      		EML_CHART
		firstData                                 		21
		chartFileNumber                           		3
		disableImplicitCasting                    		1
		eml {
			name		"fcn"
		}
	}

	state {
		id                  		18
		labelString         		"eML_blk_kernel()"
		position            		[18 64.5 118 66]
		fontSize            		12
		chart               		17
		treeNode            		[17 0 0 0]
		superState          		SUBCHART
		subviewer           		17
		type                		FUNC_STATE
		decomposition       		CLUSTER_STATE
		eml {
			isEML       		1
			script      		"function y = fcn(u)\n"
						"% This block supports an embeddable subset of the MATLAB la"
						"nguage.\n"
						"% See the help menu for details. \n"
						"if u>1000000000000\n"
						"    y = 0;\n"
						"else\n"
						"    y=u;\n"
						"end"
			editorLayout		"100 M4x1[195 69 671 364]"
		}
	}

	junction {
		id         		19
		position   		[23.5747 49.5747 7]
		chart      		17
		linkNode   		[17 0 0]
		subviewer  		17
		type       		CONNECTIVE_JUNCTION
	}

	transition {
		id             		20
		labelString    		"{eML_blk_kernel();}"
		labelPosition  		[32.125 19.875 102.544 14.964]
		fontSize       		12
		src {
			intersection		[0 0 1 0 23.5747 14.625 0 0]
		}
		dst {
			id          		19
			intersection		[7 0 -1 -1 23.5747 42.5747 0 0]
		}
		midPoint       		[23.5747 24.9468]
		chart          		17
		linkNode       		[17 0 0]
		dataLimits     		[21.175 25.975 14.625 42.575]
		subviewer      		17
		drawStyle      		SMART
		executionOrder 		1
	}

	data {
		id                            		21
		name                          		"u"
		linkNode                      		[17 0 22]
		scope                         		INPUT_DATA
		machine                       		1
		dataType                      		"inherited"
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		complexity                    		SF_COMPLEX_INHERITED
		props {
			range {
				minimum		""
				maximum		""
			}
			array {
				size      		"-1"
			}
		}
	}

	data {
		id                            		22
		name                          		"y"
		linkNode                      		[17 21 0]
		scope                         		OUTPUT_DATA
		machine                       		1
		dataType                      		"inherited"
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		complexity                    		SF_COMPLEX_INHERITED
		props {
			range {
				minimum		""
				maximum		""
			}
			array {
				size      		"-1"
			}
		}
	}

	instance {
		id     		23
		name   		"ACS/magnetorquer driver/Embedded\n"
					"MATLAB Function1"
		machine		1
		chart  		17
	}

	chart {
		id                                        		24
		name                                      		"ACS/magnetorquer driver/Embedded\n"
					"MATLAB Function2"
		windowPosition                            		[315.45 258.75 200.25 189.75]
		viewLimits                                		[0 156.75 0 153.75]
		screen                                    		[1 1 1400 1050 1.040496254681648]
		treeNode                                  		[0 25 0 0]
		firstTransition                           		27
		firstJunction                             		26
		viewObj                                   		24
		machine                                   		1
		decomposition                             		CLUSTER_CHART
		type                                      		EML_CHART
		firstData                                 		28
		chartFileNumber                           		4
		disableImplicitCasting                    		1
		eml {
			name		"fcn"
		}
	}

	state {
		id                  		25
		labelString         		"eML_blk_kernel()"
		position            		[18 64.5 118 66]
		fontSize            		12
		chart               		24
		treeNode            		[24 0 0 0]
		superState          		SUBCHART
		subviewer           		24
		type                		FUNC_STATE
		decomposition       		CLUSTER_STATE
		eml {
			isEML       		1
			script      		"function y = fcn(u)\n"
						"% This block supports an embeddable subset of the MATLAB la"
						"nguage.\n"
						"% See the help menu for details. \n"
						"if u>1000000000000\n"
						"    y = 0;\n"
						"else\n"
						"    y=u;\n"
						"end"
			editorLayout		"100 M4x1[195 69 671 364]"
		}
	}

	junction {
		id         		26
		position   		[23.5747 49.5747 7]
		chart      		24
		linkNode   		[24 0 0]
		subviewer  		24
		type       		CONNECTIVE_JUNCTION
	}

	transition {
		id             		27
		labelString    		"{eML_blk_kernel();}"
		labelPosition  		[32.125 19.875 102.544 14.964]
		fontSize       		12
		src {
			intersection		[0 0 1 0 23.5747 14.625 0 0]
		}
		dst {
			id          		26
			intersection		[7 0 -1 -1 23.5747 42.5747 0 0]
		}
		midPoint       		[23.5747 24.9468]
		chart          		24
		linkNode       		[24 0 0]
		dataLimits     		[21.175 25.975 14.625 42.575]
		subviewer      		24
		drawStyle      		SMART
		executionOrder 		1
	}

	data {
		id                            		28
		name                          		"u"
		linkNode                      		[24 0 29]
		scope                         		INPUT_DATA
		machine                       		1
		dataType                      		"inherited"
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		complexity                    		SF_COMPLEX_INHERITED
		props {
			range {
				minimum		""
				maximum		""
			}
			array {
				size      		"-1"
			}
		}
	}

	data {
		id                            		29
		name                          		"y"
		linkNode                      		[24 28 0]
		scope                         		OUTPUT_DATA
		machine                       		1
		dataType                      		"inherited"
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		complexity                    		SF_COMPLEX_INHERITED
		props {
			range {
				minimum		""
				maximum		""
			}
			array {
				size      		"-1"
			}
		}
	}

	instance {
		id     		30
		name   		"ACS/magnetorquer driver/Embedded\n"
					"MATLAB Function2"
		machine		1
		chart  		24
	}

	target {
		id                        		31
		name                      		"sfun"
		description               		"Default Simulink S-Function Target."
		machine                   		1
		linkNode                  		[1 0 0]
	}
}
